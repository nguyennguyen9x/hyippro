window.__require=function t(e,i,s){function o(a,r){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,i,s)}return i[a].exports}for(var n="function"==typeof __require&&__require,a=0;a<s.length;a++)o(s[a]);return o}({"Poker.CardUtil":[function(t,e,i){"use strict";cc._RF.push(e,"9e845jpkItM3qUvol2ZR5Tu","Poker.CardUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.common=void 0;const{ccclass:s,property:o}=cc._decorator;var n;(function(t){t.CardUtils=class{static getCardInfo(t){this.id=t,this.so=this.getSoById(t),this.chat=this.getChatById(t),this.diem=this.getDiemById(t)}static getSoById(t){return Math.floor(t/4)}static getDiemById(t){return Math.floor(t/4)+1}static getChatById(t){return t%4}static getNormalId(t){var e;return e=4>t?11:8>t?12:Math.floor(t/4)-2,3==(t=Math.floor(t%4))?t=2:2==t&&(t=3),4*e+t}}})(n=i.common||(i.common={})),i.default=n.CardUtils,cc._RF.pop()},{}],"Poker.Cmd":[function(t,e,i){"use strict";cc._RF.push(e,"a2f0cU5NKtF15h1g6X6i4BJ","Poker.Cmd"),Object.defineProperty(i,"__esModule",{value:!0}),i.cmd=void 0;const s=t("../../Main/Game/src/common/Configs"),o=t("../../Main/Game/src/networks/Network.InPacket"),n=t("../../Main/Game/src/networks/Network.OutPacket");var a;(function(t){class e{}e.LOGIN=1,e.TOPSERVER=1001,e.CMD_PINGPONG=1050,e.CMD_JOIN_ROOM=3001,e.CMD_RECONNECT_ROOM=3002,e.MONEY_BET_CONFIG=3003,e.JOIN_ROOM_FAIL=3004,e.CHAT_ROOM=3008,e.GET_LIST_ROOM=3014,e.JOIN_GAME_ROOM_BY_ID=3015,e.MOI_DAT_CUOC=3114,e.UPDATE_OWNER_ROOM=3117,e.NOTIFY_USER_GET_JACKPOT=3122,e.PLAYER_STATUS_OUT_GAME=0,e.PLAYER_STATUS_VIEWER=1,e.PLAYER_STATUS_SITTING=2,e.PLAYER_STATUS_PLAYING=3,e.SELECT_DEALER=3100,e.TAKE_TURN=3101,e.BUY_IN=3102,e.KET_THUC=3103,e.CHANGE_TURN=3104,e.NEW_ROUND=3105,e.DEAL_PRIVATE_CARD=3106,e.TU_DONG_BAT_DAU=3107,e.SHOW_CARD=3108,e.REQUEST_BUY_IN=3109,e.THONG_TIN_BAN_CHOI=3110,e.DANG_KY_THOAT_PHONG=3111,e.REQUEST_STAND_UP=3113,e.CHEAT_CARDS=3115,e.DANG_KY_CHOI_TIEP=3116,e.JOIN_ROOM_SUCCESS=3118,e.LEAVE_GAME=3119,e.NOTIFY_KICK_FROM_ROOM=3120,e.NEW_USER_JOIN=3121,e.UPDATE_MATCH=3123,e.CARDS_DEFINE=3999,e.REQUEST_INFO_TOUR=3990,e.UPDATE_TIME=3991,e.MAX_PLAYER=9,e.MAX_BUY_IN=250,e.GAME_ACTION_FOLD=0,e.GAME_ACTION_CHECK=1,e.GAME_ACTION_CALL=2,e.GAME_ACTION_RAISE=3,e.GAME_ACTION_ALL_IN=4,e.EG_SANH_VUA=0,e.EG_THUNG_PHA_SANH=1,e.EG_TU_QUY=2,e.EG_CU_LU=3,e.EG_THUNG=4,e.EG_SANH=5,e.EG_XAM_CO=6,e.EG_HAI_DOI=7,e.EG_DOI=8,e.EG_MAU_THAU=9,e.EG_SERVER_NGU=10,e.STATE_CHIA_BAI=1,e.STATE_JOIN_ROOM=2,e.STATE_END_GAME=3,e.STATE_NEW_USER_JOIN_ROOM=5,e.STATE_USER_LEAVE_ROOM=6,e.STATE_DEAL_CARD=7,e.STATE_SELECT_DEALER=8,e.STATE_CHANGE_TURN=9,e.STATE_NEW_BET_ROUND=10,e.STATE_NOTIFY_OUT_ROOM=11,e.STATE_BUY_IN=12,e.STATE_UPDATE_MATCH=13,e.STATE_GAME_INFO=14,e.STATE_SHOW_CARD=15,e.STATE_NOTIFY_BUY_IN=16,e.STATE_STAND_UP=17,e.GET_MONEY_USE=20051,t.Code=e,t.ReqGetMoneyUse=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.GET_MONEY_USE),this.packHeader(),this.updateSize()}},t.ResGetMoneyUse=class extends o.default{constructor(t){super(t),this.moneyUse=0,this.moneyUse=this.getLong()}},t.CmdLogin=class extends n.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.LOGIN),this.packHeader(),this.putString(t),this.putString(i),this.updateSize()}},t.CmdJoinRoom=class extends n.default{constructor(t,i,s){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CMD_JOIN_ROOM),this.packHeader(),this.putInt(t),this.putInt(i),this.putLong(s),this.putInt(0),this.updateSize()}},t.CmdReconnectRoom=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CMD_RECONNECT_ROOM),this.packHeader(),this.updateSize()}},t.CmdSendRequestLeaveGame=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.DANG_KY_THOAT_PHONG),this.packHeader(),this.updateSize()}},t.CmdSendHoldRoom=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.DANG_KY_CHOI_TIEP),this.packHeader(),this.updateSize()}},t.SendGetGameConfig=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.MONEY_BET_CONFIG),this.packHeader(),this.updateSize()}},t.SendGetTopServer=class extends n.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.TOPSERVER),this.packHeader(),this.putByte(t),this.updateSize()}},t.SendCheatCards=class extends n.default{constructor(t,i){if(super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CHEAT_CARDS),this.packHeader(),this.putByte(t),this.putByte(0),this.putShort(i.length),t)for(var s=0;s<i.length;s++)this.putByte(i[s]);this.updateSize()}},t.CmdSendPing=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CMD_PINGPONG),this.packHeader(),this.updateSize()}},t.SendGetListRoom=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.GET_LIST_ROOM),this.packHeader(),this.putInt(s.default.App.MONEY_TYPE),this.putInt(e.MAX_PLAYER),this.putLong(-1),this.putInt(0),this.putInt(0),this.putInt(50),this.updateSize()}},t.SendJoinRoomById=class extends n.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.JOIN_GAME_ROOM_BY_ID),this.packHeader(),this.putInt(t),this.putString(""),this.updateSize()}},t.SendChatRoom=class extends n.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CHAT_ROOM),this.packHeader(),this.putByte(t?1:0),this.putString(encodeURI(i)),this.updateSize()}},t.SendTakeTurn=class extends n.default{constructor(t,i,s,o,n){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.TAKE_TURN),this.packHeader(),this.putByte(1==t),this.putByte(1==i),this.putByte(1==o),this.putByte(1==s),this.putByte(!1),this.putLong(n),this.updateSize()}},t.SendBuyIn=class extends n.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.BUY_IN),this.packHeader(),this.putLong(t),this.putByte(i),this.updateSize()}},t.SendShowCard=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.SHOW_CARD),this.packHeader(),this.updateSize()}},t.SendGetInfoTour=class extends n.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.REQUEST_INFO_TOUR),this.packHeader(),this.putByte(t),this.updateSize()}},t.SendDungDay=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.REQUEST_STAND_UP),this.packHeader(),this.updateSize()}},t.SendCardsDefine=class extends n.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CARDS_DEFINE),this.packHeader(),this.updateSize()}},t.ReceivedLogin=class extends o.default{constructor(t){super(t)}},t.ReceivedGetListRoom=class extends o.default{constructor(t){super(t),this.list=[];let e=this.getShort();this.list=[];for(var i=0;i<e;i++){let t={};t.id=this.getInt(),t.userCount=this.getByte(),t.limitPlayer=this.getByte(),t.maxUserPerRoom=this.getInt(),t.moneyType=this.getByte(),t.moneyBet=this.getInt(),t.requiredMoney=this.getInt(),t.rule=this.getByte(),t.nameRoom=this.getString(),t.key=this.getBool(),t.quyban=this.getLong(),this.list.push(t)}}},t.ReceivedJoinRoomSucceed=class extends o.default{constructor(t){super(t),this.myChair=this.getByte(),this.moneyBet=this.getLong(),this.roomOwner=this.getByte(),this.roomId=this.getInt(),this.gameId=this.getInt(),this.moneyType=this.getByte(),this.rule=this.getByte(),this.playerSize=this.getShort(),this.playerStatus=[];for(var e=0;e<this.playerSize;e++)this.playerStatus.push(this.getByte());for(this.playerSize=this.getShort(),this.playerInfos=[],e=0;e<this.playerSize;e++){var i={};i.avatar=this.getString(),i.nickName=this.getString(),i.currentMoney=this.getLong(),this.playerInfos.push(i)}for(this.gameAction=this.getByte(),this.handCardSizeSize=this.getShort(),this.handCardSizeList=[],e=0;e<this.handCardSizeSize;e++)this.handCardSizeList.push(this.getByte());this.currentActionChair=this.getByte(),this.countDownTime=this.getByte(),this.minBuyInTiLe=this.getInt(),this.maxBuyInTiLe=this.getInt()}},t.ReceivedAutoStart=class extends o.default{constructor(t){super(t),this.isAutoStart=this.getBool(),this.timeAutoStart=this.getByte()}},t.ReceivedChiaBai=class extends o.default{constructor(t){super(t);var e=0;for(this.cardSize=this.getShort(),this.cards=[],e=0;e<this.cardSize;e++)this.cards.push(this.getByte());this.gameId=this.getInt(),this.timeChiaBai=this.getByte()}},t.ReceivedUserLeaveRoom=class extends o.default{constructor(t){super(t),this.chair=this.getByte(),this.nickName=this.getString(),this.message=this.getString()}},t.ReceivedUserJoinRoom=class extends o.default{constructor(t){super(t),this.info={},this.info.nickName=this.getString(),this.info.avatar=this.getString(),this.info.money=this.getLong(),this.uChair=this.getByte(),this.uStatus=this.getByte()}},t.ReceivedUpdateMatch=class extends o.default{constructor(t){super(t),this.chair=this.getByte(),this.hasInfoSize=this.getShort(),this.hasInfoList=[];for(var i=0;i<this.hasInfoSize;i++)this.hasInfoList.push(this.getByte());for(this.currentMoneyList=[],this.statusList=[],i=0;i<e.MAX_PLAYER;i++)this.hasInfoList[i]?(this.currentMoneyList.push(this.getLong()),this.statusList.push(this.getInt())):(this.currentMoneyList.push(0),this.statusList.push(0))}},t.ReceivedNotifyRegOutRoom=class extends o.default{constructor(t){super(t),this.outChair=this.getByte(),this.isOutRoom=this.getBool()}},t.ReceivedKickOff=class extends o.default{constructor(t){super(t),this.reason=this.getByte()}},t.ReceivedMoiDatCuoc=class extends o.default{constructor(t){super(t),this.timeDatCuoc=this.getByte()}},t.ReceivedDatCuoc=class extends o.default{constructor(t){super(t),this.chairDatCuoc=this.getByte(),this.level=this.getByte()}},t.ReceivedMoBai=class extends o.default{constructor(t){super(t),this.chairMoBai=this.getByte(),this.cardSize=this.getShort(),this.cards=[];for(var e=0;e<this.cardSize;e++)this.cards.push(this.getByte())}},t.ReceivedEndGame=class extends o.default{constructor(t){super(t),this.potAmount=this.getLong(),this.rankSize=this.getShort(),this.rankList=[];for(var i=0;i<this.rankSize;i++)this.rankList.push(this.getLong());for(this.kqttSize=this.getShort(),this.kqttList=[],i=0;i<this.kqttSize;i++)this.kqttList.push(this.getLong());for(this.booleanWinerSize=this.getShort(),this.booleanWinerList=[],i=0;i<this.booleanWinerSize;i++)this.booleanWinerList.push(this.getInt());for(this.moneyArraySize=this.getShort(),this.currentMoney=[],i=0;i<this.moneyArraySize;i++)this.currentMoney.push(this.getLong());for(this.gameMoney=[],this.gameMoneySize=this.getShort(),i=0;i<this.gameMoneySize;i++)this.gameMoney.push(this.getLong());for(this.publicCardSize=this.getShort(),this.publicCards=[],i=0;i<this.publicCardSize;i++)this.publicCards.push(this.getByte());for(this.hasInfoSize=this.getShort(),this.hasInfoList=[],i=0;i<this.hasInfoSize;i++)this.hasInfoList.push(this.getByte());for(this.privateCardList=[],this.maxCardList=[],this.cardNameList=[],i=0;i<e.MAX_PLAYER;i++){var s=0,o=[],n=[];if(this.hasInfoList[i]){s=this.getShort();for(var a=0;a<s;a++)n.push(this.getByte());s=this.getByte();var r=this.getShort();for(a=0;a<r;a++)o.push(this.getByte())}else s=0,o=[];this.maxCardList.push(o),this.privateCardList.push(n),this.cardNameList.push(s)}}},t.ReceivedDoiChuong=class extends o.default{constructor(t){super(t),this.chuongChair=this.getByte()}},t.ReceivedChatRoom=class extends o.default{constructor(t){super(t),this.chair=this.getByte(),this.isIcon=this.getBool(),this.content=decodeURI(this.getString()),this.nickname=this.getString()}},t.ReceivedGameInfo=class extends o.default{constructor(t){super(t),this.chair=this.getByte(),this.myCardSize=this.getShort(),this.myCards=[];for(var i=0;i<this.myCardSize;i++)this.myCards.push(this.getByte());for(this.publicCardSize=this.getShort(),this.publicCards=[],i=0;i<this.publicCardSize;i++)this.publicCards.push(this.getByte());for(this.dealerChair=this.getByte(),this.smallBlindChair=this.getByte(),this.bigBlindChair=this.getByte(),this.potAmount=this.getLong(),this.maxBet=this.getLong(),this.raiseStep=this.getLong(),this.roundId=this.getByte(),this.gameServerState=this.getByte(),this.gameAction=this.getByte(),this.countDownTime=this.getByte(),this.currentActiveChair=this.getByte(),this.moneyType=this.getByte(),this.bet=this.getLong(),this.gameId=this.getInt(),this.roomId=this.getInt(),this.hasInfoSize=this.getShort(),this.hasInfoList=[],i=0;i<this.hasInfoSize;i++)this.hasInfoList.push(this.getByte());for(this.playerInfoList=[],i=0;i<e.MAX_PLAYER;i++){if(this.hasInfoList[i]){var s=[];s.hasFold=this.getByte(),s.hasAllIn=this.getByte(),s.currentBet=this.getLong(),s.currentMoney=this.getLong(),s.status=this.getByte(),s.avatarUrl=this.getString(),s.nickName=this.getString()}else(s=[]).hasFold=0,s.hasAllIn=0,s.currentBet=0,s.currentMoney=0,s.status=0,s.avatarUrl="",s.nickName="";this.playerInfoList.push(s)}}},t.ReceivedTakeTurn=class extends o.default{constructor(t){super(t),this.actionChair=this.getByte(),this.action=this.getByte(),this.lastRaise=this.getLong(),this.currentBet=this.getLong(),this.maxBet=this.getLong(),this.currentMoney=this.getLong(),this.raiseStep=this.getLong(),this.raiseBlock=this.getByte()}},t.ReceivedSelectDealer=class extends o.default{constructor(t){super(t),this.dealerChair=this.getByte(),this.smallBlindChair=this.getByte(),this.bigBlindChair=this.getByte(),this.hasInfoSize=this.getShort(),this.hasInfoList=[];for(var i=0;i<this.hasInfoSize;i++){var s=this.getByte();this.hasInfoList.push(s)}for(this.playerStatusList=[],i=0;i<e.MAX_PLAYER;i++)this.hasInfoList[i]?(s=this.getByte(),this.playerStatusList.push(s),cc.log("i: "+i+" "+s)):this.playerStatusList.push(0);for(this.gameId=this.getInt(),this.isCheat=this.getByte(),this.currentMoneySize=this.getShort(),this.currentMoneyList=[],i=0;i<this.currentMoneySize;i++)this.currentMoneyList.push(this.getLong());for(this.size=this.getShort(),this.listBetBigBlind=[],s="",i=0;i<this.size;i++)this.listBetBigBlind.push(this.getByte()),s+=" "+this.listBetBigBlind[i]}},t.ReceivedBuyIn=class extends o.default{constructor(t){super(t),this.chair=this.getByte(),this.buyInMoney=this.getLong()}},t.ReceivedChangeTurn=class extends o.default{constructor(t){super(t),this.roundId=this.getByte(),this.chair=this.getByte(),this.betTime=this.getByte(),this.potMoney=this.getLong()}},t.ReceivedDealCards=class extends o.default{constructor(t){super(t),this.chair=this.getByte(),this.sizeCard=this.getShort(),this.myCards=[];for(var e=0;e<this.sizeCard;e++)this.myCards.push(this.getByte());this.boBaiId=this.getByte()}},t.ReceivedNewBetRound=class extends o.default{constructor(t){super(t),this.roundId=this.getByte(),this.sizeCard=this.getShort(),this.plusCards=[];for(var e=0;e<this.sizeCard;e++)this.plusCards.push(this.getByte());this.cardName=this.getByte(),this.potAmount=this.getLong()}},t.ReceivedShowCard=class extends o.default{constructor(t){super(t),this.chair=this.getByte()}},t.ReceivedStandUp=class extends o.default{constructor(t){super(t),this.isUp=this.getByte()}},t.ReceivedUpdateTime=class extends o.default{constructor(t){super(t),this.chair=this.getByte()}},t.ReceivedJoinRoomFail=class extends o.default{constructor(t){super(t)}},t.ReceivedCardsDefine=class extends o.default{constructor(t){super(t),this.strData=this.getString()}}})(a=i.cmd||(i.cmd={})),i.default=a,cc._RF.pop()},{"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"../../Main/Game/src/networks/Network.OutPacket":void 0}],"Poker.Constant":[function(t,e,i){"use strict";cc._RF.push(e,"19490eQf6BKCbcG5djYwb9C","Poker.Constant"),Object.defineProperty(i,"__esModule",{value:!0}),i.KickReasonCodes=void 0,function(t){let e;(function(t){t[t.ERROR_MONEY=1]="ERROR_MONEY",t[t.ERROR_BAO_TRI=2]="ERROR_BAO_TRI"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.KickReasonCodes||(i.KickReasonCodes={})),cc._RF.pop()},{}],"Poker.Controller":[function(t,e,i){"use strict";cc._RF.push(e,"d1a0egueZlH3apN/Hny5usz","Poker.Controller");var s,o=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,i,a):o(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../Main/Game/src/common/App"),a=t("../../Main/Game/src/common/BroadcastReceiver"),r=t("../../Main/Game/src/common/Configs"),c=t("../../Main/Game/src/common/Utils"),h=t("../../Main/Game/src/customui/CustomUI.SliderBet"),l=t("../../Main/Game/src/networks/CardGame.Cmd"),d=t("../../Main/Game/src/networks/MiniGameNetworkClient"),u=t("../../Main/Game/src/networks/Network.InPacket"),g=t("./Poker.CardUtil"),p=t("./Poker.Cmd"),m=t("./Poker.NetworkClient"),C=t("./Poker.Player"),f=t("../../Main/Game/src/networks/Network.Cmd"),y=t("../../Main/Game/src/games/cardgames/PopupCardDefinations"),R=t("../../Main/Game/src/games/cardgames/PopupChatInGame"),P=t("./Poker.Constant"),v=t("./Poker.PopupGuide");var I=[];let B=[[0,1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8,0],[2,3,4,5,6,7,8,0,1],[3,4,5,6,7,8,0,1,2],[4,5,6,7,8,0,1,2,3],[5,6,7,8,0,1,2,3,4],[6,7,8,0,1,2,3,4,5],[7,8,0,1,2,3,4,5,6],[8,0,1,2,3,4,5,6,7]];const{ccclass:_,property:S}=cc._decorator;let T=s=class extends cc.Component{constructor(){super(...arguments),this.UI_ChooseRoom=null,this.labelNickName=null,this.labelCoin=null,this.avatar=null,this.contentListRooms=null,this.prefabItemRoom=null,this.scrollListRoom=null,this.edtFindRoom=null,this.btnHideRoomFull=null,this.isInitedUIRoom=!1,this.UI_Playing=null,this.meCards=null,this.groupPlayers=null,this.spriteCards=[],this.spriteCardBack=null,this.matchPot=null,this.labelMatchPot=null,this.cardsDeal=null,this.cardsCenter=null,this.btnBet=null,this.btnOpenCard=null,this.btnLeaveRoom=null,this.hubChips=null,this.labelRoomId=null,this.labelRoomBet=null,this.actionBetting=null,this.FxDealer=null,this.btnBuyCashIn=null,this.btnActions=null,this.popupBuyIn=null,this.labelBuyInMin=null,this.labelBuyInMax=null,this.edtBuyIn=null,this.sliderBuyin=null,this.toggleAutoBuyIn=null,this.notifyTimeStart=null,this.notifyTimeEnd=null,this.notifyTimeBet=null,this.popupNodity=null,this.labelNotifyContent=null,this.lsSfChip=[],this.prefabItemChip=null,this.sliderBet=null,this.btnShowCardsDefine=null,this.seatOwner=null,this.currentRoomBet=null,this.seconds=null,this.timeAutoStart=null,this.timeEnd=null,this.timeBet=null,this.timeThinking=null,this.intervalWaitting=null,this.intervalEnd=null,this.intervalBetting=null,this.intervalThinking=null,this.currentCard=null,this.currentCenterCard=null,this.numCardOpened=0,this.currentMatchPotValue=0,this.timeoutEndGame=null,this.timeoutChiaBaiDone=null,this.minCashIn=null,this.maxCashIn=null,this.currentMaxBet=0,this.currentRaiseValue=0,this.currentRaiseStep=0,this.currentMeBet=0,this.currentPrivateCardList=[],this.roomMinBuyIn=0,this.roomMaxBuyIn=0,this.isClickBack=!1,this.cardsDefine=null,this.chipPool=new cc.NodePool("chip_temple"),this.foldedNum=0}onLoad(){s.instance=this,this.initConfigPlayer()}start(){this.showUIRooms(),this.seatOwner=-1,this.isClickBack=!1,n.default.instance.showErrLoading("\u0110ang k\u1ebft n\u1ed1i t\u1edbi server..."),m.default.getInstance().addOnOpen(()=>{n.default.instance.showErrLoading("\u0110ang \u0111ang \u0111\u0103ng nh\u1eadp..."),m.default.getInstance().send(new f.default.SendLogin(r.default.Login.Nickname,r.default.Login.AccessToken))},this),m.default.getInstance().addOnClose(()=>{this.isClickBack||!r.default.Login.IsLogin?this.backToLobby():n.default.instance.alertDialog.showMsgWithOnDismissed("B\u1ea1n \u0111\xe3 m\u1ea5t k\u1ebft n\u1ed1i v\u1edbi server",()=>{this.backToLobby()})},this),m.default.getInstance().connect(),a.default.register(a.default.USER_DISCONNECTED,()=>{m.default.getInstance().close()},this),a.default.send(a.default.SET_SOUND,cc.find("Canvas"))}resetGame(){this.closePopupBuyIn(),this.unschedule(this.timeoutEndGame),this.unschedule(this.timeoutChiaBaiDone),this.unschedule(this.intervalWaitting),this.unschedule(this.intervalEnd),this.unschedule(this.intervalBetting),this.unschedule(this.intervalThinking)}getChip(){return this.chipPool.size()>0?this.chipPool.get():cc.instantiate(this.prefabItemChip)}removeChip(t){this.chipPool.put(t)}setMatchPot(t,e,i,s=!0){if(i)return void(cc.isValid(this.currentMatchPotValue)&&(this.labelMatchPot.string=c.default.formatNumber(this.currentMatchPotValue)));if(null==t){let t=this.matchPot.getChildByName("Icon");if(0==this.currentMatchPotValue){for(;t.childrenCount>0;)this.removeChip(t.children[0]);return}let i=Math.floor(e/this.currentRoomBet);for(let e=0;e<i;e++){let s=this.getChip();s.x=0,s.getComponent(cc.Sprite).spriteFrame=this.lsSfChip[0],s.type=1,s.parent=t,s.active=!0,e>=i-1&&(this.calculatorPot(t,1),cc.isValid(this.currentMatchPotValue)&&(this.labelMatchPot.string=c.default.formatNumber(this.currentMatchPotValue)))}return}if(0==e)return;let o=this.matchPot.getChildByName("Icon"),n=new cc.Node,a=Math.floor(e/this.currentRoomBet),r=this.UI_Playing.convertToNodeSpaceAR(t.node.parent.convertToWorldSpaceAR(t.node.position));for(let c=0;c<a;c++){let t=this.getChip();t.getComponent(cc.Sprite).spriteFrame=this.lsSfChip[0],t.type=1,t.parent=n,t.active=!1,t.x=0}this.calculatorPot(n,1);let h=[];for(let c=0;c<n.childrenCount;c++){let t=n.children[c];h.push(t)}n.destroy();for(let l=0;l<h.length;l++){let t=h[l];t.parent=this.UI_Playing,t.active=!0,t.position=r,t.x=0,l>=n.childrenCount-1?cc.tween(t).to(.5,{position:this.matchPot.position}).call(()=>{t.parent=o,s&&this.calculatorPot(o,1),cc.isValid(this.currentMatchPotValue)&&(this.labelMatchPot.string=c.default.formatNumber(this.currentMatchPotValue))}).start():cc.tween(t).to(.5,{position:this.matchPot.position}).call(()=>{t.parent=o}).start()}}calculatorPot(t,e){if(e>this.lsSfChip.length)return;t.children.sort((t,e)=>e.type-t.type);for(let s=0;s<t.childrenCount;s++)t.children[s].zIndex=s;let i=[];for(let s=0;s<t.childrenCount;s++)if(t.children[s].type==e&&i.push(t.children[s]),10==i.length){for(;i.length>1;)this.removeChip(i[0]),i.shift();i[0].getComponent(cc.Sprite).spriteFrame=this.lsSfChip[e],i[0].type=e+1,i=[],s=0}this.calculatorPot(t,e+1)}onDestroy(){this.resetGame()}onDisable(){this.resetGame()}joinRoom(t){n.default.instance.showLoading(!0),m.default.getInstance().send(new l.default.SendJoinRoom(r.default.App.MONEY_TYPE,t.maxUserPerRoom,t.moneyBet,0))}refeshListRoom(){this.contentListRooms.removeAllChildren(!0),m.default.getInstance().send(new l.default.SendMoneyBetConfig)}findRoomId(){let t=this.edtFindRoom.string.trim();if(t.length>0){let e=parseInt(t);for(let t=0;t<this.contentListRooms.childrenCount;t++)this.contentListRooms.children[t].getComponent("ItemRoom").roomInfo.id!=e&&(this.contentListRooms.children[t].active=!1)}else for(let e=0;e<this.contentListRooms.childrenCount;e++)this.contentListRooms.children[e].active=!0}hideRoomFull(){if(this.btnHideRoomFull.isChecked)for(let t=0;t<this.contentListRooms.childrenCount;t++){let e=this.contentListRooms.children[t].getComponent("ItemRoom");e.roomInfo.userCount==e.roomInfo.maxUserPerRoom&&(this.contentListRooms.children[t].active=!1)}else for(let t=0;t<this.contentListRooms.childrenCount;t++)this.contentListRooms.children[t].active=!0}showUIRooms(){this.UI_ChooseRoom.active=!0,this.isInitedUIRoom?a.default.send(a.default.USER_UPDATE_COIN):(this.isInitedUIRoom=!0,this.labelCoin.string=c.default.formatNumber(r.default.Login.Coin),this.labelNickName.string=r.default.Login.Nickname,this.avatar.spriteFrame=n.default.instance.getAvatarSpriteFrame(r.default.Login.Avatar),a.default.register(a.default.USER_UPDATE_COIN,()=>{this.labelCoin.string=c.default.formatNumber(r.default.Login.Coin)},this),a.default.send(a.default.USER_UPDATE_COIN),this.setupListener())}closeUIRoom(){this.UI_ChooseRoom.active=!1}createRoom(){}playingNow(){let t=[];for(let i=0;i<this.contentListRooms.childrenCount;i++){let e=this.contentListRooms.children[i].getComponent("ItemRoom");e.roomInfo.userCount<e.roomInfo.maxUserPerRoom&&e.roomInfo.requiredMoney<=r.default.Login.Coin&&t.push(e.roomInfo)}if(t.length>0){var e=t.find(t=>t.userCount>0);cc.isValid(e)?this.joinRoom(e):(t=t.sort(()=>Math.random()-.5),this.joinRoom(t[0]))}else n.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{n.default.instance.openShop(0)})}showUIChat(){R.default.createAndShow(this.UI_Playing,this.cardsDefine,(t,e)=>{m.default.getInstance().send(new p.default.SendChatRoom(t,e))},(t,e)=>{m.default.getInstance().send(new p.default.SendCheatCards(t,e))})}actBack(){this.isClickBack=!0,m.default.getInstance().close()}backToLobby(){n.default.instance.loadScene("Lobby")}showUIPlaying(){this.UI_Playing.active=!0}closeUIPlaying(){this.actionLeaveRoom()}setupMatch(t){this.showUIPlaying();let e=t.myChair,i=t.moneyBet,s=t.roomOwner,o=t.roomId,n=(t.gameId,t.moneyType,t.rule,t.playerSize,t.playerStatus),a=t.playerInfos,h=(t.handCardSizeSize,t.handCardSizeList,t.minBuyInTiLe),l=t.maxBuyInTiLe;this.roomMinBuyIn=h,this.roomMaxBuyIn=l,this.labelRoomId.string="POKER - PH\xd2NG: "+o,this.labelRoomBet.string="M\u1ee8C C\u01af\u1ee2C: "+c.default.formatNumber(i)+"$",this.currentRoomBet=i,this.resetCenterCards(),I[0].playerId=r.default.Login.Nickname,I[0].playerPos=e;var d=[],u=[],g=[];for(let r=0;r<p.default.Code.MAX_PLAYER;r++)""!==a[r].nickName&&(d.push(r),u.push(a[r]),g.push(n[r]));this.resetHubChips();for(let r=0;r<I.length;r++)I[r].playerPos=B[e][r];for(let r=0;r<I.length;r++){let t=d.indexOf(I[r].playerPos),e=I[r].seatId;this.getPlayerHouse(e).resetPlayerInfo(),t>-1?(this.setupSeatPlayer(e,u[t]),0==e&&this.showPopupBuyIn(h,l,i),g[t]==p.default.Code.PLAYER_STATUS_SITTING||g[t]==p.default.Code.PLAYER_STATUS_PLAYING?(I[r].isViewer=!1,this.getPlayerHouse(e).setIsViewer(!1)):(I[r].isViewer=!0,this.getPlayerHouse(e).setIsViewer(!0),-1!=I[e].playerId&&this.getPlayerHouse(e).playFxViewer())):(this.getPlayerHouse(e).showBtnInvite(!0),I[r].isViewer=!0)}for(let r=0;r<p.default.Code.MAX_PLAYER;r++)this.getPlayerHouse(r).setOwner(!1);let m=this.findPlayerSeatByPos(s);-1!==m&&(this.getPlayerHouse(m).setOwner(!0),this.seatOwner=m)}startThinkingCountDown(t,e){this.timeThinking=e,this.unschedule(this.intervalThinking),this.schedule(this.intervalThinking=()=>{this.timeThinking--;var i=(this.timeThinking/e).toFixed(2);this.getPlayerHouse(t).processThinking(i),this.timeThinking<1&&(this.unschedule(this.intervalThinking),this.getPlayerHouse(t).hidePlayCountdown())},1)}startWaittingCountDown(t){this.timeAutoStart=t,this.setTimeWaittingCountDown(),this.notifyTimeStart.parent.active=!0,this.unschedule(this.intervalWaitting),this.schedule(this.intervalWaitting=()=>{this.timeAutoStart--,this.setTimeWaittingCountDown(),this.timeAutoStart<1&&(this.unschedule(this.intervalWaitting),this.notifyTimeStart.parent.active=!1)},1)}setTimeWaittingCountDown(){this.seconds=Math.floor(this.timeAutoStart%60),this.notifyTimeStart.getComponent(cc.Label).string=" B\u1eaft \u0111\u1ea7u sau : "+this.seconds+"s "}startEndCountDown(t){this.timeEnd=t,this.setTimeEndCountDown(),this.notifyTimeEnd.parent.active=!0,this.unschedule(this.intervalEnd),this.schedule(this.intervalEnd=()=>{this.timeEnd--,this.setTimeEndCountDown(),this.timeEnd<1&&(this.unschedule(this.intervalEnd),this.notifyTimeEnd.parent.active=!1)},1)}setTimeEndCountDown(){this.seconds=Math.floor(this.timeEnd%60),this.notifyTimeEnd.getComponent(cc.Label).string=" K\u1ebft th\xfac sau : "+this.seconds+"s "}startBettingCountDown(t){cc.log("Poker startBettingCountDown turnTime : ",t),this.timeBet=t,this.actionBetting.active=!0,this.processBetting(1),this.unschedule(this.intervalBetting),this.schedule(this.intervalBetting=()=>{this.timeBet--;var e=(this.timeBet/t).toFixed(1);this.processBetting(e),this.timeBet<1&&(this.unschedule(this.intervalBetting),this.actionBetting.active=!1)},1)}processBetting(t){this.actionBetting.children[1].getComponent(cc.Sprite).fillRange=t}openMeCard(t,e){let i=parseInt(e);this.getPlayerHouse(0).prepareCardReal(i);let s=this.currentCard[i];if(this.getPlayerHouse(0).transformToCardReal(i,this.spriteCards[s]),this.numCardOpened+=1,3==this.numCardOpened){this.btnOpenCard.active=!0,this.btnBet.active=!1;let t=0;for(let e=0;e<3;e++)t+=g.default.getDiemById(this.currentCard[e]);t>10?this.getPlayerHouse(0).showCardName(t%10+" \u0110i\u1ec3m"):this.getPlayerHouse(0).showCardName(t+" \u0110i\u1ec3m"),this.scheduleOnce(()=>{null!=this.node&&void 0!==this.node&&this.getPlayerHouse(0).resetCardReady()},.2)}}moveChipsToHubNow(t){this.hubChips.children[2*t].position=cc.v3(25,80),this.hubChips.children[2*t].scale=0,this.hubChips.children[2*t+1].position=cc.v3(25,80),this.hubChips.children[2*t+1].scale=0}fxMoveChips(t,e,i,s){t.runAction(cc.sequence(cc.delayTime(e),cc.scaleTo(0,1,1),cc.spawn(cc.moveTo(.8,i,s),cc.scaleTo(.8,0,0))))}resetHubChips(){var t=[70,280,280,260,100,-260,-375,-360],e=[-195,-150,-55,70,90,85,-30,-155];for(let i=0;i<p.default.Code.MAX_PLAYER;i++)this.hubChips.children[2*i].position=cc.v3(t[i],e[i]),this.hubChips.children[2*i+1].position=cc.v3(t[i],e[i]);for(let i=0;i<16;i++)this.hubChips.children[i].active=!1}setupBet(){}showBtnRaise(t){this.btnActions.getChildByName("btnRaise").active=t}showBtnCheck(t){this.btnActions.getChildByName("btnCheck").active=t}showBtnCall(t){this.btnActions.getChildByName("btnCall").active=t}resetBtnActions(){for(let t=0;t<this.btnActions.childrenCount;t++)this.btnActions.children[t].active=!0}showPopupBuyIn(t,e,i){this.minCashIn=t,this.maxCashIn=e,this.popupBuyIn.active=!0,this.labelBuyInMin.string=c.default.formatNumber(i*t),r.default.Login.Coin>i*e?this.labelBuyInMax.string=c.default.formatNumber(i*e):this.labelBuyInMax.string=c.default.formatNumber(r.default.Login.Coin),this.edtBuyIn.string="",this.toggleAutoBuyIn.isChecked=!0,this.sliderBuyin.initValue(i*t,i,i*e)}closePopupBuyIn(){this.popupBuyIn.active=!1}actionBuyIn(){let t=this.sliderBuyin.current_raise;r.default.Login.Coin<t?n.default.instance.alertDialog.showMsg("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7"):(r.default.Login.Coin<this.maxCashIn&&(this.maxCashIn=r.default.Login.Coin),t<this.minCashIn*this.currentRoomBet?n.default.instance.alertDialog.showMsg("S\u1ed1 ti\u1ec1n Buy In ph\u1ea3i l\u1edbn h\u01a1n "+c.default.formatNumber(this.minCashIn*this.currentRoomBet)):t>this.maxCashIn*this.currentRoomBet?n.default.instance.alertDialog.showMsg("S\u1ed1 ti\u1ec1n Buy In ph\u1ea3i nh\u1ecf h\u01a1n "+c.default.formatNumber(this.maxCashIn*this.currentRoomBet)):(this.toggleAutoBuyIn.isChecked?m.default.getInstance().send(new p.default.SendBuyIn(t,1)):m.default.getInstance().send(new p.default.SendBuyIn(t,0)),n.default.instance.showLoading(!0),this.closePopupBuyIn()))}textChange(t){if(t.length>0){var e="";for(let i=0;i<t.length;i++)"0"!=t[i]&&"1"!=t[i]&&"2"!=t[i]&&"3"!=t[i]&&"4"!=t[i]&&"5"!=t[i]&&"6"!=t[i]&&"7"!=t[i]&&"8"!=t[i]&&"9"!=t[i]||(e+=t[i]);cc.log("Poker onTextChange rawNumber : ",e),this.edtBuyIn.string=""!==e?c.default.formatNumber(parseInt(e)):""}}showAllCenterCards(t){this.currentCenterCard=t;for(let e=0;e<t.length;e++){let i=t[e];this.cardsCenter.children[e].getComponent(cc.Sprite).spriteFrame=this.spriteCards[i]}this.scheduleOnce(()=>{null!=this.node&&void 0!==this.node&&(this.cardsCenter.children[0].runAction(cc.spawn(cc.moveTo(.1,-170,-45),cc.scaleTo(.1,1,1))),this.cardsCenter.children[1].runAction(cc.sequence(cc.spawn(cc.moveTo(.1,-17,-45),cc.scaleTo(.1,1,1)),cc.delayTime(.1),cc.moveTo(.2,-85,-45))),this.cardsCenter.children[2].runAction(cc.sequence(cc.spawn(cc.moveTo(.1,-170,-45),cc.scaleTo(.1,1,1)),cc.delayTime(.1),cc.moveTo(.2,0,-45))),this.cardsCenter.children[3].runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.moveTo(.1,85,-45),cc.scaleTo(.1,1,1)))),this.cardsCenter.children[4].runAction(cc.sequence(cc.delayTime(1.5),cc.spawn(cc.moveTo(.1,170,-45),cc.scaleTo(.1,1,1)))))},.4)}showCenterCards1stRound(t){this.currentCenterCard=t;for(let e=0;e<t.length;e++){let i=t[e];this.cardsCenter.children[e].getComponent(cc.Sprite).spriteFrame=this.spriteCards[i]}this.cardsCenter.children[0].runAction(cc.spawn(cc.moveTo(.1,-170,-45),cc.scaleTo(.1,1,1))),this.cardsCenter.children[1].runAction(cc.sequence(cc.spawn(cc.moveTo(.1,-17,-45),cc.scaleTo(.1,1,1)),cc.delayTime(.1),cc.moveTo(.2,-85,-45))),this.cardsCenter.children[2].runAction(cc.sequence(cc.spawn(cc.moveTo(.1,-170,-45),cc.scaleTo(.1,1,1)),cc.delayTime(.1),cc.moveTo(.2,0,-45)))}showCenterCards2ndRound(t){this.currentCenterCard.push(t[0]);let e=t[0];this.cardsCenter.children[3].getComponent(cc.Sprite).spriteFrame=this.spriteCards[e],this.cardsCenter.children[3].runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.moveTo(.1,85,-45),cc.scaleTo(.1,1,1))))}showCenterCards3rdRound(t){this.currentCenterCard.push(t[0]);let e=t[0];this.cardsCenter.children[4].getComponent(cc.Sprite).spriteFrame=this.spriteCards[e],this.cardsCenter.children[4].runAction(cc.sequence(cc.delayTime(1.5),cc.spawn(cc.moveTo(.1,170,-45),cc.scaleTo(.1,1,1))))}setupListener(){d.default.getInstance().addListener(t=>{switch(new u.default(t).getCmdId()){case p.default.Code.GET_MONEY_USE:{let e=new p.default.ResGetMoneyUse(t);cc.log("-=-=-=GET_MONEY_USE: ",e),r.default.Login.Coin=e.moneyUse,a.default.send(a.default.USER_UPDATE_COIN);break}}},this),m.default.getInstance().addListener(t=>{let e=new u.default(t);switch(e.getCmdId()){case p.default.Code.JOIN_ROOM_SUCCESS:{n.default.instance.showLoading(!1);let e=new p.default.ReceivedJoinRoomSucceed(t);cc.log("JOIN_ROOM_SUCCESS ",e),this.closeUIRoom(),this.setupMatch(e),this.getCardsDefine()}break;case p.default.Code.THONG_TIN_BAN_CHOI:{cc.log("Poker THONG_TIN_BAN_CHOI"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedGameInfo(t);cc.log("Poker THONG_TIN_BAN_CHOI res : ",JSON.stringify(e));let o=e.chair,a=e.myCardSize,h=e.myCards,l=e.publicCardSize,d=e.publicCards,u=e.dealerChair,g=e.smallBlindChair,m=e.bigBlindChair,C=e.potAmount,f=e.maxBet,y=e.raiseStep,R=(e.roundId,e.gameServerState,e.gameAction,e.countDownTime),P=e.currentActiveChair,v=e.bet,_=(e.gameId,e.roomId),S=(e.hasInfoSize,e.hasInfoList),T=e.playerInfoList;this.closeUIRoom(),this.showUIPlaying(),this.labelRoomId.string="POKER - PH\xd2NG: "+_,this.labelRoomBet.string="M\u1ee8C C\u01af\u1ee2C: "+c.default.formatNumber(v)+"/"+c.default.formatNumber(2*v)+"$",this.currentRoomBet=v,this.currentCard=h,this.matchPot.active=!0,cc.isValid(C)?this.currentMatchPotValue=C:this.currentMatchPotValue=0,this.setMatchPot(null,this.currentMatchPotValue,!1),null!=f&&(this.currentMaxBet=parseInt(f+"")),null!=y&&(this.currentRaiseStep=parseInt(y+"")),this.currentRaiseValue=this.currentMaxBet+this.currentRaiseStep,I[0].playerId=r.default.Login.Nickname,I[0].playerPos=o;var i=[];for(let t=0;t<p.default.Code.MAX_PLAYER;t++)S[t]&&i.push(t);for(let t=0;t<I.length;t++)I[t].playerPos=B[o][t];for(let t=0;t<I.length;t++){let e=i.indexOf(I[t].playerPos);var s=I[t].seatId;this.getPlayerHouse(s).resetPlayerInfo(),e>-1?(this.getPlayerHouse(s).setIsViewer(!1),this.setupSeatPlayer(s,{nickName:T[t].nickName,avatar:T[t].avatar,currentMoney:T[t].currentMoney}),0!=s&&(this.getPlayerHouse(s).showCardReady(!0),this.getPlayerHouse(s).showCardReal(!1)),T[t].currentBet>0&&(this.getPlayerHouse(s).setBet(T[t].currentBet),this.getPlayerHouse(s).addChips()),T[t].fold&&this.getPlayerHouse(s).showActionState("\xdaP"),T[t].hasAllIn&&this.getPlayerHouse(s).showActionState("ALL-IN")):(this.getPlayerHouse(s).showBtnInvite(!0),I[t].isViewer=!0)}for(let t=0;t<p.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).setDealer(!1),this.getPlayerHouse(t).setSmallBind(!1),this.getPlayerHouse(t).setBigBind(!1);-1!=this.findPlayerSeatByPos(u)&&this.getPlayerHouse(u).setDealer(!0);let N=this.findPlayerSeatByPos(g);-1!=N&&this.getPlayerHouse(N).setSmallBind(!0);let A=this.findPlayerSeatByPos(m);-1!=A&&this.getPlayerHouse(A).setBigBind(!0);let w=this.findPlayerSeatByPos(P);if(-1!=w&&(this.getPlayerHouse(w).showPlayCountdown(),this.startThinkingCountDown(w,R)),a>0){this.getPlayerHouse(0).showCardReady(!1);for(let t=0;t<2;t++){let e=h[t];this.getPlayerHouse(0).prepareToTransform(),this.getPlayerHouse(0).transformToCardReal(t,this.spriteCards[e])}if(l>0)if(3==l)this.showCenterCards1stRound(d);else if(4==l){let t=[d[0],d[1],d[2]],e=d[3];this.showCenterCards1stRound(t),this.showCenterCards2ndRound(e)}else 5==l&&this.showAllCenterCards(d)}this.resetHubChips()}break;case p.default.Code.DANG_KY_THOAT_PHONG:{cc.log("Poker DANG_KY_THOAT_PHONG"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedNotifyRegOutRoom(t);cc.log("Poker DANG_KY_THOAT_PHONG res : ",JSON.stringify(e));let i=e.outChair,s=e.isOutRoom,o=this.findPlayerSeatByPos(i);-1!==o&&this.getPlayerHouse(o).showNotify(s?"S\u1eafp r\u1eddi b\xe0n !":"H\u1ee7y r\u1eddi b\xe0n !")}break;case p.default.Code.NEW_USER_JOIN:{cc.log("Poker NEW_USER_JOIN"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedUserJoinRoom(t);cc.log("Poker NEW_USER_JOIN res : ",JSON.stringify(e));let i=e.info.nickName,s=e.info.avatar,a=e.info.money,r=e.uChair,c=e.uStatus;for(let t=0;t<I.length;t++)if(I[t].playerPos==r){var o=I[t].seatId;this.getPlayerHouse(o).resetPlayerInfo();var h={avatar:s,nickName:i,currentMoney:a};this.setupSeatPlayer(o,h),c==p.default.Code.PLAYER_STATUS_VIEWER?(this.getPlayerHouse(o).setIsViewer(!0),I[o].isViewer=!0,this.getPlayerHouse(o).playFxViewer()):(this.getPlayerHouse(o).setIsViewer(!1),I[o].isViewer=!1)}}break;case p.default.Code.LEAVE_GAME:{cc.log("Poker LEAVE_GAME"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedUserLeaveRoom(t);cc.log("Poker LEAVE_GAME res : ",JSON.stringify(e));let i=e.chair,s=this.findPlayerSeatByPos(i);if(-1!==s){for(let t=0;t<I.length;t++)I[t].seatId==s&&(I[t].playerId=-1,I[t].isViewer=!0);this.getPlayerHouse(s).resetPlayerInfo(),this.getPlayerHouse(s).showBtnInvite(!0),1==this.getNumPlayers().length&&(this.resetPlayersPlaying(),this.resetCenterCards(),this.matchPot.active=!1),0==s&&(this.UI_Playing.active=!1,this.UI_ChooseRoom.active=!0,d.default.getInstance().sendCheck(new p.default.ReqGetMoneyUse))}let o=e.message;cc.isValid(o)&&""!=o&&n.default.instance.alertDialog.showMsg(o)}break;case p.default.Code.GET_MONEY_USE:{let e=new p.default.ResGetMoneyUse(t);cc.log("-=-GET_MONEY_USE   ",e),r.default.Login.Coin=e.moneyUse,a.default.send(a.default.USER_UPDATE_COIN);break}case p.default.Code.TAKE_TURN:{cc.log("Poker TAKE_TURN"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedTakeTurn(t);cc.log("Poker TAKE_TURN res : ",JSON.stringify(e));let i=e.actionChair,s=e.action,o=e.lastRaise,a=e.currentBet,r=e.maxBet,c=e.currentMoney,h=e.raiseStep;e.raiseBlock,this.currentMaxBet=r,this.currentRaiseStep=h;let l=this.findPlayerSeatByPos(i),d=null;if(-1!=l){d=this.getPlayerHouse(l),0==l&&(this.currentMeBet=a,this.btnBet.active=!1);let t="";switch(s){case p.default.Code.GAME_ACTION_FOLD:t="FOLD",this.foldedNum++,d.fxMeFold();break;case p.default.Code.GAME_ACTION_CHECK:t="CHECK";break;case p.default.Code.GAME_ACTION_CALL:d.setBet(o),d.addChips(),t="CALL";break;case p.default.Code.GAME_ACTION_RAISE:t="RAISE",d.setBet(o),d.addChips();break;case p.default.Code.GAME_ACTION_ALL_IN:t="ALL-IN",d.setBet(o),d.addChips()}d.setGold(c),d.showActionState(t)}}break;case p.default.Code.SELECT_DEALER:{cc.log("Poker SELECT_DEALER"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedSelectDealer(t);cc.log("Poker SELECT_DEALER res : ",JSON.stringify(e));let i=e.dealerChair,s=e.smallBlindChair,o=e.bigBlindChair,a=(e.hasInfoSize,e.hasInfoList,e.playerStatusList),r=(e.gameId,e.isCheat,e.currentMoneySize,e.currentMoneyList);e.size,e.listBetBigBlind;for(let t=0;t<p.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).setDealer(!1),this.getPlayerHouse(t).setSmallBind(!1),this.getPlayerHouse(t).setBigBind(!1),this.getPlayerHouse(t).resetHubChip();let c=this.findPlayerSeatByPos(i);-1!=c&&this.getPlayerHouse(c).setDealer(!0);let h=this.findPlayerSeatByPos(s);if(-1!=h){0==h&&(this.currentMeBet=this.currentRoomBet);let t=this.getPlayerHouse(h);t.setSmallBind(!0),t.setBet(this.currentRoomBet),t.addChips()}let l=this.findPlayerSeatByPos(o);if(-1!=l){0==l&&(this.currentMeBet=2*this.currentRoomBet);let t=this.getPlayerHouse(l);t.setBigBind(!0),t.setBet(2*this.currentRoomBet),t.addChips()}this.currentMatchPotValue=0,this.matchPot.active=!0,this.setMatchPot(null,0,!0),this.currentMaxBet=2*this.currentRoomBet,this.currentRaiseStep=2*this.currentRoomBet,this.currentRaiseValue=this.currentMaxBet+this.currentRaiseStep;for(let t=0;t<a.length;t++)3==a[t]&&-1!=this.findPlayerSeatByPos(t)&&(this.currentMatchPotValue+=t==i?2*this.currentRoomBet:this.currentRoomBet);for(let t=0;t<r.length;t++){let e=this.findPlayerSeatByPos(t);if(-1==e)continue;let i=this.getPlayerHouse(e);r[t]>0&&i.setGold(r[t]),i.status_save=a[t],0==r[t]&&(I[e].isViewer=!0,I[e].isViewer=!0,i.setIsViewer(!0),-1!=I[e].playerId&&i.playFxViewer())}}break;case p.default.Code.BUY_IN:{cc.log("Poker BUY_IN"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedBuyIn(t);cc.log("Poker BUY_IN res : ",JSON.stringify(e));let i=e.chair,s=e.buyInMoney,o=this.findPlayerSeatByPos(i);-1!=o&&(0==o&&(this.closePopupBuyIn(),n.default.instance.showLoading(!1)),this.getPlayerHouse(o).setGold(s,!1))}break;case p.default.Code.DEAL_PRIVATE_CARD:{cc.log("Poker DEAL_PRIVATE_CARD"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedDealCards(t);cc.log("Poker DEAL_PRIVATE_CARD res : ",JSON.stringify(e)),e.chair,e.sizeCard;let i=e.myCards,s=e.boBaiId;this.btnBet.active=!1,this.btnOpenCard.active=!1,this.matchPot.active=!0,this.currentCard=i;var g=this.getNumPlayers();let o=g.length;for(let t=0;t<2*p.default.Code.MAX_PLAYER;t++)this.cardsDeal.children[t].active=!1,this.cardsDeal.children[t].position=cc.v3(0,0);for(let t=0;t<2;t++)for(let e=0;e<o;e++){let i=g[e];if(-1!==i){if(3!=this.getPlayerHouse(i).status_save)continue;let s=this.cardsDeal.children[t*o+e];s.active=!0;let n=this.groupPlayers.children[i].position;s.runAction(cc.sequence(cc.delayTime(.15*(t*o+e)),cc.moveTo(.2,cc.v2(n.x,n.y))))}}let a=1e3*(.4+.15*(1*o+(o-1)));this.unschedule(this.timeoutChiaBaiDone),this.timeoutChiaBaiDone=()=>{if(null==this.node||void 0===this.node)return;for(let e=0;e<2*p.default.Code.MAX_PLAYER;e++)this.cardsDeal.children[e].active=!1;for(let e=0;e<o;e++){let t=g[e];if(-1!==t){let e=this.getPlayerHouse(t);if(3!=e.status_save)continue;e.showCardReady(!0),e.showCardReal(!1)}}for(let e=0;e<2;e++){let t=i[e];this.getPlayerHouse(0).prepareToTransform(),this.getPlayerHouse(0).transformToCardReal(e,this.spriteCards[t])}let t=this.getCardsName(s);this.getPlayerHouse(0).showCardName(t)},this.scheduleOnce(this.timeoutChiaBaiDone,a/1e3)}break;case p.default.Code.NEW_ROUND:{cc.log("Poker NEW_ROUND"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedNewBetRound(t);cc.log("Poker NEW_ROUND res : ",JSON.stringify(e));let i=e.roundId,s=(e.sizeCard,e.plusCards),o=(e.cardName,e.potAmount);cc.isValid(o)&&(this.matchPot.active=!0,this.currentMatchPotValue=o),this.currentMeBet=0,this.foldedNum=0,this.currentMaxBet=0,this.currentRaiseStep=2*this.currentRoomBet,this.currentRaiseValue=this.currentMaxBet+this.currentRaiseStep;let a=0;for(let t=0;t<p.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t),I[t].isViewer||a++;let r=0;for(let t=0;t<p.default.Code.MAX_PLAYER;t++){let e=this.getPlayerHouse(t);I[t].isViewer||(++r>=a?this.setMatchPot(e,e.currentBetValue,!1,!0):this.setMatchPot(e,e.currentBetValue,!1,!1)),e.currentBetValue=0,e.resetHubChip(),e.resetAction()}if(!I[0].isViewer)switch(i){case 1:this.showCenterCards1stRound(s);break;case 2:this.showCenterCards2ndRound(s);break;case 3:this.showCenterCards3rdRound(s)}}break;case p.default.Code.CHANGE_TURN:{cc.log("Poker CHANGE_TURN"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedChangeTurn(t);cc.log("Poker CHANGE_TURN res : ",JSON.stringify(e)),e.roundId;let i=e.chair,s=e.betTime;e.potMoney,this.resetAllPlayerCountdown();let o=this.findPlayerSeatByPos(i);if(-1!=o&&(this.getPlayerHouse(o).showPlayCountdown(),this.startThinkingCountDown(o,s),0==o)){this.btnBet.active=!0,this.FxDealer.setAnimation(0,"noti",!0),this.btnOpenCard.active=!1,this.setupBet(),this.currentRaiseValue=this.currentMaxBet+this.currentRaiseStep;let t=this.getPlayerHouse(0).getGold(),e=this.currentRaiseValue-this.currentMeBet;this.sliderBet.initValue(e,this.currentRoomBet,t),this.resetBtnActions(),this.btnActions.parent.getChildByName("BG").active=!0,this.currentMaxBet==this.currentMeBet?(this.showBtnCall(!1),this.showBtnCheck(!0)):this.currentMaxBet-this.currentMeBet>=t?(this.showBtnRaise(!1),this.showBtnCall(!1),this.showBtnCheck(!1)):(this.showBtnCall(!0),this.showBtnCheck(!1)),this.currentRaiseValue-this.currentMeBet>=t&&this.showBtnRaise(!1)}}break;case p.default.Code.KET_THUC:{cc.log("Poker KET_THUC  ",t),n.default.instance.showLoading(!1);let e=new p.default.ReceivedEndGame(t);cc.log("Poker KET_THUC res : ",JSON.stringify(e));let i=e.potAmount,s=(e.rankSize,e.rankList),o=(e.kqttSize,e.kqttList),a=(e.booleanWinerSize,e.booleanWinerList),r=(e.moneyArraySize,e.currentMoney),c=(e.gameMoney,e.gameMoneySize,e.publicCardSize,e.publicCards),h=(e.hasInfoSize,e.hasInfoList,e.privateCardList),l=e.maxCardList,u=e.cardNameList;this.matchPot.active=!0,cc.isValid(i)&&(this.currentMatchPotValue=i),this.setMatchPot(null,0,!0),this.currentPrivateCardList=h;let g=[];for(let t=0;t<p.default.Code.MAX_PLAYER;t++)l[t].length>0&&g.push(t);this.showAllCenterCards(c);let m=this.currentCard,C=c,f=l[I[0].playerPos];if(f&&f.length>0){for(let t=0;t<m.length;t++)-1!==f.indexOf(m[t])?this.getPlayerHouse(0).setCardWin(t,!0):this.getPlayerHouse(0).setCardWin(t,!1);for(let t=0;t<C.length;t++){let e=f.indexOf(C[t]);this.cardsCenter.children[t].color=-1!==e?cc.Color.WHITE:cc.Color.GRAY}}for(let t=1;t<p.default.Code.MAX_PLAYER;t++){let e=h[I[t].playerPos];if(e.length>0&&this.foldedNum<s.filter(t=>0!=t).length-1)for(let i=0;i<e.length;i++){let s=e[i];this.getPlayerHouse(t).prepareToTransform(),this.getPlayerHouse(t).transformToCardReal(i,this.spriteCards[s])}}for(let t=0;t<g.length;t++){let e=this.getCardsName(u[g[t]]),i=this.findPlayerSeatByPos(g[t]);-1!=i&&this.foldedNum<s.filter(t=>0!=t).length-1&&this.getPlayerHouse(i).showCardName(e)}this.foldedNum=0,this.scheduleOnce(()=>{for(let t=0;t<p.default.Code.MAX_PLAYER;t++)if(1==a[t]){let e=this.findPlayerSeatByPos(t);if(-1!=e){let i=this.getPlayerHouse(e);i.fxWin({moneyChange:o[t],currentMoney:r[t]}),this.scheduleOnce(()=>{let t=this.matchPot.getChildByName("Icon");for(;t.childrenCount>0;){let e=t.children[0];e.parent=this.UI_Playing;let s=i.node.parent.convertToNodeSpaceAR(this.UI_Playing.convertToWorldSpaceAR(i.node.position));cc.tween(e).to(.5,{x:s.x,y:s.y}).delay(.2).call(()=>{this.removeChip(e)}).start()}i.resetHubChip()},2),0==e&&(this.getNumPlayers().length>2?this.btnOpenCard.active=!0:this.btnOpenCard.active=!1,this.btnBet.active=!1)}}else if(2==a[t]){if(-1!==g.indexOf(t)){let e=this.findPlayerSeatByPos(t),i=this.getPlayerHouse(e);i.fxDraw({moneyChange:o[t],currentMoney:r[t]}),this.scheduleOnce(()=>{let t=this.matchPot.getChildByName("Icon");for(;t.childrenCount>0;)this.removeChip(t.children[0]);for(let e=0;e<10;e++){let t=this.getChip();t.parent=this.UI_Playing,t.active=!0,t.x=this.matchPot.x,t.y=this.matchPot.y;let e=i.node.parent.convertToNodeSpaceAR(this.UI_Playing.convertToWorldSpaceAR(i.node.position));cc.tween(t).to(.5,{x:e.x,y:e.y}).delay(.2).call(()=>{this.removeChip(t)}).start()}i.resetHubChip()},2)}}else if(-1!==g.indexOf(t)){let e=this.findPlayerSeatByPos(t),i=this.getPlayerHouse(e);i.fxLose({moneyChange:o[t],currentMoney:r[t]}),i.resetHubChip()}this.scheduleOnce(()=>{this.matchPot.active=!1},2.5)},3),d.default.getInstance().sendCheck(new p.default.ReqGetMoneyUse)}break;case p.default.Code.UPDATE_MATCH:{cc.log("Poker UPDATE_MATCH"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedUpdateMatch(t);cc.log("Poker UPDATE_MATCH res : ",JSON.stringify(e)),e.chair,e.hasInfoSize;let i=e.hasInfoList,s=e.currentMoneyList,o=e.statusList;for(let t=0;t<p.default.Code.MAX_PLAYER;t++){let e=I[t].playerPos;1==i[e]?(this.getPlayerHouse(t).setGold(s[e]),o[e]==p.default.Code.PLAYER_STATUS_SITTING||o[e]==p.default.Code.PLAYER_STATUS_PLAYING?0==s[e]?(I[t].isViewer=!0,I[t].isViewer=!0,this.getPlayerHouse(t).setIsViewer(!0),-1!=I[t].playerId&&this.getPlayerHouse(t).playFxViewer()):(I[t].isViewer=!1,I[t].isViewer=!1,this.getPlayerHouse(t).setIsViewer(!1)):(I[t].isViewer=!0,I[t].isViewer=!0,this.getPlayerHouse(t).setIsViewer(!0),-1!=I[t].playerId&&this.getPlayerHouse(t).playFxViewer())):(I[t].playerId=-1,I[t].isViewer=!0)}}break;case p.default.Code.SHOW_CARD:{cc.log("Poker SHOW_CARD"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedShowCard(t);cc.log("Poker SHOW_CARD res : ",JSON.stringify(e));let i=e.chair,s=this.findPlayerSeatByPos(i);if(-1!=s){let t=this.currentPrivateCardList[i];if(t.length>0)for(let e=0;e<2;e++){let i=t[e];this.getPlayerHouse(s).prepareToTransform(),this.getPlayerHouse(s).transformToCardReal(e,this.spriteCards[i])}}}break;case p.default.Code.REQUEST_BUY_IN:r.default.Login.Coin>=this.currentRoomBet*this.roomMinBuyIn?this.showPopupBuyIn(this.roomMinBuyIn,this.roomMaxBuyIn,this.currentRoomBet):this.actionLeaveRoom();break;case p.default.Code.REQUEST_STAND_UP:{cc.log("Poker REQUEST_STAND_UP"),n.default.instance.showLoading(!1);let e=new p.default.ReceivedStandUp(t);cc.log("Poker REQUEST_STAND_UP res : ",JSON.stringify(e))}break;case p.default.Code.LOGIN:n.default.instance.showLoading(!1),this.refeshListRoom(),m.default.getInstance().send(new p.default.CmdReconnectRoom);break;case p.default.Code.TOPSERVER:n.default.instance.showLoading(!1),cc.log("Poker TOPSERVER");break;case p.default.Code.CMD_PINGPONG:n.default.instance.showLoading(!1),cc.log("Poker CMD_PINGPONG");break;case p.default.Code.CMD_JOIN_ROOM:n.default.instance.showLoading(!1),cc.log("Poker CMD_JOIN_ROOM");break;case p.default.Code.CMD_RECONNECT_ROOM:case p.default.Code.CMD_RECONNECT_ROOM:n.default.instance.showLoading(!1),cc.log("Poker CMD_RECONNECT_ROOM");break;case p.default.Code.MONEY_BET_CONFIG:{n.default.instance.showLoading(!1),cc.log("Poker MONEY_BET_CONFIG");let e=new l.default.ResMoneyBetConfig(t);cc.log(e),this.initRooms(e.list)}break;case p.default.Code.JOIN_ROOM_FAIL:{n.default.instance.showLoading(!1);let e=new p.default.ReceivedJoinRoomFail(t);cc.log("Poker JOIN_ROOM_FAIL res : ",JSON.stringify(e));let i="L\u1ed7i "+e.getError()+", kh\xf4ng x\xe1c \u0111\u1ecbnh.";switch(e.getError()){case 1:i="L\u1ed7i ki\u1ec3m tra th\xf4ng tin!";break;case 2:i="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 3:i="B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n v\xe0o ph\xf2ng ch\u01a1i n\xe0y!";break;case 4:i="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 5:i="M\u1ed7i l\u1ea7n v\xe0o ph\xf2ng ph\u1ea3i c\xe1ch nhau 10 gi\xe2y!";break;case 6:i="H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!";break;case 7:i="Kh\xf4ng t\xecm th\u1ea5y ph\xf2ng ch\u01a1i!";break;case 8:i="M\u1eadt kh\u1ea9u ph\xf2ng ch\u01a1i kh\xf4ng \u0111\xfang!";break;case 9:i="Ph\xf2ng ch\u01a1i \u0111\xe3 \u0111\u1ee7 ng\u01b0\u1eddi!";break;case 10:i="B\u1ea1n b\u1ecb ch\u1ee7 ph\xf2ng kh\xf4ng cho v\xe0o b\xe0n!"}n.default.instance.alertDialog.showMsg(i)}break;case p.default.Code.GET_LIST_ROOM:break;case p.default.Code.JOIN_GAME_ROOM_BY_ID:n.default.instance.showLoading(!1),cc.log("Poker JOIN_GAME_ROOM_BY_ID");break;case p.default.Code.TU_DONG_BAT_DAU:{n.default.instance.showLoading(!1);let e=new p.default.ReceivedAutoStart(t);cc.log("Poker ReceiveAutoStart res : ",JSON.stringify(e)),e.isAutoStart&&(this.resetCenterCards(),this.resetHubChips(),this.startWaittingCountDown(e.timeAutoStart),this.btnBet.active=!1,this.btnOpenCard.active=!1,this.FxDealer.setAnimation(0,"cho",!0),this.matchPot.active=!1,this.currentMatchPotValue=0,this.setMatchPot(null,0,!1),this.currentCard=[],this.currentCenterCard=[],this.currentPrivateCardList=[],this.currentMeBet=0,this.currentMaxBet=0,this.currentRaiseStep=0,this.currentRaiseValue=0,this.resetPlayersPlaying(),this.FxDealer.setAnimation(0,"cho",!0))}break;case p.default.Code.MOI_DAT_CUOC:{n.default.instance.showLoading(!1);let e=new p.default.ReceivedMoiDatCuoc(t);cc.log("Poker ReceivedMoiDatCuoc res : ",JSON.stringify(e)),this.startBettingCountDown(e.timeDatCuoc),this.matchPot.active=!0;let i=this.getPlayerHouse(0).getGold();this.sliderBet.initValue(this.currentRoomBet,this.currentRoomBet,i),this.currentMatchPotValue=0;for(let t=0;t<I.length;t++)t===this.seatOwner||I[t].isViewer||-1===I[t].playerId?(this.currentMatchPotValue+=2*this.currentRoomBet,this.setMatchPot(this.getPlayerHouse(t),2*this.currentRoomBet,!1)):(this.getPlayerHouse(t).setBet(this.currentRoomBet),this.getPlayerHouse(t).addChips(),this.currentMatchPotValue+=this.currentRoomBet,this.setMatchPot(this.getPlayerHouse(t),this.currentRoomBet,!1));0==this.seatOwner?(this.btnOpenCard.active=!1,this.btnBet.active=!1):(this.btnBet.active=!0,this.btnOpenCard.active=!1,this.setupBet()),this.numCardOpened=0}break;case p.default.Code.CHEAT_CARDS:n.default.instance.showLoading(!1),cc.log("Poker CHEAT_CARDS");break;case p.default.Code.DANG_KY_CHOI_TIEP:n.default.instance.showLoading(!1),cc.log("Poker DANG_KY_CHOI_TIEP  ",t);break;case p.default.Code.UPDATE_OWNER_ROOM:n.default.instance.showLoading(!1),cc.log("Poker UPDATE_OWNER_ROOM");break;case p.default.Code.NOTIFY_KICK_FROM_ROOM:{n.default.instance.showLoading(!1);let e=new p.default.ReceivedKickOff(t);cc.log("Poker ReceivedKickOff res : ",JSON.stringify(e)),this.onKickFromRoom(e.reason)}break;case p.default.Code.NOTIFY_USER_GET_JACKPOT:n.default.instance.showLoading(!1),cc.log("Poker NOTIFY_USER_GET_JACKPOT");break;case p.default.Code.CHAT_ROOM:{n.default.instance.showLoading(!1);let e=new p.default.ReceivedChatRoom(t);cc.log("Poker CHAT_ROOM res : ",JSON.stringify(e));let i=e.chair,s=e.isIcon,o=e.content;if(s){let t=this.findPlayerSeatByPos(i);-1!=t&&this.getPlayerHouse(t).showChatEmotion(o)}else{let t=this.findPlayerSeatByPos(i);-1!=t&&this.getPlayerHouse(t).showChatMsg(o)}}break;case p.default.Code.CARDS_DEFINE:{let e=new p.default.ReceivedCardsDefine(t);cc.log(e),this.setCardsDefine(JSON.parse(e.strData).object||[])}break;default:cc.log("--inpacket.getCmdId(): "+e.getCmdId())}},this)}initRooms(t){let e=[];this.contentListRooms.removeAllChildren();for(let s=0;s<t.length;s++){let i=t[s];-1==e.indexOf(i.moneyBet)&&i.moneyType==r.default.App.MONEY_TYPE&&e.push(i.moneyBet)}e.sort(function(t,e){return t-e});for(let s=0;s<e.length;s++){let o=0,a=0,c=0;for(let i=0;i<t.length;i++){let n=t[i];n.moneyBet==e[s]&&(o+=n.nPersion,a=n.maxUserPerRoom,c=n.moneyRequire)}var i=cc.instantiate(this.prefabItemRoom);i.getComponent("ItemRoom").initItem({id:s+1,moneyBet:e[s],requiredMoney:c,userCount:o,maxUserPerRoom:a}),i.getComponent("ItemRoom").labelNumPlayers.string=o,i.on(cc.Node.EventType.TOUCH_END,()=>{r.default.Login.Coin<c?n.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{n.default.instance.openShop(0)}):m.default.getInstance().send(new l.default.SendJoinRoom(r.default.App.MONEY_TYPE,a,e[s],0))}),i.y=-30;let h=.2*.7*(1===s?.8:1-Math.pow(2,-10*s));i.runAction(cc.sequence(cc.fadeOut(0),cc.delayTime(.105*(e.length-s)),cc.spawn(cc.fadeIn(h),cc.moveTo(h,cc.v2(0,-30-85*s)).easing(cc.easeCircleActionOut())))),i.parent=this.contentListRooms}this.contentListRooms.parent.parent.getComponent(cc.ScrollView).scrollToBottom(0),this.contentListRooms.parent.parent.getComponent(cc.ScrollView).scrollToTop(2)}actionLeaveRoom(){m.default.getInstance().send(new p.default.CmdSendRequestLeaveGame)}actionOpenCard(){m.default.getInstance().send(new p.default.SendShowCard),this.btnOpenCard.active=!1}actionAll_In(){this.btnBet.active=!1,m.default.getInstance().send(new p.default.SendTakeTurn(0,0,0,1,0))}actionRaise(){this.btnBet.active=!1;let t=this.getPlayerHouse(0).userGold.string.replace(/\./g,""),e=parseInt(t),i=Math.min(this.sliderBet.current_raise,e);m.default.getInstance().send(new p.default.SendTakeTurn(0,0,0,0,i))}actionCheck(){this.btnBet.active=!1,m.default.getInstance().send(new p.default.SendTakeTurn(0,1,0,0,0))}actionCall(){this.btnBet.active=!1,m.default.getInstance().send(new p.default.SendTakeTurn(0,0,1,0,0))}actionFold(){this.btnBet.active=!1,m.default.getInstance().send(new p.default.SendTakeTurn(1,0,0,0,0))}initConfigPlayer(){I=[];for(let t=0;t<p.default.Code.MAX_PLAYER;t++)I.push({seatId:t,playerId:-1,playerPos:-1,isViewer:!0})}resetCenterCards(){for(let t=0;t<5;t++)this.cardsCenter.children[t].position=cc.v3(0,100),this.cardsCenter.children[t].scale=0,this.cardsCenter.children[t].color=cc.Color.WHITE}resetPlayersPlaying(){for(let t=0;t<p.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).resetMatchHistory()}resetAllPlayerCountdown(){for(let t=0;t<p.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).hidePlayCountdown()}getCardsName(t){let e="";switch(t){case p.default.Code.EG_SANH_VUA:e="S\u1ea3nh Vua";break;case p.default.Code.EG_THUNG_PHA_SANH:e="Th\xf9ng Ph\xe1 S\u1ea3nh";break;case p.default.Code.EG_TU_QUY:e="T\u1ee9 Qu\xfd";break;case p.default.Code.EG_CU_LU:e="C\xf9 L\u0169";break;case p.default.Code.EG_THUNG:e="Th\xf9ng";break;case p.default.Code.EG_SANH:e="S\u1ea3nh";break;case p.default.Code.EG_XAM_CO:e="X\xe1m C\xf4";break;case p.default.Code.EG_HAI_DOI:e="Hai \u0110\xf4i";break;case p.default.Code.EG_DOI:e="\u0110\xf4i";break;case p.default.Code.EG_MAU_THAU:e="M\u1eadu Th\u1ea7u"}return e}setupSeatPlayer(t,e){I[t].playerId=e.nickName,this.getPlayerHouse(t).setAvatar(e.avatar),this.getPlayerHouse(t).setName(e.nickName),this.getPlayerHouse(t).setGold(e.currentMoney)}findPlayerSeatByUid(t){let e=-1;for(let i=0;i<I.length;i++)I[i].playerId===t&&(e=I[i].seatId);return e}findPlayerPosBySeat(t){return I[t].playerPos}findPlayerSeatByPos(t){if(-1==t)return-1;let e=-1;for(let i=0;i<I.length;i++)I[i].playerPos===t&&(e=I[i].seatId);return e}getPlayerHouse(t){return this.groupPlayers.children[t].getComponent(C.default)}getNumPlayers(){var t=[];for(let e=0;e<I.length;e++)-1===I[e].playerId||I[e].isViewer||t.push(I[e].seatId);return t}onKickFromRoom(t){let e="B\u1ea1n b\u1ecb kick kh\u1ecfi b\xe0n ch\u01a1i!";switch(t){case P.KickReasonCodes.ENUM.ERROR_MONEY:e="Ti\u1ec1n trong b\xe0n kh\xf4ng \u0111\u1ee7 \u0111\u1ec3 ti\u1ebfp t\u1ee5c!";break;case P.KickReasonCodes.ENUM.ERROR_BAO_TRI:e="H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!"}for(let i=0;i<I.length;i++)0==I[i].seatId&&(I[i].playerId=-1,I[i].isViewer=!0);this.getPlayerHouse(0).resetPlayerInfo(),this.getPlayerHouse(0).showBtnInvite(!0),1==this.getNumPlayers().length&&(this.resetPlayersPlaying(),this.matchPot.active=!1),this.UI_Playing.active=!1,this.UI_ChooseRoom.active=!0,d.default.getInstance().send(new p.default.ReqGetMoneyUse),this.refeshListRoom(),this.scheduleOnce(()=>{switch(t){case P.KickReasonCodes.ENUM.ERROR_MONEY:n.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{n.default.instance.openShop(0)});break;case P.KickReasonCodes.ENUM.ERROR_BAO_TRI:n.default.instance.alertDialog.showMsg("H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!");break;default:n.default.instance.alertDialog.showMsg("B\u1ea1n b\u1ecb kick kh\u1ecfi b\xe0n ch\u01a1i!")}},.5)}getCardsDefine(){m.default.getInstance().send(new p.default.SendCardsDefine)}setCardsDefine(t){this.cardsDefine=t,this.btnShowCardsDefine.node.active=!1}actShowCardsDefine(){y.default.createAndShow(n.default.instance.popups,this.cardsDefine,this.spriteCards)}actShowGuide(){v.default.createAndShow(this.UI_Playing)}getCurrentRoomBet(){return this.currentRoomBet}};T.instance=null,o([S(cc.Node)],T.prototype,"UI_ChooseRoom",void 0),o([S(cc.Label)],T.prototype,"labelNickName",void 0),o([S(cc.Label)],T.prototype,"labelCoin",void 0),o([S(cc.Sprite)],T.prototype,"avatar",void 0),o([S(cc.Node)],T.prototype,"contentListRooms",void 0),o([S(cc.Prefab)],T.prototype,"prefabItemRoom",void 0),o([S(cc.ScrollView)],T.prototype,"scrollListRoom",void 0),o([S(cc.EditBox)],T.prototype,"edtFindRoom",void 0),o([S(cc.Toggle)],T.prototype,"btnHideRoomFull",void 0),o([S(cc.Node)],T.prototype,"UI_Playing",void 0),o([S(cc.Node)],T.prototype,"meCards",void 0),o([S(cc.Node)],T.prototype,"groupPlayers",void 0),o([S(cc.SpriteFrame)],T.prototype,"spriteCards",void 0),o([S(cc.SpriteFrame)],T.prototype,"spriteCardBack",void 0),o([S(cc.Node)],T.prototype,"matchPot",void 0),o([S(cc.Label)],T.prototype,"labelMatchPot",void 0),o([S(cc.Node)],T.prototype,"cardsDeal",void 0),o([S(cc.Node)],T.prototype,"cardsCenter",void 0),o([S(cc.Node)],T.prototype,"btnBet",void 0),o([S(cc.Node)],T.prototype,"btnOpenCard",void 0),o([S(cc.Button)],T.prototype,"btnLeaveRoom",void 0),o([S(cc.Node)],T.prototype,"hubChips",void 0),o([S(cc.Label)],T.prototype,"labelRoomId",void 0),o([S(cc.Label)],T.prototype,"labelRoomBet",void 0),o([S(cc.Node)],T.prototype,"actionBetting",void 0),o([S(sp.Skeleton)],T.prototype,"FxDealer",void 0),o([S(cc.Node)],T.prototype,"btnBuyCashIn",void 0),o([S(cc.Node)],T.prototype,"btnActions",void 0),o([S(cc.Node)],T.prototype,"popupBuyIn",void 0),o([S(cc.Label)],T.prototype,"labelBuyInMin",void 0),o([S(cc.Label)],T.prototype,"labelBuyInMax",void 0),o([S(cc.EditBox)],T.prototype,"edtBuyIn",void 0),o([S(h.default)],T.prototype,"sliderBuyin",void 0),o([S(cc.Toggle)],T.prototype,"toggleAutoBuyIn",void 0),o([S(cc.Node)],T.prototype,"notifyTimeStart",void 0),o([S(cc.Node)],T.prototype,"notifyTimeEnd",void 0),o([S(cc.Node)],T.prototype,"notifyTimeBet",void 0),o([S(cc.Node)],T.prototype,"popupNodity",void 0),o([S(cc.Label)],T.prototype,"labelNotifyContent",void 0),o([S([cc.SpriteFrame])],T.prototype,"lsSfChip",void 0),o([S(cc.Prefab)],T.prototype,"prefabItemChip",void 0),o([S(h.default)],T.prototype,"sliderBet",void 0),o([S(cc.Button)],T.prototype,"btnShowCardsDefine",void 0),T=s=o([_],T),i.default=T,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Utils":void 0,"../../Main/Game/src/customui/CustomUI.SliderBet":void 0,"../../Main/Game/src/games/cardgames/PopupCardDefinations":void 0,"../../Main/Game/src/games/cardgames/PopupChatInGame":void 0,"../../Main/Game/src/networks/CardGame.Cmd":void 0,"../../Main/Game/src/networks/MiniGameNetworkClient":void 0,"../../Main/Game/src/networks/Network.Cmd":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"./Poker.CardUtil":"Poker.CardUtil","./Poker.Cmd":"Poker.Cmd","./Poker.Constant":"Poker.Constant","./Poker.NetworkClient":"Poker.NetworkClient","./Poker.Player":"Poker.Player","./Poker.PopupGuide":"Poker.PopupGuide"}],"Poker.ItemRoom":[function(t,e,i){"use strict";cc._RF.push(e,"506a91gVcBEUL5Aw1Hj1PE1","Poker.ItemRoom");var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,i,a):o(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});const o=t("./Poker.Controller"),n=t("../../Main/Game/src/common/Utils"),a=t("../../Main/Game/src/common/BroadcastReceiver"),{ccclass:r,property:c}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.labelBet=null,this.labelBetMin=null,this.labelNumPlayers=null,this.progressNumPlayers=null,this.roomInfo=null}start(){a.default.send(a.default.SET_SOUND,this.node)}initItem(t){this.roomInfo=t,this.labelBet.string=n.default.formatNumber(t.moneyBet),this.labelBetMin.string=n.default.formatNumber(t.requiredMoney),this.labelNumPlayers.string=t.userCount+"/"+t.maxUserPerRoom,this.progressNumPlayers.fillRange=t.userCount/t.maxUserPerRoom}chooseRoom(){o.default.instance.joinRoom(this.roomInfo)}};s([c(cc.Label)],h.prototype,"labelBet",void 0),s([c(cc.Label)],h.prototype,"labelBetMin",void 0),s([c(cc.Label)],h.prototype,"labelNumPlayers",void 0),s([c(cc.Sprite)],h.prototype,"progressNumPlayers",void 0),h=s([r],h),i.default=h,cc._RF.pop()},{"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Utils":void 0,"./Poker.Controller":"Poker.Controller"}],"Poker.NetworkClient":[function(t,e,i){"use strict";cc._RF.push(e,"dc696/vTfVLfYiNSjN3D0rT","Poker.NetworkClient"),Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../Main/Game/src/networks/Network.NetworkClient"),o=t("../../Main/Game/src/networks/Network.NetworkListener"),n=t("../../Main/Game/src/common/Configs");class a extends s.default{constructor(){super(),this.listeners=new Array,this.isUseWSS=n.default.App.USE_WSS}static getInstance(){return null==this.instance&&(this.instance=new a),this.instance}connect(){super.connect(n.default.App.HOST_POKER.host,n.default.App.HOST_POKER.port)}onOpen(t){super.onOpen(t)}onMessage(t){for(var e=new Uint8Array(t.data),i=0;i<this.listeners.length;i++){var s=this.listeners[i];s.target&&s.target instanceof Object&&s.target.node?s.callback(e):(this.listeners.splice(i,1),i--)}}addListener(t,e){this.listeners.push(new o.default(e,t))}send(t){for(var e=new Int8Array(t._length),i=0;i<t._length;i++)e[i]=t._data[i];null!=this.ws&&this.isConnected()&&this.ws.send(e.buffer)}}i.default=a,cc._RF.pop()},{"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/networks/Network.NetworkClient":void 0,"../../Main/Game/src/networks/Network.NetworkListener":void 0}],"Poker.Player":[function(t,e,i){"use strict";cc._RF.push(e,"3a80dskJA1MzZkQWeG+gkTZ","Poker.Player");var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,i,a):o(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../Main/Game/src/common/App"),n=t("../../Main/Game/src/common/BroadcastReceiver"),a=t("./Poker.Controller"),{ccclass:r,property:c}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.btnInvite=null,this.avatar=null,this.cardReady=null,this.cardReal=null,this.userName=null,this.userGold=null,this.dealer=null,this.smallBind=null,this.bigBind=null,this.owner=null,this.cardsName=null,this.actionState=null,this.actionAllIn=null,this.actionFold=null,this.actionViewer=null,this.actionThinking=null,this.actionWin=null,this.goldWin=null,this.actionDraw=null,this.goldDraw=null,this.actionLose=null,this.goldLose=null,this.hub=null,this.goldBet=null,this.prefabItemChip=null,this.notify=null,this.chatEmotion=null,this.chatMsg=null,this.shadowAvatar=null,this.shadowInfo=null,this.spriteCardBack=null,this.posCardOpened=null,this.timeoutNotify=null,this.timeoutShowCardName=null,this.timeoutChat=null,this.currentBetValue=0,this.status_save=1,this.isFolded=!1}onDestroy(){this.unschedule(this.timeoutNotify),this.unschedule(this.timeoutShowCardName),this.unschedule(this.timeoutChat)}start(){n.default.send(n.default.SET_SOUND,this.node)}updatePosCardOpened(t){this.posCardOpened=t}showChatEmotion(t){this.node.children[7].active=!0,this.chatEmotion.active=!0,this.chatMsg.active=!1,this.unschedule(this.timeoutChat),this.chatEmotion.getComponent(sp.Skeleton).setAnimation(0,t,!0),this.timeoutChat=()=>{null!=this.node&&void 0!==this.node&&(this.chatEmotion.active=!1,this.chatMsg.active=!1)},this.scheduleOnce(this.timeoutChat,3)}showChatMsg(t){this.node.children[7].active=!0,this.chatEmotion.active=!1,this.chatMsg.active=!0,this.unschedule(this.timeoutChat),this.chatMsg.children[1].getComponent(cc.Label).string=t,this.timeoutChat=()=>{null!=this.node&&void 0!==this.node&&(this.chatEmotion.active=!1,this.chatMsg.active=!1)},this.scheduleOnce(this.timeoutChat,3)}showBtnInvite(t){this.btnInvite.active=t}setOwner(t){this.owner.active=t}setDealer(t){this.dealer.active=t}setSmallBind(t){this.smallBind.active=t}setBigBind(t){this.bigBind.active=t}setAvatar(t){this.node.children[1].active=!0,this.avatar.getComponent(cc.Sprite).spriteFrame=o.default.instance.getAvatarSpriteFrame(t)}setIsViewer(t){this.node.children[5].active=!0,this.shadowAvatar.active=t,this.shadowInfo.active=t}setName(t){this.node.children[3].active=!0,this.userName.string=t}showCardReady(t){this.node.children[2].active=!0,this.cardReady.active=t}showCardReal(t){this.node.children[2].active=!0,this.cardReal.active=t}prepareToTransform(){this.prepareCardReal(0),this.prepareCardReal(1)}prepareCardReal(t){this.cardReal.children[t].runAction(cc.scaleTo(0,0,1))}transformToCardReal(t,e){this.isFolded||(this.showCardReal(!0),this.cardReal.children[t].children[0].getComponent(cc.Sprite).spriteFrame=e,this.cardReady.children[t].runAction(cc.sequence(cc.scaleTo(.15,0,1),cc.callFunc(()=>{}))),this.cardReal.children[t].runAction(cc.sequence(cc.delayTime(.15),cc.scaleTo(.15,1,1),cc.callFunc(()=>{}))))}showCardName(t){this.unschedule(this.timeoutShowCardName),this.isFolded?this.hideCardName():(this.cardsName.active=!0,this.cardsName.children[0].getComponent(cc.Label).string=t,this.timeoutShowCardName=()=>{null!=this.node&&void 0!==this.node&&(this.cardsName.active=!1)},this.scheduleOnce(this.timeoutShowCardName,4.5))}hideCardName(){this.cardsName.active=!1}setGold(t,e=!0){cc.isValid(t)&&(e&&(this.actionViewer.active=!1,this.actionThinking.active=!1),this.showGold(!0),this.userGold.string=this.formatGold(t))}getGold(){let t=this.userGold.string.replace(/\./g,"");return parseInt(t)}setBet(t){this.showPlayerBet(!0),this.currentBetValue+=t,this.goldBet.string=this.formatGold(this.currentBetValue)}resetHubChip(){for(this.showPlayerBet(!1);this.hub.childrenCount>0;)this.hub.children[0].active=!1,a.default.instance.removeChip(this.hub.children[0])}addChips(){let t=Math.floor(this.currentBetValue/a.default.instance.getCurrentRoomBet());for(let e=0;e<t;e++){let t=null;e<this.hub.childrenCount?t=this.hub.children[e]:(t=a.default.instance.getChip()).parent=this.hub,t.x=0,t.type=1,t.getComponent(cc.Sprite).spriteFrame=a.default.instance.lsSfChip[0],t.active=!0}this.calculatorPot(this.hub,1)}calculatorPot(t,e){if(e>a.default.instance.lsSfChip.length)return;let i=[];for(let s=0;s<t.childrenCount;s++)if(t.children[s].type==e&&i.push(t.children[s]),10==i.length){for(;i.length>1;)a.default.instance.removeChip(i[0]),i.shift();i[0].getComponent(cc.Sprite).spriteFrame=a.default.instance.lsSfChip[e],i[0].type=e+1,i=[],s=0}this.calculatorPot(t,e+1)}showPlayerBet(t){this.hub.parent.active=t}setCardReal01(t){this.cardReal.children[0].children[0].getComponent(cc.Sprite).spriteFrame=t}setCardReal02(t){this.cardReal.children[1].children[0].getComponent(cc.Sprite).spriteFrame=t}showPlayCountdown(){this.node.children[1].active=!0,this.actionThinking.active=!0,this.processThinking(0)}hidePlayCountdown(){this.actionThinking.active=!1}processThinking(t){this.actionThinking.getComponent(cc.Sprite).fillRange=t}showGold(t){}prepareFxAction(){this.showGold(!1),this.node.children[5].active=!0,this.resetAction()}showActionState(t){this.node.children[5].active=!0,this.actionState.active=!0,this.actionState.children[1].getComponent(cc.Label).string=t}playFxFold(){this.actionFold.active=!0,this.actionFold.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.05,1,1)))}playFxAllIn(){this.actionAllIn.active=!0,this.actionAllIn.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.05,1,1)))}playFxViewer(){this.prepareFxAction(),this.actionViewer.active=!0}fxOtherPlayerFold(){this.cardReady.runAction(cc.moveBy(.5,0,-100))}fxMeFold(){this.isFolded=!0,this.shadowCardReal(!0),this.cardReal.runAction(cc.moveBy(.5,0,-20))}showEatGa(t){this.actionWin.children[3].active=t}fxWin(t){this.node.children[5].active=!0,this.actionWin.active=!0,0==t.moneyChange?this.goldWin.node.parent.active=!1:(this.goldWin.node.parent.active=!0,this.goldWin.string="+"+this.formatGold(t.moneyChange)),this.setGold(t.currentMoney),cc.Tween.stopAllByTarget(this.actionWin),cc.Tween.stopAllByTarget(this.actionLose),cc.Tween.stopAllByTarget(this.actionDraw),cc.tween(this.actionWin).delay(4).call(()=>{null!=this.node&&void 0!==this.node&&(this.actionWin.active=!1,this.node.children[5].active=!1,this.currentBetValue=0)}).start(),this.effectZoomInZoomOut(this.actionWin)}fxDraw(t){this.node.children[5].active=!0,this.actionDraw.active=!0,0==t.moneyChange?this.goldDraw.node.parent.active=!1:(this.goldDraw.node.parent.active=!0,this.goldDraw.string=(t.moneyChange>0?"+":"")+this.formatGold(t.moneyChange)),this.setGold(t.currentMoney),cc.Tween.stopAllByTarget(this.actionWin),cc.Tween.stopAllByTarget(this.actionLose),cc.Tween.stopAllByTarget(this.actionDraw),cc.tween(this.actionDraw).delay(4).call(()=>{null!=this.node&&void 0!==this.node&&(this.actionDraw.active=!1,this.node.children[5].active=!1,this.currentBetValue=0)}).start(),this.effectZoomInZoomOut(this.actionDraw)}fxLose(t){this.node.children[5].active=!0,0==t.moneyChange?this.goldLose.node.parent.active=!1:(this.goldLose.node.parent.active=!0,this.goldLose.string=(t.moneyChange>0?"+":"")+this.formatGold(t.moneyChange)),this.setGold(t.currentMoney),cc.Tween.stopAllByTarget(this.actionWin),cc.Tween.stopAllByTarget(this.actionLose),cc.Tween.stopAllByTarget(this.actionDraw),cc.tween(this.actionLose).delay(4).call(()=>{null!=this.node&&void 0!==this.node&&(this.actionLose.active=!1,this.node.children[5].active=!1,this.currentBetValue=0)}).start(),this.effectZoomInZoomOut(this.actionLose)}effectZoomInZoomOut(t){cc.tween(t).set({scale:.4}).repeat(20,cc.tween().to(.2,{scale:.5}).to(.2,{scale:.4})).start()}shadowCardReady(t){this.cardReady.children[0].color=t?cc.Color.GRAY:cc.Color.WHITE,this.cardReady.children[1].color=t?cc.Color.GRAY:cc.Color.WHITE}shadowCardReal(t){this.cardReal.children[0].children[0].color=t?cc.Color.GRAY:cc.Color.WHITE,this.cardReal.children[1].children[0].color=t?cc.Color.GRAY:cc.Color.WHITE}shadowEachCardReal(t,e){this.cardReal.children[t].children[0].color=e?cc.Color.GRAY:cc.Color.WHITE}setCardWin(t,e){this.cardReal.children[t].children[0].color=e?cc.Color.WHITE:cc.Color.GRAY}showNotify(t){this.notify.active=!0,this.notify.children[1].getComponent(cc.Label).string=t,this.unschedule(this.timeoutNotify),this.timeoutNotify=()=>{null!=this.node&&void 0!==this.node&&(this.notify.active=!1)},this.scheduleOnce(this.timeoutNotify,1.5)}resetAction(){this.isFolded=!1;for(let t=0;t<this.node.children[5].childrenCount;t++)this.node.children[5].children[t].active=!1}resetMatchHistory(){this.isFolded=!1,this.resetCardReady(),this.resetCardReal(),this.node.children[2].active=!1,this.showGold(!0),this.cardsName.active=!1,this.setDealer(!1),this.setBigBind(!1),this.setSmallBind(!1),this.resetAction(),this.node.children[5].active=!1,this.goldBet.string="0",this.currentBetValue=0,this.hub.removeAllChildren(!0)}resetCardReady(){this.cardReady.children[0].scale=1,this.cardReady.children[1].scale=1,this.cardReady.active=!1}resetCardReal(){this.cardReal.active=!1,this.cardReal.y=0,this.cardReal.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReal.children[1].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.shadowCardReal(!1)}resetPlayerInfo(){for(let t=0;t<this.node.childrenCount;t++)this.node.children[t].active=!1;this.cardReal.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReal.children[1].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReady.active=!1,this.cardReal.active=!1,this.setDealer(!1),this.setBigBind(!1),this.setSmallBind(!1),this.cardsName.active=!1,this.isFolded=!1,this.actionViewer.active=!1,this.actionThinking.active=!1,this.actionWin.active=!1,this.actionLose.active=!1,this.goldBet.string="0",this.hub.removeAllChildren(!0),this.setIsViewer(!0)}fxGoldChange(t,e,i){var s=e-t;i.getComponent(cc.Label).string=this.formatGold(t);var o=Math.floor(s/10),n=cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(()=>{t+=o,i.getComponent(cc.Label).string=(s>0?"+":"")+this.formatGold(t)})),10),a=cc.sequence(n,cc.callFunc(()=>{t=e,i.getComponent(cc.Label).string=(s>0?"+":"")+this.formatGold(t)}));i.runAction(a)}formatGold(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}};s([c(cc.Node)],h.prototype,"btnInvite",void 0),s([c(cc.Node)],h.prototype,"avatar",void 0),s([c(cc.Node)],h.prototype,"cardReady",void 0),s([c(cc.Node)],h.prototype,"cardReal",void 0),s([c(cc.Label)],h.prototype,"userName",void 0),s([c(cc.Label)],h.prototype,"userGold",void 0),s([c(cc.Node)],h.prototype,"dealer",void 0),s([c(cc.Node)],h.prototype,"smallBind",void 0),s([c(cc.Node)],h.prototype,"bigBind",void 0),s([c(cc.Node)],h.prototype,"owner",void 0),s([c(cc.Node)],h.prototype,"cardsName",void 0),s([c(cc.Node)],h.prototype,"actionState",void 0),s([c(cc.Node)],h.prototype,"actionAllIn",void 0),s([c(cc.Node)],h.prototype,"actionFold",void 0),s([c(cc.Node)],h.prototype,"actionViewer",void 0),s([c(cc.Node)],h.prototype,"actionThinking",void 0),s([c(cc.Node)],h.prototype,"actionWin",void 0),s([c(cc.Label)],h.prototype,"goldWin",void 0),s([c(cc.Node)],h.prototype,"actionDraw",void 0),s([c(cc.Label)],h.prototype,"goldDraw",void 0),s([c(cc.Node)],h.prototype,"actionLose",void 0),s([c(cc.Label)],h.prototype,"goldLose",void 0),s([c(cc.Node)],h.prototype,"hub",void 0),s([c(cc.Label)],h.prototype,"goldBet",void 0),s([c(cc.Prefab)],h.prototype,"prefabItemChip",void 0),s([c(cc.Node)],h.prototype,"notify",void 0),s([c(cc.Node)],h.prototype,"chatEmotion",void 0),s([c(cc.Node)],h.prototype,"chatMsg",void 0),s([c(cc.Node)],h.prototype,"shadowAvatar",void 0),s([c(cc.Node)],h.prototype,"shadowInfo",void 0),s([c(cc.SpriteFrame)],h.prototype,"spriteCardBack",void 0),h=s([r],h),i.default=h,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"./Poker.Controller":"Poker.Controller"}],"Poker.PopupGuide":[function(t,e,i){"use strict";cc._RF.push(e,"9f4d0AcQ/1Oj7fcJ3J0SDQd","Poker.PopupGuide");var s,o=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,i,a):o(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../Main/Game/src/common/App"),a=t("../../Main/Game/src/common/Configs"),r=t("../../Main/Game/src/common/Dialog"),{ccclass:c,property:h}=cc._decorator;let l=s=class extends r.default{constructor(){super(...arguments),this.scrollPopupGuide=null}static createAndShow(t){null==this.instance||null==this.instance.node?n.default.instance.loadPrefabInBundle(a.default.App.BUNDLE_NAME.POKER,a.default.App.UPDATE_INFO[a.default.App.BUNDLE_NAME.POKER],!0,"res/prefabs/PokerPopupGuide",(e,i)=>{if(null!=e)return void n.default.instance.alertDialog.showMsg(e);let o=cc.instantiate(i);o.parent=t,this.instance=o.getComponent(s),this.instance.show()}):this.instance.show()}show(){let t=this.scrollPopupGuide.content.getComponentsInChildren(cc.Label);t[0].string="LU\u1eacT CH\u01a0I B\u1ed8 B\xc0I:",t[1].string="\u2022 Poker d\xf9ng b\u1ed9 b\xe0i 52 l\xe1, l\xe1 \xe1t(A) c\xf3 gi\xe1 tr\u1ecb l\u1edbn nh\u1ea5t, l\xe1 2 c\xf3 gi\xe1 tr\u1ecb th\u1ea5p nh\u1ea5t. Tuy nhi\xean l\xe1 \xe1t(A) c\xf3 th\u1ec3 s\u1eed d\u1ee5ng nh\u01b0 1 l\xe1 b\xe0i th\u1ea5p nh\u1ea5t \u0111\u1ec3 t\u1ea1o th\xe0nh s\u1ea3nh A,2,3,4,5\n\u2022 Gi\xe1 tr\u1ecb nh\u1eefng l\xe1 b\xe0i theo th\u1ee9 t\u1ef1 t\u1eeb nh\u1ecf \u0111\u1ebfn l\u1edbn l\xe0:\n2 < 3 < 4 < 5 < 6 < 7 < 8 < 9 < 10 < J < Q < K < A\n\u2022 B\u1eaft \u0111\u1ea7u m\u1ed7i v\xe1n b\xe0i, ng\u01b0\u1eddi ch\u01a1i s\u1ebd \u0111\u01b0\u1ee3c chia 2 l\xe1 b\xe0i (B\xe0i T\u1ea9y)\n\u2022 Sau \u0111\xf3 l\u1ea7n l\u01b0\u1ee3t 5 l\xe1 b\xe0i ti\u1ebfp theo s\u1ebd \u0111\u01b0\u1ee3c chia l\xe0m ba \u0111\u1ee3t v\xe0 hi\u1ec3n th\u1ecb tr\xean b\xe0n, 5 l\xe1 n\xe0y \u0111\u1ec1u \u0111\u01b0\u1ee3c m\u1edf ra v\xe0 m\u1ecdi ng\u01b0\u1eddi \u0111\u1ec1u c\xf3 th\u1ec3 th\u1ea5y n\xf3, v\xe0 ch\xfang \u0111\u01b0\u1ee3c g\u1ecdi l\xe0 B\xe0i Chung\n\u2022 \u0110\u1ee3t chia B\xe0i Chung \u0111\u1ea7u ti\xean s\u1ebd l\xe0 3 l\xe1, \u0111\u1ee3t th\u1ee9 2 v\xe0 \u0111\u1ee3t chia cu\u1ed1i c\xf9ng, m\u1ed7i \u0111\u1ee3t l\xe0 1 l\xe1. V\xe0 qua m\u1ed7i \u0111\u1ee3t \u0111\xf3, ng\u01b0\u1eddi ch\u01a1i s\u1ebd c\xf3 quy\u1ec1n \u0111\u1eb7t c\u01b0\u1ee3c, nh\u01b0 v\u1eady t\xednh c\u1ea3 v\xf2ng \u0111\u1ea7u ti\xean khi ch\u1ec9 m\u1edbi c\xf3 2 l\xe1 b\xe0i, l\xe0 t\u1ed5ng c\u1ed9ng s\u1ebd c\xf3 4 v\xf2ng c\u01b0\u1ee3c cho nh\u1eefng ng\u01b0\u1eddi ch\u01a1i.\n",t[2].string="C\xc1C K\xdd HI\u1ec6U TRONG POKER:",t[3].string="\u2022 Dealer(D) s\u1ebd lu\xe2n phi\xean thay \u0111\u1ed5i theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3 trong nh\u1eefng v\xe1n ti\u1ebfp theo.\n\u2022 Small Blind(SB) ng\u01b0\u1eddi ng\u1ed3i ngay b\xean tr\xe1i Dealer (theo chi\u1ec1u kim \u0111\u1ed3ng h\u1ed3).\n\u2022 Big Blind(BB) ng\u01b0\u1eddi ng\u1ed3i k\u1ebf b\xean tr\xe1i SB.\n\u2022 Sau m\u1ed7i v\xe1n ch\u01a1i ng\u01b0\u1eddi SB v\xe0 BB s\u1ebd thay \u0111\u1ed5i theo ng\u01b0\u1eddi Dealer. Tr\u01b0\u1edbc khi chia 2 l\xe1 b\xe0i \u0111\u1ea7u ti\xean, s\u1ebd c\xf3 2 ng\u01b0\u1eddi b\u1eaft bu\u1ed9c ph\u1ea1t \u0111\u1eb7t c\u01b0\u1ee3c tr\u01b0\u1edbc ti\xean l\xe0 Small Blind v\xe0 Big Blind.\n\u2022 Ng\u01b0\u1eddi \u0111\u1ea7u ti\xean c\u01b0\u1ee3c 1/10 T\u1ea9y g\u1ecdi l\xe0 Small Blind, ng\u01b0\u1eddi th\u1ee9 hai c\u01b0\u1ee3c 2/10 T\u1ea9y (c\u01b0\u1ee3c g\u1ea5p \u0111\xf4i ng\u01b0\u1eddi \u0111\u1ea7u ti\xean) g\u1ecdi l\xe0 Big Blind.\n\u2022 POT l\xe0 t\u1ea5t c\u1ea3 ti\u1ec1n c\u01b0\u1ee3c sau m\u1ed7i v\xf2ng c\u01b0\u1ee3c \u0111\u01b0\u1ee3c gom chung l\xe0 m\u1ed9t ch\u1ed7.\n",t[4].string="T\xcdNH TI\u1ec0N:",t[5].string="\u2022 Ng\u01b0\u1eddi ch\u01a1i s\u1edf h\u1eefu t\u1ed5 h\u1ee3p b\xe0i m\u1ea1nh nh\u1ea5t (k\u1ebft h\u1ee3p t\u1eeb b\xe0i t\u1ea9y v\xe0 b\xe0i chung tr\xean b\xe0n) s\u1ebd l\xe0 ng\u01b0\u1eddi chi\u1ebfn th\u1eafng.\n\u2022 V\xe1n b\xe0i c\u0169ng c\xf3 th\u1ec3 k\u1ebft th\xfac b\u1ea5t c\u1ee9 l\xfac n\xe0o, khi c\xf3 ng\u01b0\u1eddi T\u1ed1 v\xe0 t\u1ea5t c\u1ea3 ng\u01b0\u1eddi kh\xe1c \u0111\u1ec1u b\u1ecf b\xe0i kh\xf4ng theo khi \u0111\xf3 ng\u01b0\u1eddi T\u1ed1 l\xe0 ng\u01b0\u1eddi th\u1eafng.\n\u2022 M\u1ed9t v\xf2ng c\u01b0\u1ee3c ch\u1ec9 k\u1ebft th\xfac khi ti\u1ec1n c\u01b0\u1ee3c c\u1ee7a t\u1ea5t c\u1ea3 m\u1ecdi ng\u01b0\u1eddi \u0111\u1ec1u ngang b\u1eb1ng nhau v\xe0 kh\xf4ng ai T\u1ed1 ti\u1ebfp.\n\u2022 Ng\u01b0\u1eddi chi\u1ebfn th\u1eafng s\u1ebd \u0103n to\xe0n b\u1ed9 ti\u1ec1n c\u01b0\u1ee3c c\u1ee7a m\u1ecdi ng\u01b0\u1eddi (POT).\n\u2022 Tr\u01b0\u1eddng h\u1ee3p b\u1ea1n \u0111\xe3 c\u01b0\u1ee3c h\u1ebft ti\u1ec1n tr\u01b0\u1edbc m\u1ecdi ng\u01b0\u1eddi (All-in) th\xec ch\u1ec9 c\xf3 th\u1ec3 \u0103n \u0111\u01b0\u1ee3c s\u1ed1 ti\u1ec1n trong Pot t\xednh \u0111\u1ebfn th\u1eddi \u0111i\u1ec3m T\u1ea5t tay.\n",t[6].string="L\u1ef0A CH\u1eccN C\u1ee6A NG\u01af\u1edcI CH\u01a0I \u1ede M\u1ed6I V\xd2NG C\u01af\u1ee2C:",t[7].string="\u2022 \xdap B\xe0i (Fold): B\u1ecf b\xe0i \u1edf v\xe1n \u0111\xf3 v\xe0 ch\u1edd v\xe1n b\xe0i m\u1edbi.\n\u2022 T\u1ed1 (Raise): Ng\u01b0\u1eddi ch\u01a1i mu\u1ed1n c\u01b0\u1ee3c th\xeam.\n\u2022 T\u1ed1 T\u1ea5t (All-in): Khi ng\u01b0\u1eddi ch\u01a1i c\u01b0\u1ee3c hay T\u1ed1 to\xe0n b\u1ed9 s\u1ed1 ti\u1ec1n m\xecnh \u0111ang c\xf3 th\xec g\u1ecdi l\xe0 T\u1ed1 t\u1ea5t hay T\u1ea5t tay.\n\u2022 Theo (Call): B\u1ecf ra m\u1ed9t s\u1ed1 ti\u1ec1n b\u1eb1ng ng\u01b0\u1eddi ch\u01a1i tr\u01b0\u1edbc \u0111\xe3 c\u01b0\u1ee3c.\n\u2022 Xem (Check): Khi ch\u01b0a c\xf3 ai c\u01b0\u1ee3c, ng\u01b0\u1eddi ch\u01a1i kh\xf4ng mu\u1ed1n c\u01b0\u1ee3c v\xe0 ch\u1edd xem h\xe0nh \u0111\u1ed9ng c\u1ee7a ng\u01b0\u1eddi k\u1ebf ti\u1ebfp.\n",super.show(),this.scrollPopupGuide.scrollToTop(0)}};l.instance=null,o([h(cc.ScrollView)],l.prototype,"scrollPopupGuide",void 0),l=s=o([c],l),i.default=l,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Dialog":void 0}]},{},["Poker.CardUtil","Poker.Cmd","Poker.Constant","Poker.Controller","Poker.ItemRoom","Poker.NetworkClient","Poker.Player","Poker.PopupGuide"]);