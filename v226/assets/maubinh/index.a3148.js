window.__require=function t(e,i,a){function s(r,o){if(!i[r]){if(!e[r]){var h=r.split("/");if(h=h[h.length-1],!e[h]){var c="function"==typeof __require&&__require;if(!o&&c)return c(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+r+"'")}r=h}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){return s(e[r][1][t]||t)},l,l.exports,t,e,i,a)}return i[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<a.length;r++)s(a[r]);return s}({"MauBinh.CardDrag":[function(t,e,i){"use strict";cc._RF.push(e,"70de1cLqrVNCJ9ZBG20j79M","MauBinh.CardDrag");var a=this&&this.__decorate||function(t,e,i,a){var s,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=t("./MauBinh.InGame"),{ccclass:n,property:r}=cc._decorator;let o=class extends cc.Component{constructor(){super(...arguments),this.imgCard=null,this.imgFocus=null,this.imgShadow=null,this.cardDTO=null}resetState(){this.setCardFocus(!1),this.setCardShadow(!1)}setTextureWithCardData(t){this.cardDTO=t,this.imgCard.spriteFrame=s.default.getInstance().getCardFrame(t.id)}setCardShadow(t){this.imgShadow.active=t}setCardFocus(t){this.imgFocus.active=t}getCardDTO(){return this.cardDTO}};a([r(cc.Sprite)],o.prototype,"imgCard",void 0),a([r(cc.Node)],o.prototype,"imgFocus",void 0),a([r(cc.Node)],o.prototype,"imgShadow",void 0),o=a([n],o),i.default=o,cc._RF.pop()},{"./MauBinh.InGame":"MauBinh.InGame"}],"MauBinh.CardUtil":[function(t,e,i){"use strict";cc._RF.push(e,"d5f92nEHMdNj4gHuhmCMctb","MauBinh.CardUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.common=void 0;const{ccclass:a,property:s}=cc._decorator;var n;(function(t){t.CardUtils=class{static getCardInfo(t){this.id=t,this.so=this.getSoById(t),this.chat=this.getChatById(t),this.diem=this.getDiemById(t)}static getSoById(t){return Math.floor(t/4)}static getDiemById(t){return Math.floor(t/4)+1}static getChatById(t){return t%4}static getNormalId(t){return t}static getNumber(t){return Math.floor(t/4)+2}}})(n=i.common||(i.common={})),i.default=n.CardUtils,cc._RF.pop()},{}],"MauBinh.Cmd":[function(t,e,i){"use strict";cc._RF.push(e,"73889UV1D1OeI4ehXzc0OG9","MauBinh.Cmd"),Object.defineProperty(i,"__esModule",{value:!0}),i.MauBinhCmd=void 0;const a=t("../../Main/Game/src/networks/Network.OutPacket"),s=t("../../Main/Game/src/networks/Network.InPacket"),n=t("../../Main/Game/src/common/Configs"),r=t("./MauBinh.Constant"),o=t("./MauBinh.InGame"),h=t("../../Main/Game/src/common/Constants");var c;(function(t){class e{}e.LOGIN=1,e.TOP_SERVER=1001,e.PINGPONG=1050,e.JOIN_ROOM=3001,e.RECONNECT_ROOM=3002,e.MONEY_BET_CONFIG=3003,e.JOIN_ROOM_FAIL=3004,e.CHAT_ROOM=3008,e.CREATE_ROOM=3013,e.GET_LIST_ROOM=3014,e.JOIN_GAME_ROOM_BY_ID=3015,e.BINH_SO_CHI=3101,e.BAT_DAU=3102,e.KET_THUC=3103,e.AUTO_BINH_SO_CHI=3104,e.CHIA_BAI=3105,e.BAO_BINH=3106,e.AUTO_START=3107,e.XEP_LAI=3108,e.DAT_CUOC=3109,e.THONG_TIN_BAN_CHOI=3110,e.DANG_KY_THOAT_PHONG=3111,e.VAO_GA=3112,e.DOI_CHUONG=3113,e.MOI_DAT_CUOC=3114,e.CHEAT_CARDS=3115,e.DANG_KY_CHOI_TIEP=3116,e.UPDATE_OWNER_ROOM=3117,e.JOIN_ROOM_SUCCESS=3118,e.LEAVE_GAME=3119,e.NOTIFY_KICK_FROM_ROOM=3120,e.USER_JOIN_ROOM=3121,e.NOTIFY_USER_GET_JACKPOT=3122,e.UPDATE_MATCH=3123,e.CARDS_DEFINE=3999,t.Code=e;class i{}t.MauBinhPlayerInfo=i,t.SendLogin=class extends a.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.LOGIN),this.packHeader(),this.putString(t),this.putString(i),this.updateSize()}},t.SendJoinRoom=class extends a.default{constructor(t,i,a,s){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.JOIN_ROOM),this.packHeader(),this.putInt(t),this.putInt(i),this.putLong(a),this.putInt(s),this.updateSize()}},t.SendReconnectRoom=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.RECONNECT_ROOM),this.packHeader(),this.updateSize()}},t.SendRequestLeaveGame=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.DANG_KY_THOAT_PHONG),this.packHeader(),this.updateSize()}},t.SendHoldRoom=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.DANG_KY_CHOI_TIEP),this.packHeader(),this.updateSize()}},t.SendMoneyBetConfig=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.MONEY_BET_CONFIG),this.packHeader(),this.updateSize()}},t.SendGetTopServer=class extends a.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.TOP_SERVER),this.packHeader(),this.putByte(t),this.updateSize()}},t.SendCreateRoom=class extends a.default{constructor(t,i,a,s,n,r,o,h){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CREATE_ROOM),this.packHeader(),this.putInt(t),this.putInt(i),this.putLong(a),this.putInt(s),this.putInt(n),this.putString(r),this.putString(o),this.putLong(h),this.updateSize()}},t.SendCheatCards=class extends a.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CHEAT_CARDS),this.packHeader(),this.putByte(t),this.putByteArray(i),this.updateSize()}},t.SendPing=class extends a.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.PINGPONG),this.packHeader(),this.updateSize()}},t.SendGetListRoom=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.GET_LIST_ROOM),this.packHeader(),this.putInt(n.default.App.MONEY_TYPE),this.putInt(r.default.MAX_PLAYER),this.putLong(-1),this.putInt(0),this.putInt(0),this.putInt(50),this.updateSize()}},t.SendJoinRoomById=class extends a.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.JOIN_GAME_ROOM_BY_ID),this.packHeader(),this.putInt(t),this.putString(""),this.updateSize()}},t.SendChatRoom=class extends a.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CHAT_ROOM),this.packHeader(),this.putByte(t?1:0),this.putString(encodeURI(i)),this.updateSize()}},t.SendBinhSoChi=class extends a.default{constructor(t,i,a){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.BINH_SO_CHI),this.packHeader(),this.putShort(t.length);for(var s=0;s<t.length;s++)this.putByte(t[s]);for(this.putShort(i.length),s=0;s<i.length;s++)this.putByte(i[s]);for(this.putShort(a.length),s=0;s<a.length;s++)this.putByte(a[s]);this.updateSize()}},t.SendBaoBinh=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.BAO_BINH),this.packHeader(),this.updateSize()}},t.SendAutoBinhSoChi=class extends a.default{constructor(t,i,a){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.AUTO_BINH_SO_CHI),this.packHeader(),this.putShort(t.length);for(var s=0;s<t.length;s++)this.putByte(t[s]);for(this.putShort(i.length),s=0;s<i.length;s++)this.putByte(i[s]);for(this.putShort(a.length),s=0;s<a.length;s++)this.putByte(a[s]);this.updateSize()}},t.SendXepLai=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.XEP_LAI),this.packHeader(),this.updateSize()}},t.SendCardsDefine=class extends a.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CARDS_DEFINE),this.packHeader(),this.updateSize()}},t.ReceivedLogin=class extends s.default{constructor(t){super(t)}},t.ReceivedMoneyBetConfig=class extends s.default{constructor(t){super(t),this.list=[],this.rules=[];let e=this.getShort();for(var i=0;i<e;i++){var a={maxUserPerRoom:this.getInt(),moneyType:this.getByte(),moneyBet:this.getLong(),moneyRequire:this.getLong(),nPersion:this.getInt()};this.list.push(a)}for(i=0;i<e;i++)this.rules.push(this.getByte())}},t.ReceivedGetListRoom=class extends s.default{constructor(t){super(t),this.list=[];let e=this.getShort();this.list=[];for(var i=0;i<e;i++){let t={};t.id=this.getInt(),t.userCount=this.getByte(),t.limitPlayer=this.getByte(),t.maxUserPerRoom=this.getInt(),t.moneyType=this.getByte(),t.moneyBet=this.getInt(),t.requiredMoney=this.getInt(),t.rule=this.getByte(),t.nameRoom=this.getString(),t.key=this.getBool(),t.quyban=this.getLong(),this.list.push(t)}}},t.ReceivedJoinRoomSucceed=class extends s.default{constructor(t){let e;for(super(t),this.myChair=this.getByte(),this.moneyBet=this.getLong(),this.roomId=this.getInt(),this.matchId=this.getInt(),this.moneyType=this.getByte(),this.rule=this.getByte(),this.playerSize=this.getShort(),this.playerStatus=[],e=0;e<this.playerSize;e++)this.playerStatus.push(this.getByte());for(this.playerSize=this.getShort(),this.playerInfos=[],e=0;e<this.playerSize;e++){let t=new i;t.nickName=this.getString(),t.avatar=this.getString(),t.money=this.getLong(),this.playerInfos.push(t)}this.gameState=r.GameState.toEnum(this.getByte()),this.gameAction=this.getByte(),this.countDownTime=this.getByte()}},t.ReceivedAutoStart=class extends s.default{constructor(t){super(t),this.isAutoStart=this.getBool(),this.timeAutoStart=this.getByte()}},t.ReceivedChiaBai=class extends s.default{constructor(t){super(t);var e=this.getShort();this.cardList=[];for(var i=0;i<e;i++)this.cardList.push(o.MauBinhCardDTO.fromCardId(this.getByte()));this.mauBinh=r.CardTypes.toEnum(this.getByte()),this.matchId=this.getInt(),this.countdown=this.getByte(),this.handRanking=this.getInt()}},t.ReceivedUserLeaveRoom=class extends s.default{constructor(t){super(t),this.actions=[],this.chair=this.getByte(),this.nickName=this.getString(),this.reqQuitRoomReason=this.getString();let e=this.getString();if(e){let t=JSON.parse(e);t.hasOwnProperty("object")&&Array.isArray(t.object)&&(this.actions=h.UserActions.toEnums(t.object))}}},t.ReceivedUserJoinRoom=class extends s.default{constructor(t){super(t),this.info=new i,this.info.nickName=this.getString(),this.info.avatar=this.getString(),this.info.money=this.getLong(),this.myChair=this.getByte(),this.uStatus=this.getByte()}},t.ReceivedUpdateMatch=class extends s.default{constructor(t){super(t),this.myChair=this.getByte();var e=this.getShort();this.hasInfo=[];for(var a=0;a<e;a++)this.hasInfo.push(this.getBool());for(this.infos=[],a=0;a<e;a++){var s=new i;this.hasInfo[a]&&(s.nickName=this.getString(),s.avatar=this.getString(),s.money=this.getLong(),s.playerStatus=this.getInt()),this.infos.push(s)}}},t.ReceivedNotifyRegOutRoom=class extends s.default{constructor(t){super(t),this.outChair=this.getByte(),this.isOutRoom=this.getBool(),this.reqQuitRoomReason=this.getString(),this.listSuggestionActions=this.getString()}},t.ReceivedKickOff=class extends s.default{constructor(t){super(t),this.reason=this.getByte()}},t.ReceivedMoiDatCuoc=class extends s.default{constructor(t){super(t),this.timeDatCuoc=this.getByte()}},t.ReceivedMoBai=class extends s.default{constructor(t){super(t),this.chairMoBai=this.getByte(),this.cardSize=this.getShort(),this.cards=[];for(var e=0;e<this.cardSize;e++)this.cards.push(this.getByte())}},t.ReceivedEndGame=class extends s.default{constructor(t){super(t),this.playerResultList=[];for(var e=this.getShort(),i=0;i<e;i++){const t=this.getByte(),e=this.getInt();let i=this.getShort(),s=[];for(var a=0;a<i;a++)s.push(o.MauBinhCardDTO.fromCardId(this.getByte()));i=this.getShort();let n=[];for(a=0;a<i;a++)n.push(o.MauBinhCardDTO.fromCardId(this.getByte()));i=this.getShort();let h=[];for(a=0;a<i;a++)h.push(o.MauBinhCardDTO.fromCardId(this.getByte()));let c=[];for(i=this.getShort(),a=0;a<i;a++)c.push(this.getLong());const l=this.getLong(),d=this.getLong(),u=this.getLong(),g=this.getLong();let m={chairIndex:t,maubinhType:r.CardTypes.toEnum(e),chi1:s,chi2:n,chi3:h,moneyInChi:c,moneyAt:l,moneyCommon:d,moneySap:u,currentMoney:g};this.playerResultList.push(m)}this.timeEndGame=this.getByte()}},t.ReceivedDoiChuong=class extends s.default{constructor(t){super(t),this.chuongChair=this.getByte()}},t.ReceivedChatRoom=class extends s.default{constructor(t){super(t),this.chair=this.getByte(),this.isIcon=this.getBool(),this.content=decodeURI(this.getString()),this.nickname=this.getString()}},t.ReceivedGameInfo=class extends s.default{constructor(t){super(t),this.myChair=this.getByte(),this.gameState=r.GameState.toEnum(this.getByte()),this.gameAction=this.getByte(),this.countdownTime=this.getByte(),this.moneyBet=this.getLong(),this.moneyType=this.getByte(),this.matchId=this.getInt(),this.roomId=this.getInt(),this.rule=this.getByte();var e=this.getShort();this.hasInfo=[];for(var a=0;a<e;a++)this.hasInfo[a]=this.getBool();for(this.players=[],a=0;a<r.default.MAX_PLAYER;a++)if(this.hasInfo[a]){if(this.players[a]=new i,this.gameState==r.GameState.ENUM.STATE_PLAYING){if(a==this.myChair){e=this.getShort(),this.players[a].cardList=[];for(var s=0;s<e;s++)this.players[a].cardList.push(o.MauBinhCardDTO.fromCardId(this.getByte()))}}else if(this.gameState==r.GameState.ENUM.STATE_END){for(e=this.getShort(),this.players[a].cardList=[],s=0;s<e;s++)this.players[a].cardList.push(o.MauBinhCardDTO.fromCardId(this.getByte()));this.players[a].maubinhType=this.getByte(),this.players[a].moneyCommon=this.getLong()}this.players[a].sochi=this.getBool(),this.players[a].playerStatus=this.getByte(),this.players[a].avatar=this.getString(),this.players[a].userId=this.getInt(),this.players[a].nickName=this.getString(),this.players[a].money=this.getLong()}}},t.ReceivedTopServer=class extends s.default{constructor(t){super(t),this.rankType=this.getByte(),this.topDay_money=this.getString(),this.topWeek_money=this.getString(),this.topMonth_money=this.getString(),this.topDay_number=this.getString(),this.topWeek_number=this.getString(),this.topMonth_number=this.getString()}},t.ReceivedJoinRoomFail=class extends s.default{constructor(t){super(t)}},t.ReceivedMauBinhConfig=class extends s.default{constructor(t){super(t),this.listSize=this.getShort(),this.list=[];for(var e=0;e<this.listSize;e++){var i={};i.maxUserPerRoom=this.getByte(),i.moneyType=this.getByte(),i.moneyBet=this.getLong(),i.moneyRequire=this.getLong(),i.nPersion=this.getInt(),this.list.push(i)}}},t.ReceivedBinhSoChi=class extends s.default{constructor(t){super(t),this.chair=this.getByte()}},t.ReceivedXepLai=class extends s.default{constructor(t){super(t),this.chair=this.getByte()}},t.ReceivedCardDefinations=class extends s.default{constructor(t){super(t),this.strData=this.getString()}}})(c=i.MauBinhCmd||(i.MauBinhCmd={})),i.default=c,cc._RF.pop()},{"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Constants":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"../../Main/Game/src/networks/Network.OutPacket":void 0,"./MauBinh.Constant":"MauBinh.Constant","./MauBinh.InGame":"MauBinh.InGame"}],"MauBinh.Constant":[function(t,e,i){"use strict";var a;cc._RF.push(e,"11d27cn9DtLKqmIMe/ffelU","MauBinh.Constant"),Object.defineProperty(i,"__esModule",{value:!0}),i.MauBinhConstant=i.KickReasonCodes=i.CardSuites=i.CardColors=i.CardKindLevels=i.GroupKinds=i.CardTypes=i.PlayerState=i.GameState=void 0,function(t){let e;(function(t){t[t.STATE_NO_START=0]="STATE_NO_START",t[t.STATE_PLAYING=1]="STATE_PLAYING",t[t.STATE_END=2]="STATE_END"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.GameState||(i.GameState={})),function(t){let e;(function(t){t[t.PLAYER_STATUS_OUT_GAME=0]="PLAYER_STATUS_OUT_GAME",t[t.PLAYER_STATUS_VIEWER=1]="PLAYER_STATUS_VIEWER",t[t.PLAYER_STATUS_SITTING=2]="PLAYER_STATUS_SITTING",t[t.PLAYER_STATUS_PLAYING=3]="PLAYER_STATUS_PLAYING"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.PlayerState||(i.PlayerState={})),function(t){let e;(function(t){t[t.TYPE_RONG_CUON=-2]="TYPE_RONG_CUON",t[t.TYPE_NAM_DOI_MOT_SAM=-1]="TYPE_NAM_DOI_MOT_SAM",t[t.TYPE_SANH_RONG=0]="TYPE_SANH_RONG",t[t.TYPE_MUOI_BA_CAY_DONG_MAU=1]="TYPE_MUOI_BA_CAY_DONG_MAU",t[t.TYPE_MUOI_HAI_CAY_DONG_MAU=2]="TYPE_MUOI_HAI_CAY_DONG_MAU",t[t.TYPE_BA_CAI_THUNG=3]="TYPE_BA_CAI_THUNG",t[t.TYPE_BA_CAI_SANH=4]="TYPE_BA_CAI_SANH",t[t.TYPE_LUC_PHE_BON=5]="TYPE_LUC_PHE_BON",t[t.TYPE_BINH_THUONG=6]="TYPE_BINH_THUONG",t[t.TYPE_BINH_LUNG=7]="TYPE_BINH_LUNG"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]},t.getBinhName=function(e){switch(e){case t.ENUM.TYPE_RONG_CUON:return"S\u1ea3nh R\u1ed3ng Cu\u1ed1n";case t.ENUM.TYPE_NAM_DOI_MOT_SAM:return"N\u0103m \u0110\xf4i M\u1ed9t S\xe1m";case t.ENUM.TYPE_SANH_RONG:return"S\u1ea3nh R\u1ed3ng";case t.ENUM.TYPE_MUOI_BA_CAY_DONG_MAU:return"M\u01b0\u1eddi Ba C\xe2y \u0110\u1ed3ng M\xe0u";case t.ENUM.TYPE_MUOI_HAI_CAY_DONG_MAU:return"M\u01b0\u1eddi Hai C\xe2y \u0110\u1ed3ng M\xe0u";case t.ENUM.TYPE_BA_CAI_THUNG:return"Ba C\xe1i Th\xf9ng";case t.ENUM.TYPE_BA_CAI_SANH:return"Ba C\xe1i S\u1ea3nh";case t.ENUM.TYPE_LUC_PHE_BON:return"L\u1ee5c Ph\u1ebf B\xf4n";case t.ENUM.TYPE_BINH_THUONG:return"Binh Th\u01b0\u1eddng";case t.ENUM.TYPE_BINH_LUNG:return"Binh L\u1ee7ng";default:return""}},t.getBinhMultiple=function(e){switch(e){case t.ENUM.TYPE_RONG_CUON:return 72;case t.ENUM.TYPE_NAM_DOI_MOT_SAM:return 24;case t.ENUM.TYPE_SANH_RONG:return 72;case t.ENUM.TYPE_MUOI_BA_CAY_DONG_MAU:return 30;case t.ENUM.TYPE_MUOI_HAI_CAY_DONG_MAU:return 24;case t.ENUM.TYPE_BA_CAI_THUNG:case t.ENUM.TYPE_BA_CAI_SANH:case t.ENUM.TYPE_LUC_PHE_BON:return 18;case t.ENUM.TYPE_BINH_THUONG:case t.ENUM.TYPE_BINH_LUNG:default:return 1}}}(i.CardTypes||(i.CardTypes={})),function(t){let e;(function(t){t[t.GROUP_THUNG_PHA_SANH=0]="GROUP_THUNG_PHA_SANH",t[t.GROUP_TU_QUY=1]="GROUP_TU_QUY",t[t.GROUP_CU_LU=2]="GROUP_CU_LU",t[t.GROUP_THUNG=3]="GROUP_THUNG",t[t.GROUP_SANH=4]="GROUP_SANH",t[t.GROUP_SAM_CO=5]="GROUP_SAM_CO",t[t.GROUP_THU=6]="GROUP_THU",t[t.GROUP_MOT_DOI=7]="GROUP_MOT_DOI",t[t.GROUP_MAU_THAU=8]="GROUP_MAU_THAU"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.GroupKinds||(i.GroupKinds={})),function(t){let e;(function(t){t[t.LV_THUONG=0]="LV_THUONG",t[t.LV_HA=1]="LV_HA",t[t.LV_BINH_THUONG=2]="LV_BINH_THUONG"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.CardKindLevels||(i.CardKindLevels={})),function(t){let e;(function(t){t[t.BLACK=0]="BLACK",t[t.RED=1]="RED"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.CardColors||(i.CardColors={})),function(t){let e;(function(t){t[t.SPADE=0]="SPADE",t[t.CLUB=1]="CLUB",t[t.DIAMOND=2]="DIAMOND",t[t.HEART=3]="HEART"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.CardSuites||(i.CardSuites={})),function(t){let e;(function(t){t[t.ERROR_MONEY=1]="ERROR_MONEY",t[t.ERROR_BAO_TRI=2]="ERROR_BAO_TRI"})(e=t.ENUM||(t.ENUM={})),t.toEnum=function(t){return e[e[t]]}}(i.KickReasonCodes||(i.KickReasonCodes={})),function(t){t.MAX_PLAYER=4}(a=i.MauBinhConstant||(i.MauBinhConstant={})),i.default=a,cc._RF.pop()},{}],"MauBinh.DetectGroupCards":[function(t,e,i){"use strict";cc._RF.push(e,"f9b67tXcw5LPJl58XvdhaB8","MauBinh.DetectGroupCards"),Object.defineProperty(i,"__esModule",{value:!0}),i.DetectGroupCards=void 0;const a=t("./MauBinh.Constant");class s{constructor(){this.groupKind=-1,this.cardList=[],this.valueList=[]}getGroupCardsInfo(){return this.groupKind=this.getGroupKind(),this.groupKind}getGroupKind(){if(1==this.cardList.length)return a.GroupKinds.ENUM.GROUP_MAU_THAU;if(3==this.cardList.length){if(this.isSamCo())return a.GroupKinds.ENUM.GROUP_SAM_CO;if(this.isMotDoi())return a.GroupKinds.ENUM.GROUP_MOT_DOI}if(5==this.cardList.length){if(this.isThungPhaSanh())return a.GroupKinds.ENUM.GROUP_THUNG_PHA_SANH;if(this.isTuQuy())return a.GroupKinds.ENUM.GROUP_TU_QUY;if(this.isCuLu())return a.GroupKinds.ENUM.GROUP_CU_LU;if(this.isThung())return a.GroupKinds.ENUM.GROUP_THUNG;if(this.isSanh())return a.GroupKinds.ENUM.GROUP_SANH;if(this.isSamCo())return a.GroupKinds.ENUM.GROUP_SAM_CO;if(this.isThu())return a.GroupKinds.ENUM.GROUP_THU;if(this.isMotDoi())return a.GroupKinds.ENUM.GROUP_MOT_DOI}this.valueList=[];for(var t=this.getSortedCardList(),e=this.cardList.length-1;0<=e;e--)this.valueList.push(t[e].number);return a.GroupKinds.ENUM.GROUP_MAU_THAU}getGroupKindLevel(t){var e=a.CardKindLevels.ENUM.LV_BINH_THUONG;return!t||this.groupKind!=a.GroupKinds.ENUM.GROUP_THUNG_PHA_SANH&&this.groupKind!=a.GroupKinds.ENUM.GROUP_SANH||(10==this.valueList[0]?e=a.CardKindLevels.ENUM.LV_THUONG:14==this.valueList[0]&&(e=a.CardKindLevels.ENUM.LV_HA)),e}getSortedCardList(){var t=[];for(let e=0;e<this.cardList.length;e++)t.push(this.cardList[e]);return t.sort(function(t,e){return t.id-e.id})}sortCardList(t){t?this.cardList.sort(function(t,e){return e.id-t.id}):this.cardList.sort(function(t,e){return t.id-e.id})}isThungPhaSanh(){if(5!=this.cardList.length)return!1;for(var t=this.getSortedCardList(),e=1,i=1;i<this.cardList.length;i++)t[i].suit==t[i-1].suit&&(t[i].number==t[i-1].number+1||2==t[0].number&&14==t[i].number)&&e++;return e==this.cardList.length&&(this.valueList=[],2==t[0].number&&14==t[t.length-1].number?this.valueList.push(1):this.valueList.push(t[0].number)),e==this.cardList.length}isTuQuy(){if(5!=this.cardList.length)return!1;for(var t=0;t<this.cardList.length;t++)for(var e=1,i=0;i<this.cardList.length;i++)if(t!=i&&this.cardList[t].number==this.cardList[i].number&&e++,4==e)return this.valueList=[],this.valueList.push(this.cardList[t].number),!0;return!1}isCuLu(){if(5!=this.cardList.length)return!1;var t=this.getSortedCardList(),e=!1;return t[0].number==t[1].number&&(t[1].number==t[2].number&&t[3].number==t[4].number&&(e=!0,this.valueList=[],this.valueList.push(t[0].number),this.valueList.push(t[3].number)),t[2].number==t[3].number&&t[3].number==t[4].number&&(e=!0,this.valueList=[],this.valueList.push(t[2].number),this.valueList.push(t[0].number))),e}isThung(){var t=this.getSortedCardList();if(5!=this.cardList.length)return!1;for(var e=1;e<this.cardList.length;e++)if(t[e].suit!=t[0].suit)return!1;for(this.valueList=[],e=this.cardList.length-1;0<=e;e--)this.valueList.push(t[e].number);return!0}isSanh(){if(5!=this.cardList.length)return!1;for(var t=this.getSortedCardList(),e=1,i=1;i<this.cardList.length;i++)(t[i].number==t[i-1].number+1||2==t[0].number&&14==t[i].number&&4==e)&&e++;return e==this.cardList.length&&(this.valueList=[],2==t[0].number&&14==t[t.length-1].number?this.valueList.push(1):this.valueList.push(t[0].number)),e==this.cardList.length}isSamCo(){for(var t=0;t<this.cardList.length;t++){for(var e=1,i=0;i<this.cardList.length;i++)t!=i&&this.cardList[t].number==this.cardList[i].number&&e++;if(3==e)return this.valueList=[],this.valueList.push(this.cardList[t].number),!0}return!1}isThu(){if(5!=this.cardList.length)return!1;for(var t=[],e=0;e<this.cardList.length-1;e++)if(-1==t.indexOf(this.cardList[e].number))for(var i=e+1;i<this.cardList.length;i++)if(this.cardList[e].number==this.cardList[i].number){t.push(this.cardList[e].number);break}if(2==t.length){for(this.valueList=[],this.valueList.push(Math.max(t[0],t[1])),this.valueList.push(Math.min(t[0],t[1])),e=0;e<this.cardList.length;e++)-1==t.indexOf(this.cardList[e].number)&&this.valueList.push(this.cardList[e].number);return!0}return!1}isMotDoi(){for(var t=[],e=0;e<this.cardList.length-1;e++)for(let i=e+1;i<this.cardList.length;i++)this.cardList[e].number==this.cardList[i].number&&t.push(this.cardList[e].number);if(1==t.length){this.valueList=[],this.valueList.push(t[0]);let i=this.getSortedCardList();for(e=this.cardList.length-1;0<=e;e--)i[e].number!=t[0]&&this.valueList.push(i[e].number);return!0}return!1}addCard(t){this.cardList.push(t)}}i.DetectGroupCards=s,i.default=s,cc._RF.pop()},{"./MauBinh.Constant":"MauBinh.Constant"}],"MauBinh.DetectPlayerCards":[function(t,e,i){"use strict";cc._RF.push(e,"0895cqkOZ1FQ6FEXmsgpXkF","MauBinh.DetectPlayerCards"),Object.defineProperty(i,"__esModule",{value:!0}),i.DetectPlayerCards=void 0;const a=t("./MauBinh.DetectGroupCards"),s=t("./MauBinh.Constant");class n{constructor(){this.maubinhType=s.CardTypes.ENUM.TYPE_BINH_THUONG,this.chiDau=new a.default,this.chiGiua=new a.default,this.chiCuoi=new a.default}initCard(t){for(var e=10;e<13;e++)this.chiCuoi.addCard(t[e-10]);for(e=5;e<10;e++)this.chiGiua.addCard(t[e-2]);for(e=0;e<5;e++)this.chiDau.addCard(t[e+8])}getPlayerCardsInfo(t){let e=this.chiDau.getGroupCardsInfo(),i=this.chiGiua.getGroupCardsInfo(),a=this.chiCuoi.getGroupCardsInfo();return this.isSanhRong()?this.maubinhType=s.CardTypes.ENUM.TYPE_SANH_RONG:t&&this.isMuoiBaCayDongMau()?this.maubinhType=s.CardTypes.ENUM.TYPE_MUOI_BA_CAY_DONG_MAU:t&&this.isMuoiHaiCayDongMau()?this.maubinhType=s.CardTypes.ENUM.TYPE_MUOI_HAI_CAY_DONG_MAU:this.isBaCaiThung()?this.maubinhType=s.CardTypes.ENUM.TYPE_BA_CAI_THUNG:this.isBaCaiSanh()?this.maubinhType=s.CardTypes.ENUM.TYPE_BA_CAI_SANH:this.isLucPheBon()?this.maubinhType=s.CardTypes.ENUM.TYPE_LUC_PHE_BON:this.isBinhLung(t)?this.maubinhType=s.CardTypes.ENUM.TYPE_BINH_LUNG:this.maubinhType=s.CardTypes.ENUM.TYPE_BINH_THUONG,{cardType:this.maubinhType,chiDau:e,chiGiua:i,chiCuoi:a}}addCardToChiDau(t){this.chiDau.addCard(t)}addCardToChiGiua(t){this.chiGiua.addCard(t)}addCardToChiCuoi(t){this.chiCuoi.addCard(t)}getChi(t){switch(t){case 1:return this.chiDau;case 2:return this.chiGiua;case 3:return this.chiCuoi}}getGroupCardContainsIndex(t){return 0<=t&&5>t?this.chiDau:10>t?this.chiGiua:13>t?this.chiCuoi:null}getAllCards(){return[].concat(this.chiDau.cardList).concat(this.chiGiua.cardList).concat(this.chiCuoi.cardList)}swapCard(t,e){var i=t.id;t.id=e.id,e.id=i}isSanhRong(){for(var t=this.getSortedCardListFromList(this.getAllCards()),e=0,i=1,a=0;a<t.length;a++)i++,t[a].number==i&&e++;return 13==e}isMuoiBaCayDongMau(){const t=this.getAllCards().filter(t=>t.getColor()===s.CardColors.ENUM.BLACK).length;return 13===t||0===t}isMuoiHaiCayDongMau(){const t=this.getAllCards().filter(t=>t.getColor()===s.CardColors.ENUM.BLACK).length;return 12===t||1===t}isBaCaiThung(){if(!(this.chiDau.groupKind!=s.GroupKinds.ENUM.GROUP_THUNG_PHA_SANH&&this.chiDau.groupKind!=s.GroupKinds.ENUM.GROUP_THUNG||this.chiGiua.groupKind!=s.GroupKinds.ENUM.GROUP_THUNG_PHA_SANH&&this.chiGiua.groupKind!=s.GroupKinds.ENUM.GROUP_THUNG)){var t=this.chiCuoi.cardList;if(t[0].suit==t[1].suit&&t[1].suit==t[2].suit)return!0}return!1}isBaCaiSanh(){if(!(this.chiDau.groupKind!=s.GroupKinds.ENUM.GROUP_THUNG_PHA_SANH&&this.chiDau.groupKind!=s.GroupKinds.ENUM.GROUP_SANH||this.chiGiua.groupKind!=s.GroupKinds.ENUM.GROUP_THUNG_PHA_SANH&&this.chiGiua.groupKind!=s.GroupKinds.ENUM.GROUP_SANH)){var t=this.getSortedCardListFromList(this.chiCuoi.cardList);if(t[0].number+1==t[1].number&&t[1].number+1==t[2].number||2==t[0].number&&3==t[1].number&&14==t[2].number)return!0}return!1}haveSauDoi(){for(var t=this.getSortedCardListFromList(this.getAllCards()),e=0,i=0;i<t.length;)i+1<t.length&&t[i+1].number==t[i].number&&(e++,i++),i++;return 6==e}isLucPheBon(){return!(!this.haveSauDoi()||this.chiDau.groupKind!=s.GroupKinds.ENUM.GROUP_THU||this.chiGiua.groupKind!=s.GroupKinds.ENUM.GROUP_THU||this.chiCuoi.groupKind!=s.GroupKinds.ENUM.GROUP_MOT_DOI)}haveNamDoi(){for(var t=this.getSortedCardListFromList(this.getAllCards()),e=0,i=0;i<t.length;)i+1<t.length&&t[i+1].number==t[i].number&&(e++,i++),i++;return 5==e}isNamDoiMotSam(){return this.haveNamDoi()&&this.chiDau.groupKind==s.GroupKinds.ENUM.GROUP_CU_LU}isBinhLung(t){return 0>this.compareChi(this.chiDau,this.chiGiua,t)||0>this.compareChi(this.chiGiua,this.chiCuoi,t)}getSortedCardListFromList(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);for(i=0;i<e.length-1;i++)for(t=i+1;t<e.length;t++)if(e[i].id>e[t].id){var a=e[i];e[i]=e[t],e[t]=a}return e}compareChi(t,e,i){if(t.groupKind>e.groupKind)return-1;if(t.groupKind<e.groupKind)return 1;if(i){var a=t.getGroupKindLevel(i);if(a>(i=e.getGroupKindLevel(i)))return-1;if(a<i)return 1}for(a=0;a<t.valueList.length;a++){if(t.valueList[a]>e.valueList[a])return 1;if(t.valueList[a]<e.valueList[a])return-1}return 0}}i.DetectPlayerCards=n,i.default=n,cc._RF.pop()},{"./MauBinh.Constant":"MauBinh.Constant","./MauBinh.DetectGroupCards":"MauBinh.DetectGroupCards"}],"MauBinh.HandleDragAndDrop":[function(t,e,i){"use strict";cc._RF.push(e,"527c6M/1FdBBopLOj0FmcIK","MauBinh.HandleDragAndDrop");var a=this&&this.__decorate||function(t,e,i,a){var s,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=t("./MauBinh.InGame"),n=t("./MauBinh.CardDrag");const{ccclass:r,property:o}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.nodeCardPrefab=null,this.currentCard=[],this.cardSelect=null,this.isPlaying=!1}setListCard(t){for(let e=0;e<t.length;e++){let i=null;e<this.currentCard.length?i=this.currentCard[e]:((i=cc.instantiate(this.nodeCardPrefab).getComponent(n.default)).node.parent=this.node,this.currentCard.push(i)),i.node.active=!0,i.setTextureWithCardData(t[e])}this.resetAllCard(),this.sortPosition(!0,()=>{s.default.getInstance().checkUpdateCard()})}resetAllCard(){this.currentCard.forEach(t=>t.resetState())}sortPosition(t=!0,e=null){let i=[[this.currentCard[0],this.currentCard[1],this.currentCard[2]],[this.currentCard[3],this.currentCard[4],this.currentCard[5],this.currentCard[6],this.currentCard[7]],[this.currentCard[8],this.currentCard[9],this.currentCard[10],this.currentCard[11],this.currentCard[12]]],a=t?10:5,s=t?.75:.5;for(let n=0;n<i.length;n++){let t=i[n];for(let r=0;r<t.length;r++){let o=t[r];o.node.zIndex=r;let h=(r-Math.floor(.5*t.length)+(t.length%2==0?.5:0))*(o.node.width+a)*s-100,c=cc.winSize.height/1280*-350+(1-n)*(o.node.height+a)*s;cc.Tween.stopAllByTarget(o.node),n>=i.length-1&&r>=t.length-1&&e?cc.tween(o.node).to(.2,{x:h,y:c,scale:s}).call(e).start():cc.tween(o.node).to(.2,{x:h,y:c,scale:s}).start()}}}actionSwapChi(){this.swapObject(3,8),this.swapObject(4,9),this.swapObject(5,10),this.swapObject(6,11),this.swapObject(7,12),this.sortPosition()}swapObject(t,e){let i=this.currentCard[t];this.currentCard[t]=this.currentCard[e],this.currentCard[e]=i}getListCard(){return this.currentCard.map(t=>t.getCardDTO())}onTouch(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}offTouch(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchStart(t){let e=this.node.convertToNodeSpaceAR(t.getLocation());for(let i=this.currentCard.length-1;i>=0;i--){let t=this.currentCard[i];if(t.node.getBoundingBox().contains(e))return this.cardSelect=t,void this.cardSelect.setCardFocus(!0)}}onTouchMove(t){if(null==this.cardSelect)return;this.cardSelect.node.zIndex=cc.macro.MAX_ZINDEX;let e=this.node.convertToNodeSpaceAR(t.getLocation());for(let i=this.currentCard.length-1;i>=0;i--){let t=this.currentCard[i];t!=this.cardSelect&&(t.node.getBoundingBox().contains(e)?t.setCardFocus(!0):t.setCardFocus(!1))}this.cardSelect.node.position=e}onTouchEnd(t){if(null==this.cardSelect)return;let e=this.node.convertToNodeSpaceAR(t.getLocation());for(let i=this.currentCard.length-1;i>=0;i--){let t=this.currentCard[i];if(t!=this.cardSelect&&t.node.getBoundingBox().contains(e)){let t=this.currentCard.indexOf(this.cardSelect);this.swapObject(i,t);break}}this.cardSelect=null,this.resetAllCard(),this.sortPosition(),s.default.getInstance().checkUpdateCard()}shadowCard(t,e){this.currentCard[t].setCardShadow(e)}actionAutoSort(){this.isPlaying=!1,this.resetAllCard();let t=[],e=[],i=[],a=[0,1,2,3,4,5,6],s=this.currentCard.slice();a.sort(function(){return.5-Math.random()});for(let n=0;n<=7;n++){switch(0!==i.length&&(i=[]),a[n]){case 0:i=this.getDoi(s);break;case 1:i=this.getThu(s);break;case 2:i=this.getSamCo(s);break;case 3:i=this.getSanh(s);break;case 4:i=this.getThung(s);break;case 5:i=this.getCuLu(s);break;case 6:i=this.getTuQuy(s)}if(0!==i.length){if(t=[],e=[],e=s,3===(t=this.getMauThau(s)).length&&5===e.length&&5===i.length&&this.compareRank(e,t)>=0&&this.compareRank(i,e)>=0)break;s=[],s=this.currentCard.slice()}if(7===n){t=[],e=[],0!==i.length&&(i=[]);break}}if(3===t.length&&5===e.length&&5===i.length){this.currentCard=[];for(let e=0;e<t.length;e++)this.currentCard.push(t[e]);for(let t=0;t<e.length;t++)this.currentCard.push(e[t]);for(let t=0;t<i.length;t++)this.currentCard.push(i[t]);this.sortPosition()}}getMauThau(t){let e=[];e.push(t[0]);for(let i=1;i<t.length;i++)if(!t[i].getCardDTO().isSameNumber(e[0].getCardDTO())){e.push(t[i]);break}for(let i=2;i<t.length;i++)if(!t[i].getCardDTO().isSameNumber(e[1].getCardDTO())){e.push(t[i]);break}for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),e}getDoi(t){let e=[];if(!this.checkDoi(t))return e;t.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let i=t.length-1;i>0;i--)if(t[i].getCardDTO().isSameNumber(t[i-1].getCardDTO())){e.push(t[i]),e.push(t[i-1]);break}for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}e.push(t[0]),e.push(t[1]),e.push(t[2]);for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return e}getThu(t){let e=[];if(!this.checkThu(t))return e;t.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let i=t.length-1;i>0;i--)if(t[i].getCardDTO().isSameNumber(t[i-1].getCardDTO())){e.push(t[i]),e.push(t[i-1]);break}for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}for(let i=t.length-1;i>0;i--)if(t[i].getCardDTO().isSameNumber(t[i-1].getCardDTO())){e.push(t[i]),e.push(t[i-1]);break}for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}e.push(t[0]);for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return e}getSamCo(t){let e=[];if(!this.checkXam(t))return e;t.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let i=t.length-1;i>1;i--)if(t[i].getCardDTO().isSameNumber(t[i].getCardDTO())){e.push(t[i]),e.push(t[i-1]),e.push(t[i-2]);break}for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}e.push(t[0]),e.push(t[1]);for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return e}getSanh(t){let e,i=[];if(!this.checkSanh(t,5))return i;t.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let n=t.length-1;n>3;n--){e=1,i=[];let a=t[n];i.push(a);for(let s=n-1;s>=0;s--){let n=t[s];if(n.getCardDTO().number===a.getCardDTO().number-1&&(i.push(n),a=n,5==++e)){for(let e=0;e<i.length;e++)for(let a=0;a<t.length;a++)if(i[e].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return i.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),i}}}i=[],e=2;let a=t[t.length-1],s=t[0];if(14===a.getCardDTO().number&&2===s.getCardDTO().number){i.push(a),i.push(s),a=s;for(let s=1;s<t.length;s++){let n=t[s];if(n.getCardDTO().number===a.getCardDTO().number+1&&(i.push(n),a=n,5==++e))break}}for(let n=0;n<i.length;n++)for(let e=0;e<t.length;e++)if(i[n].getCardDTO().equals(t[e].getCardDTO())){t.splice(e,1);break}return i}getThung(t){let e,i=[];if(!this.checkThung(t,5))return i;t.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let a=1;a<=4;a++){e=0,i=[];for(let s=t.length-1;s>=0;s--){let n=t[s];if(n.getCardDTO().suit===a&&(i.push(n),5==++e)){for(let e=0;e<i.length;e++)for(let a=0;a<t.length;a++)if(i[e].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return i.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),i}}}return i}getCuLu(t){let e=[];if(!this.checkCulu(t))return e;t.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let i=t.length-1;i>1;i--)if(t[i].getCardDTO().isSameNumber(t[i].getCardDTO())){e.push(t[i]),e.push(t[i-1]),e.push(t[i-2]);break}for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}for(let i=t.length-1;i>0;i--)if(t[i].getCardDTO().isSameNumber(t[i-1].getCardDTO())){e.push(t[i]),e.push(t[i-1]);break}for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),e}getTuQuy(t){let e=[];if(!this.checkTuQuy(t))return e;t.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let i=t.length-1;i>0;i--)if(t[i].getCardDTO().isSameNumber(t[i-3].getCardDTO())){e.push(t[i]),e.push(t[i-1]),e.push(t[i-2]),e.push(t[i-3]);break}e[0].getCardDTO().isSameNumber(t[0].getCardDTO())?e.push(t[12]):e.push(t[0]);for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)if(e[i].getCardDTO().equals(t[a].getCardDTO())){t.splice(a,1);break}return e}checkBinhGrandDragon(t){for(let e=1;e<t.length;e++)if(!t[e].getCardDTO().isSameSuit(t[e-1].getCardDTO()))return!1;return!!this.checkBinhDragon(t)}checkBinhDragon(t){let e=t.slice();e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);for(let i=1;i<e.length;i++)if(e[i].getCardDTO().number!=e[i-1].getCardDTO().number+1)return!1;return!0}checkBinhSameColor(t){let e=0,i=0;for(let a=0;a<t.length;a++)t[a].getCardDTO().suit<=2?e++:i++;return 13==e||13==i}checkBinhSixPairs(t){let e=t.slice();e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number);var i=0;for(let a=0;a<e.length-1;a++)e[a].getCardDTO().isSameNumber(e[a+1].getCardDTO())&&(i++,a+=1);return 6==i}checkBinhThreeStraights(t,e,i){return!!(this.checkSanh(t,3)&&this.checkSanh(e,5)&&this.checkSanh(i,5))}checkBinhThreeFlushes(t,e,i){return!!(this.checkThung(t,3)&&this.checkThung(e,5)&&this.checkThung(i,5))}checkThungPhaSanh(t,e){let i=t.slice();return!0===this.checkThung(i,e)&&!0===this.checkSanh(i,e)}checkTuQuy(t){let e=t.slice();if(e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),e.length<4)return!1;for(let i=0;i<e.length-1;i++){let t=0;for(let a=i+1;a<e.length;a++)e[a].getCardDTO().isSameNumber(e[i].getCardDTO())&&t++;if(3===t)return!0}return!1}checkCulu(t){let e=t.slice();if(!this.checkXam(e)||e.length<5)return!1;if(e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),5===e.length){for(let t=0;t<e.length-4;t++)if(e[t].getCardDTO().isSameNumber(e[t+1].getCardDTO())){if(e[t+1].getCardDTO().isSameNumber(e[t+2].getCardDTO())&&e[t+3].getCardDTO().isSameNumber(e[t+4].getCardDTO()))return!0;if(e[t+2].getCardDTO().isSameNumber(e[t+3].getCardDTO())&&e[t+3].getCardDTO().isSameNumber(e[t+4].getCardDTO()))return!0}return!1}let i=[];for(let a=0;a<e.length-2;a++)if(i=e,e[a].getCardDTO().isSameNumber(e[a+1].getCardDTO())&&e[a+1].getCardDTO().isSameNumber(e[a+2].getCardDTO())&&(i.slice(a,3),this.checkDoi(i)))return!0;return!1}checkThung(t,e){let i=t.slice();if(i.length<e)return!1;let a=0;for(let s=0;s<i.length;s++){a=0;for(let t=s+1;t<i.length;t++)i[t].getCardDTO().isSameSuit(i[s].getCardDTO())&&a++;if(a>=e-1)return!0}return!1}checkSanh(t,e){let i=t.slice();if(i.length<e)return!1;let a=[];for(let s=0;s<i.length;s++)a.push(i[s].getCardDTO().number),14===i[s].getCardDTO().number&&a.push(1);a.sort((t,e)=>t-e);for(let s=0;s<a.length-1;s++){let t=0;for(let e=s+1;e<a.length;e++)a[s]+t+1===a[e]&&t++;if(t>=e-1)return!0}return!1}checkXam(t){let e=t.slice();if(e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),e.length<3)return!1;for(let i=0;i<e.length-2;i++)if(e[i].getCardDTO().isSameNumber(e[i+1].getCardDTO())&&e[i+1].getCardDTO().isSameNumber(e[i+2].getCardDTO()))return!0;return!1}checkThu(t){let e=t.slice();if(e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),e.length<4)return!1;for(let i=0;i<e.length-1;i++)if(e[i].getCardDTO().isSameNumber(e[i+1].getCardDTO()))for(let t=i+2;t<e.length-1;t++)if(e[t].getCardDTO().isSameNumber(e[t+1].getCardDTO()))return!0;return!1}checkDoi(t){let e=t.slice();if(e.sort((t,e)=>t.getCardDTO().number-e.getCardDTO().number),e.length<2)return!1;for(let i=0;i<e.length-1;i++)if(e[i].getCardDTO().isSameNumber(e[i+1].getCardDTO()))return!0;return!1}compareMauThau(t,e){for(let i=t.length-1;i>=0;i--){if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}compareDoi(t,e){var i,a;for(let s=0;s<t.length;s++)if(t[s]==t[s+1]){i=t[s];break}for(let s=0;s<e.length;s++)if(e[s]==e[s+1]){a=e[s];break}return i>a?1:i<a?-1:this.compareMauThau(t,e)}compareThu(t,e){if(t[1]!==t[2]&&t[2]!==t[3]){var i=t[2];t.splice(2,1),t.unshift(i)}else t[3]!==t[4]&&(i=t[4],t.pop(),t.unshift(i));return e[1]!==e[2]&&e[2]!==e[3]?(i=e[2],e.splice(2,1),e.unshift(i)):e[3]!==e[4]&&(i=e[4],e.pop(),e.unshift(i)),this.compareMauThau(t,e)}compareSamCo(t,e){var i,a;for(let s=0;s<t.length;s++)if(t[s]===t[s+1]&&t[s]===t[s+2]){i=t[s];break}for(let s=0;s<e.length;s++)if(e[s]===e[s+1]&&e[s]===e[s+2]){a=e[s];break}return i>a?1:-1}compareSanh(t,e){return 2===t[0]&&14===t[4]&&(t.pop(),t.unshift(1)),2===e[0]&&14===e[4]&&(e.pop(),e.unshift(1)),this.compareMauThau(t,e)}compareThung(t,e){return this.compareMauThau(t,e)}compareCuLu(t,e){return this.compareSamCo(t,e)}compareTuQuy(t,e){return this.compareDoi(t,e)}compareTPS(t,e){return this.compareThung(t,e)}compareMauBinh(t,e){return t===e?0:t>e?1:-1}compareRank(t,e){var i=this.getListCardValue(t),a=this.getListCardValue(e),s=this.getMauBinhRank(t),n=this.getMauBinhRank(e);if(s===n){if(0===s)return this.compareMauThau(i,a);if(1===s)return this.compareDoi(i,a);if(2===s)return this.compareThu(i,a);if(3===s)return this.compareSamCo(i,a);if(4===s)return this.compareSanh(i,a);if(5===s)return this.compareThung(i,a);if(6===s)return this.compareCuLu(i,a);if(7===s)return this.compareTuQuy(i,a);if(8===s)return this.compareTPS(i,a)}else if(s>n)return 1;return-1}getListCardValue(t){var e=[];3==t.length&&(e.push(-2),e.push(-1));for(let i=0;i<t.length;i++)e.push(t[i].N);return e.sort((t,e)=>t-e),e}getMauBinhRank(t){return this.checkThungPhaSanh(t,5)?8:this.checkTuQuy(t)?7:this.checkCulu(t)?6:this.checkThung(t,5)?5:this.checkSanh(t,5)?4:this.checkXam(t)?3:this.checkThu(t)?2:this.checkDoi(t)?1:0}};a([o(cc.Node)],h.prototype,"nodeCardPrefab",void 0),h=a([r],h),i.default=h,cc._RF.pop()},{"./MauBinh.CardDrag":"MauBinh.CardDrag","./MauBinh.InGame":"MauBinh.InGame"}],"MauBinh.InGame":[function(t,e,i){"use strict";cc._RF.push(e,"97c85/a1ahNR5WoU+8m1+Ga","MauBinh.InGame");var a,s=this&&this.__decorate||function(t,e,i,a){var s,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.MauBinhCardDTO=void 0;const n=t("../../Main/Game/src/common/BroadcastReceiver"),r=t("../../Main/Game/src/common/Utils"),o=t("../../Main/Game/src/common/App"),h=t("../../Main/Game/src/common/Configs"),c=t("./MauBinh.Cmd"),l=t("../../Main/Game/src/networks/MauBinhNetworkClient"),d=t("./MauBinh.DetectPlayerCards"),u=t("./MauBinh.HandleDragAndDrop"),g=t("./MauBinh.Player"),m=t("../../Main/Game/src/games/cardgames/PopupCardDefinations"),p=t("./MauBinh.Constant"),C=t("../../Main/Game/src/networks/CardGame.Cmd"),f=t("../../Main/Game/src/games/cardgames/PopupChatInGame"),y=t("../../Main/Game/src/games/cardgames/PopupSettingInGame"),T=t("./MauBinh.PopupGuide"),_=t("../../Main/Game/src/common/Common.AudioManager"),O=t("./MauBinh.Listener");class S{constructor(t){this.id=t,this.suit=this.id%4,this.number=Math.floor(this.id/4)+2}static fromCardId(t){return new S(t)}get isHeo(){return 2==this.number}equals(t){return t&&this.number===t.number&&this.suit===t.suit}isSameNumber(t){return t&&this.number===t.number}isSameSuit(t){return t&&this.suit===t.suit}getColor(){return this.suit==p.CardSuites.ENUM.SPADE||this.suit==p.CardSuites.ENUM.CLUB?p.CardColors.ENUM.BLACK:this.suit==p.CardSuites.ENUM.DIAMOND||this.suit==p.CardSuites.ENUM.HEART?p.CardColors.ENUM.RED:null}}i.MauBinhCardDTO=S;const N=[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]],{ccclass:M,property:v}=cc._decorator;let R=a=class extends cc.Component{constructor(){super(...arguments),this.myPlayingCardBoard=null,this.groupPlayers=null,this.cardsDeal=null,this.labelRoomId=null,this.labelRoomBet=null,this.lbMatchId=null,this.labelTimer=null,this.suggestTarget=null,this.btnSoChi=null,this.btnSwap=null,this.btnAuto=null,this.btnCombining=null,this.notifyTimeStart=null,this.fxSoChiTotal=null,this.handleDragDrop=null,this.btnShowCardDefinations=null,this.backgroundMusic=null,this.winSound=null,this.cardFrames=[],this.cardBackFrame=null,this.configPlayer=[],this.cardGroupNames=["Th\xf9ng Ph\xe1 S\u1ea3nh","T\u1ee9 Qu\xfd","C\xf9 L\u0169","Th\xf9ng","S\u1ea3nh","S\xe1m C\xf4","Th\xfa","\u0110\xf4i","M\u1eadu Th\u1ea7u"],this.timeAutoStart=null,this.betDuration=null,this.intervalWaitting=null,this.intervalBetting=null,this.myCardDTOs=[],this.cardDefinations=[],this.isFinish=!1,this.mouseDownTime=(new Date).getTime()}static getInstance(){return this.instance}static destroyInstance(){this.instance=null}onLoad(){a.instance=this,this.initConfigPlayer()}start(){var t;null===(t=O.default.getInstance())||void 0===t||t.releasePendingCommands(),n.default.send(n.default.SET_SOUND,cc.find("Canvas")),_.default.getInstance().playBackgroundMusicByGame(h.default.App.BUNDLE_NAME.MAUBINH,this.backgroundMusic),this.schedule(()=>{(new Date).getTime()-this.mouseDownTime<=3e4&&l.default.getInstance().send(new c.default.SendPing(0))},30),this.node.on(cc.Node.EventType.MOUSE_DOWN,()=>{this.mouseDownTime=(new Date).getTime()})}onDestroy(){this.unschedule(this.intervalWaitting),this.unschedule(this.intervalBetting),a.instance=null}updateRoomInfo(t){this.labelRoomId.string=t.roomId.toString(),this.labelRoomBet.string=r.default.formatNumber(t.moneyBet),this.lbMatchId.string=t.matchId+"",t.gameState==p.GameState.ENUM.STATE_PLAYING&&this.startBettingCountDown(t.countDownTime),this.configPlayer[0].nickName=h.default.Login.Nickname,this.configPlayer[0].playerPos=t.myChair;for(let e=0;e<this.configPlayer.length;e++){let i=this.configPlayer[e];i.playerPos=N[t.myChair][e];const a=i.seatId;this.getPlayerHouse(a).resetPlayerInfo(a),t.playerStatus[i.playerPos]===p.PlayerState.ENUM.PLAYER_STATUS_OUT_GAME?(i.isViewer=!0,this.getPlayerHouse(a).showBtnInvite(!0)):t.playerStatus[i.playerPos]===p.PlayerState.ENUM.PLAYER_STATUS_VIEWER?(i.isViewer=!0,this.getPlayerHouse(a).setIsViewer(!0),this.getPlayerHouse(a).playFxViewer(),this.setupSeatPlayer(a,t.playerInfos[i.playerPos])):t.playerStatus[i.playerPos]===p.PlayerState.ENUM.PLAYER_STATUS_SITTING?(i.isViewer=!1,this.getPlayerHouse(a).setIsViewer(!1),this.setupSeatPlayer(a,t.playerInfos[i.playerPos])):t.playerStatus[i.playerPos]===p.PlayerState.ENUM.PLAYER_STATUS_PLAYING&&(i.isViewer=!1,this.getPlayerHouse(a).setIsViewer(!1),0!==a&&t.gameState==p.GameState.ENUM.STATE_PLAYING&&(this.getPlayerHouse(a).playFxDangXep(),this.getPlayerHouse(a).showCardReal(!0),this.getPlayerHouse(a).showCardReady(!1)),this.setupSeatPlayer(a,t.playerInfos[i.playerPos]))}}receivedAutoStart(t){if(this.isFinish=!1,t.isAutoStart){this.startWaittingCountDown(t.timeAutoStart),this.setIsActiveButton(!1,!1),this.resetPlayersPlaying();for(let t=0;t<p.default.MAX_PLAYER;t++)this.getPlayerHouse(t).resetResultGame();this.fxSoChiTotal.stopAllActions(),this.fxSoChiTotal.active=!1}}receivedMoiDatCuoc(t){this.startBettingCountDown(t.timeDatCuoc),this.setIsActiveButton(!0,!0)}receivedDealCard(t){this.mouseDownTime=(new Date).getTime(),this.lbMatchId.string=t.matchId+"",this.isFinish=!1,this.setIsActiveButton(!1,!1),this.myCardDTOs=t.cardList,this.currentHandRanking=t.handRanking,this.scheduleOnce(()=>{this.startBettingCountDown(t.countdown)},3);const e=this.getNumPlayers();for(let a=0;a<4*p.default.MAX_PLAYER;a++)this.cardsDeal.children[a].active=4*e.length<a,this.cardsDeal.children[a].position=cc.v3(0,0);for(let a=0;a<4;a++)for(let t=0;t<e.length;t++){const i=e[t];if(-1===i)continue;this.getPlayerHouse(i).setIsViewer(!1);let s=this.cardsDeal.children[a*e.length+t],n=this.groupPlayers.children[i].position;s.runAction(cc.sequence(cc.delayTime(.1*(a*e.length+t)),cc.moveTo(.2,cc.v2(n.x,n.y))))}const i=.1*(4*e.length-3);this.scheduleOnce(()=>{for(let t=0;t<4*p.default.MAX_PLAYER;t++)this.cardsDeal.children[t].active=!1;for(let i=0;i<e.length;i++){let a=e[i];if(-1!==a)if(0===a){if(this.handleDragDrop.node.active=!0,this.handleDragDrop.onTouch(),this.handleDragDrop.setListCard(this.myCardDTOs),this.setIsActiveButton(!0,!1),this.getPlayerHouse(0).resetResultGame(),t.handRanking!==p.CardTypes.ENUM.TYPE_BINH_THUONG&&this.getPlayerHouse(0).playFxResultGeneral(0,!(t.handRanking===p.CardTypes.ENUM.TYPE_BINH_LUNG),p.CardTypes.getBinhName(t.mauBinh),!1),e.filter(t=>0!==t).forEach(t=>this.getPlayerHouse(t).playFxDangXep()),t.handRanking<p.CardTypes.ENUM.TYPE_BINH_THUONG)return;let i=new d.default;i.initCard(this.myCardDTOs);let a=i.getPlayerCardsInfo(!0);const s=[this.myCardDTOs[0],this.myCardDTOs[1],this.myCardDTOs[2]],n=[this.myCardDTOs[3],this.myCardDTOs[4],this.myCardDTOs[5],this.myCardDTOs[6],this.myCardDTOs[7]],r=[this.myCardDTOs[8],this.myCardDTOs[9],this.myCardDTOs[10],this.myCardDTOs[11],this.myCardDTOs[12]];this.highLightCards(3,a.chiCuoi,s),this.highLightCards(2,a.chiGiua,n),this.highLightCards(1,a.chiDau,r)}else this.getPlayerHouse(a).showCardReal(!0),this.getPlayerHouse(a).showCardReady(!1)}},i)}receivedSoChi(t){let e=t.chair,i=this.findPlayerSeatByPos(e);-1!==i&&(0===i?(this.setIsActiveButton(!1,this.betDuration>5),this.handleDragDrop.offTouch(),this.handleDragDrop.sortPosition(!1)):this.getPlayerHouse(i).playFxXepXong())}receivedXepLai(t){let e=t.chair,i=this.findPlayerSeatByPos(e);-1!==i&&(0==i?(this.setIsActiveButton(!0,!1),this.handleDragDrop.onTouch(),this.handleDragDrop.sortPosition()):this.getPlayerHouse(i).playFxDangXep())}receivedEndGame(t){this.isFinish=!0,this.actionHoldRoom(),this.unschedule(this.intervalBetting),this.labelTimer.node.parent.active=!1,this.setIsActiveButton(!1,!1),this.handleDragDrop.offTouch(),this.handleDragDrop.node.active=!1;const e=t.playerResultList.find(t=>0===this.findPlayerSeatByPos(t.chairIndex));e&&([e.chi3[0],e.chi3[1],e.chi3[2],e.chi2[0],e.chi2[1],e.chi2[2],e.chi2[3],e.chi2[4],e.chi1[0],e.chi1[1],e.chi1[2],e.chi1[3],e.chi1[4]].forEach((t,e)=>this.myPlayingCardBoard.children[e].children[1].getComponent(cc.Sprite).spriteFrame=this.getCardFrame(t.id)),h.default.Login.Coin=e.currentMoney,n.default.send(n.default.USER_UPDATE_COIN));for(let i=0;i<p.default.MAX_PLAYER;i++){const t=this.getPlayerHouse(i);t.resetResultGame(),t.prepareFxAction(),0===i&&(t.setPositionCardReal(cc.v2(176,82)),t.scaleCardReal(.5))}this.soChi(1,t.playerResultList)}receivedUpdateMatch(t){this.isFinish=!1;const e=t.infos;for(let i=0;i<t.hasInfo.length;i++){const a=this.configPlayer[i].playerPos;if(t.hasInfo[a]){let t=this.getPlayerHouse(i);t.setGold(e[a].money),this.configPlayer[i].nickName=e[a].nickName,e[a].playerStatus==p.PlayerState.ENUM.PLAYER_STATUS_SITTING||e[a].playerStatus==p.PlayerState.ENUM.PLAYER_STATUS_PLAYING?(this.configPlayer[i].isViewer=!1,t.setIsViewer(!1)):(this.configPlayer[i].isViewer=!0,t.setIsViewer(!0),t.playFxViewer()),this.setupSeatPlayer(i,e[a])}else this.configPlayer[i].nickName="",this.configPlayer[i].isViewer=!0}}receivedGameInfo(t){var e;this.isFinish=!1,null===(e=T.default.instance)||void 0===e||e.dismiss(),this.labelRoomId.string=t.roomId.toString(),this.labelRoomBet.string=r.default.formatNumber(t.moneyBet),this.lbMatchId.string=t.matchId+"",this.myCardDTOs=t.players[t.myChair].cardList,this.configPlayer[0].nickName=h.default.Login.Nickname,this.configPlayer[0].playerPos=t.myChair;for(let i=0;i<this.configPlayer.length;i++)this.configPlayer[i].playerPos=N[t.myChair][i];for(let i=0;i<this.configPlayer.length;i++){const e=this.configPlayer[i].seatId;this.getPlayerHouse(e).resetPlayerInfo(e);const a=this.configPlayer[i].playerPos;t.hasInfo[a]?(this.setupSeatPlayer(e,t.players[a]),t.players[a].playerStatus===p.PlayerState.ENUM.PLAYER_STATUS_VIEWER?(this.configPlayer[e].isViewer=!0,this.getPlayerHouse(e).setIsViewer(!0),this.getPlayerHouse(e).playFxViewer()):(this.configPlayer[e].isViewer=!1,this.getPlayerHouse(e).setIsViewer(!1),0!=e?(this.getPlayerHouse(e).showCardReady(!1),this.getPlayerHouse(e).showCardReal(!0),t.players[a].sochi?this.getPlayerHouse(e).playFxXepXong():this.getPlayerHouse(e).playFxDangXep()):this.setIsActiveButton(!t.players[a].sochi,t.players[a].sochi))):(this.getPlayerHouse(e).showBtnInvite(!0),this.configPlayer[i].isViewer=!0)}this.myCardDTOs.length>0&&(this.getPlayerHouse(0).resetCardReady(0),this.getPlayerHouse(0).showCardReal(!1),this.getPlayerHouse(0).prepareToTransform(),this.handleDragDrop.setListCard(this.myCardDTOs),this.handleDragDrop.node.active=!0,this.handleDragDrop.onTouch(),this.scheduleOnce(()=>{this.setIsActiveButton(!0,!1),this.checkUpdateCard()},1)),t.gameState===p.GameState.ENUM.STATE_PLAYING&&this.startBettingCountDown(t.countdownTime)}receivedNotifyRegOutRoom(t){const e=this.findPlayerSeatByPos(t.outChair);-1!==e&&this.getPlayerHouse(e).showNotify(t.isOutRoom)}receivedUserLeaveRoom(t){const e=this.findPlayerSeatByPos(t.chair);if(-1!==e){for(let t=0;t<this.configPlayer.length;t++)this.configPlayer[t].seatId===e&&(this.configPlayer[t].nickName="",this.configPlayer[t].isViewer=!0);this.getPlayerHouse(e).resetPlayerInfo(e),this.getPlayerHouse(e).showBtnInvite(!0),1==this.getNumPlayers().length&&this.resetPlayersPlaying(),0===e&&(cc.director.loadScene("MauBinh"),t.reqQuitRoomReason&&"CLIENT-REQUEST"!==t.reqQuitRoomReason&&o.default.instance.alertDialog.showMsg(t.reqQuitRoomReason))}}receivedUserJoinRoom(t){for(let e=0;e<this.configPlayer.length;e++){if(this.configPlayer[e].playerPos!==t.myChair)continue;const i=this.configPlayer[e].seatId;this.getPlayerHouse(i).resetPlayerInfo(i),this.setupSeatPlayer(i,t.info),t.uStatus==p.PlayerState.ENUM.PLAYER_STATUS_VIEWER?(this.configPlayer[i].isViewer=!0,this.getPlayerHouse(i).setIsViewer(!0),this.getPlayerHouse(i).playFxViewer()):(this.configPlayer[i].isViewer=!1,this.getPlayerHouse(i).setIsViewer(!1))}}receivedChatRoom(t){const e=this.findPlayerSeatByPos(t.chair);-1!==e&&(t.isIcon?this.getPlayerHouse(e).showChatEmotion(t.content):this.getPlayerHouse(e).showChatMsg(t.content))}startWaittingCountDown(t){this.timeAutoStart=t,this.setTimeWaittingCountDown(),this.notifyTimeStart.parent.active=!0,this.unschedule(this.intervalWaitting),this.schedule(this.intervalWaitting=()=>{this.timeAutoStart--,this.setTimeWaittingCountDown(),this.timeAutoStart<1&&(this.unschedule(this.intervalWaitting),this.notifyTimeStart.parent.active=!1)},1)}setTimeWaittingCountDown(){this.notifyTimeStart.getComponent(cc.Label).string=" B\u1eaft \u0111\u1ea7u sau : "+Math.floor(this.timeAutoStart%60)+"s "}startBettingCountDown(t){t<=0||(this.betDuration=t,this.labelTimer.node.parent.active=!0,this.labelTimer.string=this.betDuration,this.unschedule(this.intervalBetting),this.schedule(this.intervalBetting=()=>{this.betDuration--,this.betDuration<1&&(this.labelTimer.node.parent.active=!1,this.unschedule(this.intervalBetting)),5===this.betDuration&&(this.setIsActiveButton(!1,!1),this.btnSoChi.active&&this.actionAutoBinhSoChi()),this.labelTimer.string=this.betDuration},1))}setIsActiveButton(t,e){this.btnSoChi.active=t,this.btnSwap.active=t,this.btnAuto.active=t,this.btnCombining.active=e}actionLeaveRoom(){l.default.getInstance().send(new c.default.SendRequestLeaveGame)}actionHoldRoom(){l.default.getInstance().send(new c.default.SendHoldRoom)}actionBaoBinh(){this.setIsActiveButton(!1,!1),this.btnCombining.active=!0,l.default.getInstance().send(new c.default.SendBaoBinh)}actionBinhSoChi(){this.groupPlayers.children[0].getComponent("MauBinh.Player").scaleCardReal(.8),this.myCardDTOs=this.handleDragDrop.getListCard();const t=[this.myCardDTOs[0],this.myCardDTOs[1],this.myCardDTOs[2]].map(t=>t.id),e=[this.myCardDTOs[3],this.myCardDTOs[4],this.myCardDTOs[5],this.myCardDTOs[6],this.myCardDTOs[7]].map(t=>t.id),i=[this.myCardDTOs[8],this.myCardDTOs[9],this.myCardDTOs[10],this.myCardDTOs[11],this.myCardDTOs[12]].map(t=>t.id);l.default.getInstance().send(new c.default.SendBinhSoChi(i,e,t))}actionBinhSwap(){this.handleDragDrop.actionSwapChi(),this.checkUpdateCard()}swapObjec(t,e){const i=this.myCardDTOs[t];this.myCardDTOs[t]=this.myCardDTOs[e],this.myCardDTOs[e]=i}actionAutoSort(){this.handleDragDrop.actionAutoSort(),this.checkUpdateCard()}actionAutoBinhSoChi(){let t=[this.myCardDTOs[0],this.myCardDTOs[1],this.myCardDTOs[2]].map(t=>t.id),e=[this.myCardDTOs[3],this.myCardDTOs[4],this.myCardDTOs[5],this.myCardDTOs[6],this.myCardDTOs[7]].map(t=>t.id),i=[this.myCardDTOs[8],this.myCardDTOs[9],this.myCardDTOs[10],this.myCardDTOs[11],this.myCardDTOs[12]].map(t=>t.id);l.default.getInstance().send(new c.default.SendAutoBinhSoChi(i,e,t))}actionXepLai(){this.setIsActiveButton(!0,!1),l.default.getInstance().send(new c.default.SendXepLai)}checkUpdateCard(){if(this.currentHandRanking<p.CardTypes.ENUM.TYPE_BINH_THUONG)return void this.getPlayerHouse(0).playFxResultGeneral(0,!0,p.CardTypes.getBinhName(this.currentHandRanking),this.isFinish);this.myCardDTOs=this.handleDragDrop.getListCard();let t=new d.default;t.initCard(this.myCardDTOs);let e=t.getPlayerCardsInfo(!0),i=p.CardTypes.getBinhName(e.cardType);this.getPlayerHouse(0).resetResultGame(),e.cardType!==p.CardTypes.ENUM.TYPE_BINH_THUONG&&this.getPlayerHouse(0).playFxResultGeneral(0,!(e.cardType===p.CardTypes.ENUM.TYPE_BINH_LUNG),i,this.isFinish);let a=[this.myCardDTOs[0],this.myCardDTOs[1],this.myCardDTOs[2]],s=[this.myCardDTOs[3],this.myCardDTOs[4],this.myCardDTOs[5],this.myCardDTOs[6],this.myCardDTOs[7]],n=[this.myCardDTOs[8],this.myCardDTOs[9],this.myCardDTOs[10],this.myCardDTOs[11],this.myCardDTOs[12]];this.highLightCards(3,e.chiCuoi,a),this.highLightCards(2,e.chiGiua,s),this.highLightCards(1,e.chiDau,n)}highLightCards(t,e,i){let a=-1,s=-1;3==t?(a=0,s=3):2==t?(a=3,s=8):(a=8,s=13);for(var n=a;n<s;n++)this.handleDragDrop.shadowCard(n,!0);switch(e){case p.GroupKinds.ENUM.GROUP_THUNG_PHA_SANH:case p.GroupKinds.ENUM.GROUP_CU_LU:case p.GroupKinds.ENUM.GROUP_THUNG:case p.GroupKinds.ENUM.GROUP_SANH:for(n=a;n<s;n++)this.handleDragDrop.shadowCard(n,!1);break;case p.GroupKinds.ENUM.GROUP_TU_QUY:case p.GroupKinds.ENUM.GROUP_SAM_CO:case p.GroupKinds.ENUM.GROUP_MOT_DOI:case p.GroupKinds.ENUM.GROUP_MAU_THAU:case p.GroupKinds.ENUM.GROUP_THU:for(let t=0;t<i.length-1;t++)for(let e=t+1;e<i.length;e++)i[t].isSameNumber(i[e])&&(this.handleDragDrop.shadowCard(t+a,!1),this.handleDragDrop.shadowCard(e+a,!1))}}initConfigPlayer(){this.configPlayer=[];for(let t=0;t<p.default.MAX_PLAYER;t++)this.configPlayer.push({seatId:t,nickName:"",playerPos:-1,isViewer:!0})}resetPlayersPlaying(){for(let t=0;t<p.default.MAX_PLAYER;t++)this.getPlayerHouse(t).resetMatchHistory(t)}setupSeatPlayer(t,e){this.configPlayer[t].nickName=e.nickName,this.getPlayerHouse(t).setAvatar(e.avatar),this.getPlayerHouse(t).setName(e.nickName),this.getPlayerHouse(t).setGold(e.money)}findPlayerPosBySeat(t){return this.configPlayer[t].playerPos}findPlayerSeatByPos(t){if(-1==t)return-1;const e=this.configPlayer.find(e=>e.playerPos===t);return e?e.seatId:-1}getPlayerHouse(t){return this.groupPlayers.children[t].getComponent(g.default)}getNumPlayers(){let t=[];return this.configPlayer.filter(t=>t.nickName&&!t.isViewer).forEach(e=>t.push(e.seatId)),t}needSoChi(t){if(t.filter(t=>0!==this.findPlayerSeatByPos(t.chairIndex)&&t.maubinhType!==p.CardTypes.ENUM.TYPE_BINH_THUONG).length==t.length-1)return!1;const e=t.find(t=>0===this.findPlayerSeatByPos(t.chairIndex));return!e||e.maubinhType===p.CardTypes.ENUM.TYPE_BINH_THUONG}needShowMoneyWhenSoChi(t){return!t.find(t=>0===t.chairIndex&&t.maubinhType!==p.CardTypes.ENUM.TYPE_BINH_THUONG)}needBatSap(t){return!!t.find(t=>0!==t.moneySap)}soChi(t,e){for(let s=0;s<p.default.MAX_PLAYER;s++){let t=this.getPlayerHouse(s);t.resetResultChi(1),t.resetResultChi(2),t.resetResultChi(3)}let i=this.needSoChi(e);this.needShowMoneyWhenSoChi(e);for(let s=0;s<e.length;s++){let n=e[s],r=this.findPlayerSeatByPos(n.chairIndex);if(-1===r)continue;let o=[n.chi3[0],n.chi3[1],n.chi3[2],n.chi2[0],n.chi2[1],n.chi2[2],n.chi2[3],n.chi2[4],n.chi1[0],n.chi1[1],n.chi1[2],n.chi1[3],n.chi1[4]],h=new d.default;h.initCard(o);let c=h.getPlayerCardsInfo(!0),l=this.getPlayerHouse(r);if(l.isActionCardReal(!1),n.maubinhType==p.CardTypes.ENUM.TYPE_BINH_THUONG&&i){let e=-1,i=n.moneyInChi[t-1];if(e=1==t?c.chiDau:2==t?c.chiGiua:c.chiCuoi,l.playFxCompareChi(t,this.cardGroupNames[e]),l.showHistoryChi(i,t),l.playFxGoldSoChi(i),3==t){for(var a=0;a<3;a++)l.prepareCardReal(a),l.transformToCardReal(a,this.getCardFrame(n.chi3[a].id),r);this.scheduleOnce(()=>{let t=n.moneyInChi[0]+n.moneyInChi[1]+n.moneyInChi[2];t>=0?l.playFxWinSoChi(t):l.playFxLoseSoChi(t)},1)}else if(2==t)for(a=0;a<5;a++)l.prepareCardReal(a+3),l.transformToCardReal(a+3,this.getCardFrame(n.chi2[a].id),r);else for(a=0;a<5;a++)l.prepareCardReal(a+8),l.transformToCardReal(a+8,this.getCardFrame(n.chi1[a].id),r)}else if(1==t){n.maubinhType==p.CardTypes.ENUM.TYPE_BINH_THUONG?(c.chiDau<2&&l.playFxCompareChi(t,this.cardGroupNames[c.chiDau]),c.chiGiua<2&&l.playFxCompareChi(t,this.cardGroupNames[c.chiGiua]),c.chiGiua==p.GroupKinds.ENUM.GROUP_SAM_CO&&l.playFxCompareChi(t,this.cardGroupNames[c.chiCuoi])):(l.resetResultGame(),l.playFxResultGeneral(r,!(n.maubinhType==p.CardTypes.ENUM.TYPE_BINH_LUNG),p.CardTypes.getBinhName(n.maubinhType),!0));let e=[n.chi3[0],n.chi3[1],n.chi3[2],n.chi2[0],n.chi2[1],n.chi2[2],n.chi2[3],n.chi2[4],n.chi1[0],n.chi1[1],n.chi1[2],n.chi1[3],n.chi1[4]];0==r&&this.handleDragDrop.setListCard(e);for(let t=0;t<13;t++)l.prepareToTransform(),l.transformToCardReal(t,this.getCardFrame(e[t].id),r)}}this.handleDragDrop.resetAllCard(),i?(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(()=>{t<3?this.soChi(t+1,e):(this.showGoldResult(e,.2),this.batSap(e))})))):(this.showGoldResult(e,.2),this.batSap(e))}showGoldResult(t,e){this.scheduleOnce(()=>{for(let e=0;e<t.length;e++){let i=t[e],a=i.chairIndex,s=this.findPlayerSeatByPos(a);-1!==s&&(this.getPlayerHouse(s).resetResultGame(),i.moneyCommon>=0?(this.getPlayerHouse(s).fxWin(i.moneyCommon,i.currentMoney),0===s&&i.moneyCommon>0&&_.default.getInstance().playEffectByGame(h.default.App.BUNDLE_NAME.MAUBINH,this.winSound)):this.getPlayerHouse(s).fxLose(i.moneyCommon,i.currentMoney))}},e)}batSap(t){if(!this.needBatSap(t))return;let e=0,i=0;for(let a=0;a<t.length;a++)this.findPlayerSeatByPos(t[a].chairIndex)<=0||(t[a].moneySap>0?e+=1:t[a].moneySap<0&&(i+=1));this.fxSoChiTotal.active=!1;for(let a=0;a<t.length;a++){let s=this.findPlayerSeatByPos(t[a].chairIndex);0==s?(e>0&&(this.fxSoChiTotal.active=!0,this.fxSoChiTotal.getComponentInChildren(cc.Label).string=e==t.length-1?"Thua S\u1eadp L\xe0ng":"S\u1eadp C\u1ea3 3 Chi",this.fxSoChiTotal.runAction(cc.sequence(cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1),cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1))),this.scheduleOnce(()=>{this.fxSoChiTotal.stopAllActions(),this.fxSoChiTotal.active=!1},3)),i>0&&(this.fxSoChiTotal.active=!0,this.fxSoChiTotal.getComponentInChildren(cc.Label).string=i==t.length-1?"B\u1eaft S\u1eadp L\xe0ng":"Th\u1eafng 3 Chi",this.fxSoChiTotal.stopAllActions(),this.fxSoChiTotal.runAction(cc.sequence(cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1),cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1))),this.scheduleOnce(()=>{this.fxSoChiTotal.stopAllActions(),this.fxSoChiTotal.active=!1},3))):t[a].moneySap<0&&this.getPlayerHouse(s).playFxSoChiTotal()}}onKickFromRoom(t){cc.director.loadScene("MauBinh",()=>{switch(t){case p.KickReasonCodes.ENUM.ERROR_MONEY:o.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{o.default.instance.openShop(0)});break;case p.KickReasonCodes.ENUM.ERROR_BAO_TRI:o.default.instance.alertDialog.showMsg("H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!");break;default:o.default.instance.alertDialog.showMsg("B\u1ea1n b\u1ecb kick kh\u1ecfi b\xe0n ch\u01a1i!")}})}getCardDefinations(){l.default.getInstance().send(new c.default.SendCardsDefine)}receivedCardDefinations(t){(JSON.parse(t.strData).object||[]).forEach(t=>this.cardDefinations.push(new C.default.CardDefination(t))),this.btnShowCardDefinations.node.active=!1}actShowCardDefinations(){m.default.createAndShow(this.node,this.cardDefinations,this.cardFrames)}actShowChat(){f.default.createAndShow(this.node,this.cardDefinations,(t,e)=>{l.default.getInstance().send(new c.default.SendChatRoom(t,e))},(t,e)=>{l.default.getInstance().send(new c.default.SendCheatCards(t,e))})}actSetting(){y.default.createAndShow(this.node,h.default.App.BUNDLE_NAME.MAUBINH,()=>{T.default.createAndShow(this.node)},()=>{l.default.getInstance().send(new c.default.SendRequestLeaveGame)})}getCardFrame(t){const e=(t<10?"0":"")+t;return this.cardFrames.find(t=>t.name=="labai_"+e)}getCardBackFrame(){return this.cardBackFrame}};R.instance=null,s([v(cc.Node)],R.prototype,"myPlayingCardBoard",void 0),s([v(cc.Node)],R.prototype,"groupPlayers",void 0),s([v(cc.Node)],R.prototype,"cardsDeal",void 0),s([v(cc.Label)],R.prototype,"labelRoomId",void 0),s([v(cc.Label)],R.prototype,"labelRoomBet",void 0),s([v(cc.Label)],R.prototype,"lbMatchId",void 0),s([v(cc.Label)],R.prototype,"labelTimer",void 0),s([v(cc.Node)],R.prototype,"suggestTarget",void 0),s([v(cc.Node)],R.prototype,"btnSoChi",void 0),s([v(cc.Node)],R.prototype,"btnSwap",void 0),s([v(cc.Node)],R.prototype,"btnAuto",void 0),s([v(cc.Node)],R.prototype,"btnCombining",void 0),s([v(cc.Node)],R.prototype,"notifyTimeStart",void 0),s([v(cc.Node)],R.prototype,"fxSoChiTotal",void 0),s([v(u.default)],R.prototype,"handleDragDrop",void 0),s([v(cc.Button)],R.prototype,"btnShowCardDefinations",void 0),s([v(cc.AudioClip)],R.prototype,"backgroundMusic",void 0),s([v(cc.AudioClip)],R.prototype,"winSound",void 0),s([v([cc.SpriteFrame])],R.prototype,"cardFrames",void 0),s([v(cc.SpriteFrame)],R.prototype,"cardBackFrame",void 0),R=a=s([M],R),i.default=R,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Common.AudioManager":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Utils":void 0,"../../Main/Game/src/games/cardgames/PopupCardDefinations":void 0,"../../Main/Game/src/games/cardgames/PopupChatInGame":void 0,"../../Main/Game/src/games/cardgames/PopupSettingInGame":void 0,"../../Main/Game/src/networks/CardGame.Cmd":void 0,"../../Main/Game/src/networks/MauBinhNetworkClient":void 0,"./MauBinh.Cmd":"MauBinh.Cmd","./MauBinh.Constant":"MauBinh.Constant","./MauBinh.DetectPlayerCards":"MauBinh.DetectPlayerCards","./MauBinh.HandleDragAndDrop":"MauBinh.HandleDragAndDrop","./MauBinh.Listener":"MauBinh.Listener","./MauBinh.Player":"MauBinh.Player","./MauBinh.PopupGuide":"MauBinh.PopupGuide"}],"MauBinh.Listener":[function(t,e,i){"use strict";cc._RF.push(e,"93b27c0G0hCxLdCqz8zA1Cp","MauBinh.Listener");var a,s=this&&this.__decorate||function(t,e,i,a){var s,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../Main/Game/src/common/App"),r=t("../../Main/Game/src/common/BroadcastReceiver"),o=t("../../Main/Game/src/common/Configs"),h=t("../../Main/Game/src/networks/MauBinhNetworkClient"),c=t("../../Main/Game/src/networks/Network.InPacket"),l=t("./MauBinh.Cmd"),d=t("./MauBinh.InGame"),u=t("./MauBinh.Room"),{ccclass:g,property:m}=cc._decorator;let p=a=class extends cc.Component{constructor(){super(...arguments),this.currentRoomInfo=null,this.pendingCommands=new Map}static getInstance(){return this.instance}static destroyInstance(){this.instance=null}onLoad(){a.instance=this,cc.game.addPersistRootNode(this.node)}start(){r.default.register(r.default.USER_UPDATE_COIN,()=>{var t;null===(t=u.default.getInstance())||void 0===t||t.updateCoinPlayer()},this),r.default.register(r.default.USER_INFO_UPDATED,()=>{var t,e;null===(t=u.default.getInstance())||void 0===t||t.updateInfoPlayer(),null===(e=u.default.getInstance())||void 0===e||e.updateCoinPlayer()},this),r.default.register(r.default.USER_DISCONNECTED,()=>{h.default.getInstance().close()},this),h.default.getInstance().addOnClose(()=>{var t;(null===(t=u.default.getInstance())||void 0===t?void 0:t.isClickBack)||!o.default.Login.IsLogin?this.backToLobby():n.default.instance.alertDialog.showMsgWithOnDismissed("B\u1ea1n \u0111\xe3 m\u1ea5t k\u1ebft n\u1ed1i v\u1edbi server",()=>{this.backToLobby()})},this),h.default.getInstance().addListener(t=>{var e,i,a,s,r,o,h,g,m,p,C,f,y,T;switch(new c.default(t).getCmdId()){case l.default.Code.MONEY_BET_CONFIG:{let i=new l.default.ReceivedMoneyBetConfig(t);cc.log(i),null===(e=u.default.getInstance())||void 0===e||e.receivedMoneyBetConfig(i);break}case l.default.Code.JOIN_ROOM_FAIL:{n.default.instance.showLoading(!1);let e=new l.default.ReceivedJoinRoomFail(t);cc.log(e),null===(i=u.default.getInstance())||void 0===i||i.receivedJoinRoomFail(e);break}case l.default.Code.JOIN_ROOM_SUCCESS:{let e=new l.default.ReceivedJoinRoomSucceed(t);cc.log(e),null===(a=u.default.getInstance())||void 0===a||a.receivedJoinRoomSuccess(e);break}case l.default.Code.THONG_TIN_BAN_CHOI:{let e=new l.default.ReceivedGameInfo(t);cc.log(e),null===(s=u.default.getInstance())||void 0===s||s.receivedGameInfo(e)}break;case l.default.Code.TOP_SERVER:{let e=new l.default.ReceivedTopServer(t);cc.log(e)}break;case l.default.Code.PINGPONG:cc.log("PINGPONG");break;case l.default.Code.JOIN_ROOM:case l.default.Code.RECONNECT_ROOM:break;case l.default.Code.GET_LIST_ROOM:{let e=new l.default.ReceivedGetListRoom(t);cc.log(e)}break;case l.default.Code.JOIN_GAME_ROOM_BY_ID:break;case l.default.Code.BINH_SO_CHI:{let e=new l.default.ReceivedBinhSoChi(t);cc.log(e),null===(r=d.default.getInstance())||void 0===r||r.receivedSoChi(e)}break;case l.default.Code.XEP_LAI:{let e=new l.default.ReceivedXepLai(t);cc.log(e),null===(o=d.default.getInstance())||void 0===o||o.receivedXepLai(e)}break;case l.default.Code.KET_THUC:{let e=new l.default.ReceivedEndGame(t);cc.log(e),null===(h=d.default.getInstance())||void 0===h||h.receivedEndGame(e)}break;case l.default.Code.CHIA_BAI:{let e=new l.default.ReceivedChiaBai(t);cc.log(e),d.default.getInstance()?d.default.getInstance().receivedDealCard(e):this.pendingCommands.set(l.default.Code.CHIA_BAI,e)}break;case l.default.Code.AUTO_START:{let e=new l.default.ReceivedAutoStart(t);cc.log(e),d.default.getInstance()?d.default.getInstance().receivedAutoStart(e):this.pendingCommands.set(l.default.Code.AUTO_START,e)}break;case l.default.Code.DANG_KY_THOAT_PHONG:{let e=new l.default.ReceivedNotifyRegOutRoom(t);cc.log(e),null===(g=d.default.getInstance())||void 0===g||g.receivedNotifyRegOutRoom(e)}break;case l.default.Code.MOI_DAT_CUOC:{let e=new l.default.ReceivedMoiDatCuoc(t);cc.log(e),null===(m=d.default.getInstance())||void 0===m||m.receivedMoiDatCuoc(e)}break;case l.default.Code.CHEAT_CARDS:case l.default.Code.DANG_KY_CHOI_TIEP:case l.default.Code.UPDATE_OWNER_ROOM:break;case l.default.Code.LEAVE_GAME:{let e=new l.default.ReceivedUserLeaveRoom(t);cc.log(e),null===(p=d.default.getInstance())||void 0===p||p.receivedUserLeaveRoom(e)}break;case l.default.Code.NOTIFY_KICK_FROM_ROOM:{let e=new l.default.ReceivedKickOff(t);cc.log(e),null===(C=d.default.getInstance())||void 0===C||C.onKickFromRoom(e.reason)}break;case l.default.Code.USER_JOIN_ROOM:{let e=new l.default.ReceivedUserJoinRoom(t);cc.log(e),d.default.getInstance()?d.default.getInstance().receivedUserJoinRoom(e):this.pendingCommands.set(l.default.Code.USER_JOIN_ROOM,e)}break;case l.default.Code.NOTIFY_USER_GET_JACKPOT:break;case l.default.Code.UPDATE_MATCH:{let e=new l.default.ReceivedUpdateMatch(t);cc.log(e),null===(f=d.default.getInstance())||void 0===f||f.receivedUpdateMatch(e)}break;case l.default.Code.CHAT_ROOM:{let e=new l.default.ReceivedChatRoom(t);cc.log(e),null===(y=d.default.getInstance())||void 0===y||y.receivedChatRoom(e)}break;case l.default.Code.CARDS_DEFINE:{let e=new l.default.ReceivedCardDefinations(t);cc.log(e),null===(T=d.default.getInstance())||void 0===T||T.receivedCardDefinations(e)}}},this),h.default.getInstance().send(new l.default.SendReconnectRoom)}backToLobby(){n.default.instance.loadScene("Lobby",()=>{cc.game.removePersistRootNode(this.node),a.destroyInstance(),d.default.destroyInstance(),u.default.destroyInstance()})}setCurrentRoomInfo(t){this.currentRoomInfo=t}releasePendingCommands(){var t,e,i;for(const[a,s]of this.pendingCommands.entries())switch(a){case l.default.Code.AUTO_START:null===(t=d.default.getInstance())||void 0===t||t.receivedAutoStart(s);break;case l.default.Code.USER_JOIN_ROOM:null===(e=d.default.getInstance())||void 0===e||e.receivedUserJoinRoom(s);break;case l.default.Code.CHIA_BAI:null===(i=d.default.getInstance())||void 0===i||i.receivedDealCard(s)}this.pendingCommands.clear()}clearPendingCommands(){this.pendingCommands.clear()}};p.instance=null,p=a=s([g],p),i.default=p,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/networks/MauBinhNetworkClient":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"./MauBinh.Cmd":"MauBinh.Cmd","./MauBinh.InGame":"MauBinh.InGame","./MauBinh.Room":"MauBinh.Room"}],"MauBinh.Player":[function(t,e,i){"use strict";cc._RF.push(e,"b79c0saMihPJLkLCRpjTeK5","MauBinh.Player");var a=this&&this.__decorate||function(t,e,i,a){var s,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../Main/Game/src/common/App"),n=t("../../Main/Game/src/common/BroadcastReceiver"),r=t("./MauBinh.Constant"),o=t("./MauBinh.InGame"),{ccclass:h,property:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.avatar=null,this.cardReady=null,this.cardReal=null,this.userName=null,this.userGold=null,this.cardsName=null,this.actionViewer=null,this.actionThinking=null,this.actionWin=null,this.goldWin=null,this.actionLose=null,this.goldLose=null,this.actionXepXong=null,this.actionDangXep=null,this.notify=null,this.chatEmotion=null,this.chatMsg=null,this.shadowAvatar=null,this.shadowInfo=null,this.resultGame=null,this.matResultChi=[],this.actionGoldSoChi=null,this.historyChi=null,this.dataDefaultCardReal=[]}start(){n.default.send(n.default.SET_SOUND,this.node),this.dataDefaultCardReal=[];for(let t=0;t<this.cardReal.childrenCount;t++)this.dataDefaultCardReal.push({pos:this.cardReal.children[t].position,zIndex:this.cardReal.children[t].zIndex})}showChatEmotion(t){this.node.getChildByName("Chat").active=!0,this.chatEmotion.active=!0,this.chatMsg.active=!1,this.chatEmotion.getComponent(sp.Skeleton).setAnimation(0,t,!0),this.scheduleOnce(()=>{this.chatEmotion.active=!1,this.chatMsg.active=!1},3)}showChatMsg(t){this.node.getChildByName("Chat").active=!0,this.chatEmotion.active=!1,this.chatMsg.active=!0,this.chatMsg.children[1].getComponent(cc.Label).string=t,this.scheduleOnce(()=>{this.chatEmotion.active=!1,this.chatMsg.active=!1},3)}showBtnInvite(t){}setOwner(t){}setAvatar(t){this.node.getChildByName("Avatar").active=!0,this.avatar.getComponent(cc.Sprite).spriteFrame=s.default.instance.getAvatarSpriteFrame(t)}setIsViewer(t){this.shadowAvatar.active=t,this.shadowInfo.active=t}setName(t){this.node.getChildByName("Info").active=!0,this.userName.string=t}scaleCardReal(t){this.cardReal.scale=t}showCardReady(t){this.node.getChildByName("Card").active=!0,this.cardReady.active=t}showCardReal(t){this.node.getChildByName("Card").active=!0,this.scaleCardReal(1),this.cardReal.active=t}isActionCardReal(t){if(cc.Tween.stopAllByTarget(this.node),t)cc.tween(this.node).repeatForever(cc.tween().delay(2).call(()=>{let t=[0,1,2,3,4,5,6,7,8,9,10,11,12];t.sort(()=>Math.random()-.5);for(let e=0;e<this.cardReal.childrenCount;e++)cc.Tween.stopAllByTarget(this.cardReal.children[e]),cc.tween(this.cardReal.children[e]).to(.2,{position:this.dataDefaultCardReal[t[e]].pos}).start(),this.cardReal.children[e].zIndex=t[e]})).start();else for(let e=0;e<this.cardReal.childrenCount;e++)cc.Tween.stopAllByTarget(this.cardReal.children[e]),this.cardReal.children[e].position=this.dataDefaultCardReal[e].pos,this.cardReal.children[e].zIndex=this.dataDefaultCardReal[e].zIndex}prepareToTransform(){for(let t=0;t<13;t++)this.prepareCardReal(t)}prepareCardReal(t){this.cardReal.children[t].scaleX=0,this.cardReal.children[t].scaleY=1}transformToCardReal(t,e,i){this.node.getChildByName("Card").active=!0,this.cardReal.active=!0,0==i?(this.cardReal.children[t].children[1].getComponent(cc.Sprite).spriteFrame=e,this.cardReady.children[t].runAction(cc.sequence(cc.scaleTo(.15,0,1),cc.callFunc(()=>{}))),this.cardReal.children[t].runAction(cc.sequence(cc.delayTime(.15),cc.scaleTo(.15,1,1),cc.callFunc(()=>{})))):(this.cardReal.children[t].children[0].getComponent(cc.Sprite).spriteFrame=e,this.cardReal.children[t].runAction(cc.sequence(cc.scaleTo(.15,1,1),cc.callFunc(()=>{}))))}showCardName(t){this.cardsName.active=!0,this.cardsName.getComponent(cc.Sprite).spriteFrame=t,this.scheduleOnce(()=>{this.cardsName.active=!1},4.5)}setGold(t){this.actionThinking.active=!1,this.showGold(!0),this.userGold.string=this.formatGold(t)}setCardReal(t,e){this.cardReal.children[e].children[1].getComponent(cc.Sprite).spriteFrame=t}showPlayCountdown(){this.node.getChildByName("Action").active=!0,this.actionThinking.active=!0,this.processThinking(0)}hidePlayCountdown(){this.actionThinking.active=!1}processThinking(t){this.actionThinking.getComponent(cc.Sprite).fillRange=t}showGold(t){this.node.getChildByName("Info").getChildByName("Gold").active=!0}prepareFxAction(){this.node.getChildByName("Action").active=!0,this.resetAction()}playFxViewer(){this.prepareFxAction(),this.actionViewer.active=!0}playFxDangXep(){this.prepareFxAction(),this.actionDangXep.active=!0,this.actionXepXong.active=!1,this.isActionCardReal(!0)}playFxXepXong(){this.prepareFxAction(),this.actionDangXep.active=!1,this.actionXepXong.active=!0,this.isActionCardReal(!1)}playFxSoChiTotal(t=null){this.node.getChildByName("Result").active=!0,this.resultGame.children[3].active=!0,this.resultGame.children[3].children[1].getComponent(cc.Label).string="S\u1eadp C\u1ea3 3 Chi",this.resultGame.children[3].getComponent(cc.Animation).play()}playFxResultGeneral(t,e,i,a){this.node.getChildByName("Result").active=!0,this.resultGame.children[3].active=!0,0==t&&(this.resultGame.children[3].y=a?285:550,this.resultGame.children[3].children[0].scale=a?.4:.6,this.resultGame.children[3].children[1].scale=a?.4:.6),this.resultGame.children[3].children[0].getComponent(cc.Sprite).setMaterial(0,this.matResultChi[e?0:1]),this.resultGame.children[3].children[1].getComponent(cc.Label).string=e?i:r.CardTypes.getBinhName(r.CardTypes.ENUM.TYPE_BINH_LUNG),this.resultGame.children[3].getComponent(cc.Animation).play()}playFxCompareChi(t,e){this.node.getChildByName("Result").active=!0,this.resultGame.children[t-1].active=!0,this.resultGame.children[t-1].children[1].getComponent(cc.Label).string=e,this.resultGame.children[t-1].getComponent(cc.Animation).play()}showHistoryChi(t,e){this.historyChi&&(1==e&&(this.historyChi.active=!0,this.historyChi.children.forEach(t=>{t.getComponent(cc.Label).string="-"})),3==e&&this.scheduleOnce(()=>{this.historyChi.active=!1},3),t>=0?this.historyChi.children[e-1].getComponent(cc.Label).string="+"+t:t<0&&(this.historyChi.children[e-1].getComponent(cc.Label).string=t.toString()))}playFxGoldSoChi(t){this.actionGoldSoChi.active=!0,this.actionGoldSoChi.children[1].getComponent(cc.Label).string=(t>=0?"+":"")+t+" Chi",this.scheduleOnce(()=>{this.actionGoldSoChi.active=!1},2.5)}playFxWinSoChi(t){this.node.getChildByName("Action").active=!0,this.actionWin.active=!0,this.goldWin.string="+"+t+" Chi",this.scheduleOnce(()=>{this.node.getChildByName("Action").active=!1},1)}playFxLoseSoChi(t){this.node.getChildByName("Action").active=!0,this.actionLose.active=!0,this.goldLose.string=t+" Chi",this.scheduleOnce(()=>{this.node.getChildByName("Action").active=!1},1)}fxWin(t,e){this.node.getChildByName("Action").active=!0,this.actionLose.active=!1,this.actionWin.active=!0,this.goldWin.node.stopAllActions(),this.goldWin.string="+"+this.formatGold(t),this.setGold(e),cc.Tween.stopAllByTarget(this.actionWin),cc.Tween.stopAllByTarget(this.actionLose),cc.tween(this.actionWin).delay(6).call(()=>{null!=this.node&&void 0!==this.node&&(this.actionWin.active=!1,this.node.getChildByName("Action").active=!1)}).start()}fxLose(t,e){this.node.getChildByName("Action").active=!0,this.actionWin.active=!1,this.actionLose.active=!0,this.goldLose.node.stopAllActions(),this.goldLose.string=this.formatGold(t),this.setGold(e),cc.Tween.stopAllByTarget(this.actionWin),cc.Tween.stopAllByTarget(this.actionLose),cc.tween(this.actionLose).delay(6).call(()=>{null!=this.node&&void 0!==this.node&&(this.actionLose.active=!1,this.node.getChildByName("Action").active=!1)}).start()}shadowCardReady(t){for(let e=0;e<13;e++)this.cardReady.children[e].color=t?cc.Color.GRAY:cc.Color.WHITE}setPositionCardReal(t){this.cardReal.setPosition(t)}shadowCardReal(t){for(let e=0;e<13;e++)this.cardReal.children[e].children[0].color=t?cc.Color.GRAY:cc.Color.WHITE}shadowCard(t,e){this.cardReal.children[t].children[1].color=e?cc.Color.GRAY:cc.Color.WHITE}setCardWin(t,e){this.cardReal.children[t].children[0].color=e?cc.Color.WHITE:cc.Color.GRAY}showNotify(t){this.notify.active=!0,this.notify.getChildByName("text").getComponent(cc.Label).string=t?"R\u1eddi b\xe0n":"Ch\u01a1i ti\u1ebfp",this.scheduleOnce(()=>{this.notify.active=!1},1.5)}resetResultGame(){for(let t=0;t<4;t++)this.resultGame.children[t].active=!1}resetResultChi(t){this.resultGame.children[t-1].active=!1}resetAction(){this.node.getChildByName("Action").children.forEach(t=>t.active=!1)}resetMatchHistory(t){this.resetCardReady(t),this.resetCardReal(t),this.node.getChildByName("Card").active=!1,this.showGold(!0),this.cardsName.active=!1,this.resetAction()}resetCardReady(t){if(0==t)for(let e=0;e<13;e++)this.cardReady.children[e].scale=1;this.cardReady.active=!1}resetCardReal(t){this.cardReal.active=!1;for(let e=0;e<13;e++)this.cardReal.children[e].children[0==t?1:0].getComponent(cc.Sprite).spriteFrame=o.default.getInstance().getCardBackFrame();this.shadowCardReal(!1)}resetPlayerInfo(t){this.node.children.forEach(t=>t.active="BtnChat"===t.name);for(let e=0;e<13;e++)this.cardReal.children[e].children[0==t?1:0].getComponent(cc.Sprite).spriteFrame=o.default.getInstance().getCardBackFrame();this.cardReady.active=!1,this.cardReal.active=!1,this.cardsName.active=!1,this.actionViewer.active=!1,this.actionThinking.active=!1,this.actionWin.active=!1,this.actionLose.active=!1,this.setIsViewer(!0)}fxGoldChange(t,e,i){var a=e-t;i.getComponent(cc.Label).string=this.formatGold(t);var s=Math.floor(a/10),n=cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(()=>{t+=s,i.getComponent(cc.Label).string=(a>0?"+":"")+this.formatGold(t)})),10),r=cc.sequence(n,cc.callFunc(()=>{t=e,i.getComponent(cc.Label).string=(a>0?"+":"")+this.formatGold(t)}));i.runAction(r)}formatGold(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}};a([c(cc.Node)],l.prototype,"avatar",void 0),a([c(cc.Node)],l.prototype,"cardReady",void 0),a([c(cc.Node)],l.prototype,"cardReal",void 0),a([c(cc.Label)],l.prototype,"userName",void 0),a([c(cc.Label)],l.prototype,"userGold",void 0),a([c(cc.Node)],l.prototype,"cardsName",void 0),a([c(cc.Node)],l.prototype,"actionViewer",void 0),a([c(cc.Node)],l.prototype,"actionThinking",void 0),a([c(cc.Node)],l.prototype,"actionWin",void 0),a([c(cc.Label)],l.prototype,"goldWin",void 0),a([c(cc.Node)],l.prototype,"actionLose",void 0),a([c(cc.Label)],l.prototype,"goldLose",void 0),a([c(cc.Node)],l.prototype,"actionXepXong",void 0),a([c(cc.Node)],l.prototype,"actionDangXep",void 0),a([c(cc.Node)],l.prototype,"notify",void 0),a([c(cc.Node)],l.prototype,"chatEmotion",void 0),a([c(cc.Node)],l.prototype,"chatMsg",void 0),a([c(cc.Node)],l.prototype,"shadowAvatar",void 0),a([c(cc.Node)],l.prototype,"shadowInfo",void 0),a([c(cc.Node)],l.prototype,"resultGame",void 0),a([c(cc.Material)],l.prototype,"matResultChi",void 0),a([c(cc.Node)],l.prototype,"actionGoldSoChi",void 0),a([c(cc.Node)],l.prototype,"historyChi",void 0),l=a([h],l),i.default=l,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"./MauBinh.Constant":"MauBinh.Constant","./MauBinh.InGame":"MauBinh.InGame"}],"MauBinh.PopupGuide":[function(t,e,i){"use strict";cc._RF.push(e,"19693k2bQFH4ZRnJ7ytG2jP","MauBinh.PopupGuide");var a,s=this&&this.__decorate||function(t,e,i,a){var s,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../Main/Game/src/common/App"),r=t("../../Main/Game/src/common/Configs"),o=t("../../Main/Game/src/common/Dialog"),{ccclass:h,property:c}=cc._decorator;let l=a=class extends o.default{constructor(){super(...arguments),this.scrollPopupGuide=null}static createAndShow(t){null==this.instance||null==this.instance.node?n.default.instance.loadPrefabInBundle(r.default.App.BUNDLE_NAME.MAUBINH,r.default.App.UPDATE_INFO[r.default.App.BUNDLE_NAME.MAUBINH],!0,"res/prefabs/MauBinhPopupGuide",(e,i)=>{if(null!=e)return void n.default.instance.alertDialog.showMsg(e);let s=cc.instantiate(i);s.parent=t,this.instance=s.getComponent(a),this.instance.show()}):this.instance.show()}show(){super.show();let t=this.scrollPopupGuide.content.getComponentsInChildren(cc.Label);t[0].string="LI\xcaN K\u1ebeT:",t[1].string="C\xe1c l\xe1 b\xe0i c\u1ee7a ng\u01b0\u1eddi ch\u01a1i c\xf3 li\xean k\u1ebft \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh nh\u01b0 sau:\n\u0110\u1ed9 m\u1ea1nh t\u0103ng d\u1ea7n t\u1eeb tr\xean xu\u1ed1ng d\u01b0\u1edbi.\n- M\u1eadu th\u1ea7u: Kh\xf4ng c\xf3 li\xean k\u1ebft c\xe1c l\xe1 b\xe0i. VD: A b\xedch, Q t\xe9p 10 c\u01a1, 9 r\xf4, 8 c\u01a1\n- \u0110\xf4i: 7 r\xf4, 7 t\xe9p, 10 b\xedch, Q t\xe9p, A b\xedch\n- Th\xfa: 2 \u0111\xf4i (chi cu\u1ed1i kh\xf4ng c\xf3). VD: J r\xf4, J t\xe9p, 9 b\xedch, 9 c\u01a1, K t\xe9p\n- S\xe1m (3 l\xe1 c\xf9ng s\u1ed1): K c\u01a1, K r\xf4, K t\xe9p, A t\xe9p, 2 b\xedch\n- S\u1ea3nh: 5 l\xe1 c\xf3 s\u1ed1 li\xean ti\u1ebfp nhau (chi cu\u1ed1i kh\xf4ng c\xf3). Li\xean k\u1ebft A, 2, 3, 4, 5 g\u1ecdi l\xe0 S\u1ea3nh Nh\u1ecb, ch\u1ec9 \u0111\u1ee9ng sau S\u1ea3nh \u0110\u1ea1i (A, K, Q, J, 10).\n- Th\xf9ng: 5 l\xe1 c\xf9ng ch\u1ea5t (chi cu\u1ed1i kh\xf4ng c\xf3). VD: 7 r\xf4, Q r\xf4, 10 r\xf4, K r\xf4, A r\xf4\n- C\xf9 L\u0169: 1 S\xe1m & 1 \u0110\xf4i (chi cu\u1ed1i kh\xf4ng c\xf3). VD: Q c\u01a1, Q r\xf4, Q b\xedch, 9 t\xe9p, 9 b\xedch\n- T\u1ee9 Qu\xfd: 4 l\xe1 c\xf9ng s\u1ed1 (chi cu\u1ed1i kh\xf4ng c\xf3). VD: Q c\u01a1, Q r\xf4, Q t\xe9p, Q b\xedch, K b\xedch\n- Th\xf9ng ph\xe1 S\u1ea3nh: D\xe2y \u0111\u1ed3ng ch\u1ea5t (chi cu\u1ed1i kh\xf4ng c\xf3). \n    VD: Q c\u01a1, J c\u01a1, 10 c\u01a1, 9 c\u01a1, 8 c\u01a1\n- Th\xf9ng ph\xe1 S\u1ea3nh l\u1edbn: D\xe2y \u0111\u1ed3ng ch\u1ea5t c\xf3 A ( chi cu\u1ed1i kh\xf4ng c\xf3). \n    VD: A b\xedch, K b\xedch, Q b\xedch, J b\xedch, 10 b\xedch\n",t[2].string="C\xc1CH CH\u01a0I:",t[3].string="- B\u1eaft \u0111\u1ea7u v\xe1n ch\u01a1i, m\u1ed7i ng\u01b0\u1eddi \u0111\u01b0\u1ee3c chia 13 l\xe1, x\u1ebfp th\xe0nh 3 chi. \n    Ng\u01b0\u1eddi ch\u01a1i c\xf3 90s \u0111\u1ec3 s\u1eafp x\u1ebfp b\xe0i c\u1ee7a m\xecnh sao cho li\xean k\u1ebft c\u1ee7a chi tr\u01b0\u1edbc m\u1ea1nh h\u01a1n chi sau.\n- Ng\u01b0\u1eddi ch\u01a1i c\xf3 th\u1ec3 ch\u1ecdn g\u1ee3i \xfd \u0111\u1ec3 m\xe1y t\u1ef1 s\u1eafp b\xe0i.\n- Sau khi h\u1ebft th\u1eddi gian ho\u1eb7c x\u1ebfp xong b\xe0i th\xec b\u1eaft \u0111\u1ea7u \u0111\u1ecd b\xe0i. L\u1ea7n l\u01b0\u1ee3t t\u1eebng ng\u01b0\u1eddi ch\u01a1i s\u1ebd so t\u1eebng chi v\u1edbi nhau. M\u1ed7i l\u1ea7n so s\xe1nh k\xe9o d\xe0i 5s g\u1ed3m hi\u1ec3n th\u1ecb b\u1ed9 b\xe0i, t\xean b\u1ed9 b\xe0i, s\u1ed1 l\u1ea7n th\u1eafng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt.\n- N\u1ebfu Ng\u01b0\u1eddi ch\u01a1i c\xf3 b\xe0i M\u1eadu Binh th\u1eafng tr\u1eafng th\xec s\u1ebd th\u1eafng lu\xf4n m\xe0 kh\xf4ng c\u1ea7n so b\xe0i.\n- N\u1ebfu \u0111\u1ed9 m\u1ea1nh b\u1eb1ng nhau th\xec c\xf9ng chia g\xe0..\n",t[4].string="C\xe1c tr\u01b0\u1eddng h\u1ee3p M\u1eadu Binh th\u1eafng tr\u1eafng, \u0111\u1ed9 m\u1ea1nh gi\u1ea3m d\u1ea7n nh\u01b0 sau:",t[5].string="- S\u1ea3nh r\u1ed3ng cu\u1ed1n: G\u1ed3m 13 l\xe1 b\xe0i t\u1eeb 2 \u0111\u1ebfn A \u0111\u1ed3ng ch\u1ea5t. Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 72 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- S\u1ea3nh r\u1ed3ng: G\u1ed3m 13 l\xe1 b\xe0i t\u1eeb 2 \u0111\u1ebfn A kh\xf4ng \u0111\u1ed3ng ch\u1ea5t. Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 72 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- M\u01b0\u1eddi ba l\xe1 \u0111\u1ed3ng m\xe0u: Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 30 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- M\u01b0\u1eddi hai l\xe1 \u0111\u1ed3ng m\xe0u: Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 24 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- N\u0103m \u0111\xf4i m\u1ed9t s\xe1m: Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 24 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- L\u1ee5c ph\u1ebf b\xf4n: G\u1ed3m 6 \u0111\xf4i trong 13 l\xe1 b\xe0i. Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 18 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- Ba th\xf9ng: G\u1ed3m 3 th\xf9ng t\u1ea1i c\u1ea3 3 chi. Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 18 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- Ba s\u1ea3nh: G\u1ed3m 3 s\u1ea3nh t\u1ea1i c\u1ea3 3 chi. Ng\u01b0\u1eddi ch\u01a1i \u0111\u01b0\u1ee3c 18 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n",t[6].string="C\xe1c tr\u01b0\u1eddng h\u1ee3p m\u1eadu binh th\u01b0\u1eddng:",t[7].string="- S\xe1m chi cu\u1ed1i: N\u1ebfu ng\u01b0\u1eddi ch\u01a1i th\u1eafng chi cu\u1ed1i b\u1eb1ng b\u1ed9 s\xe1m th\xec s\u1ebd \u0111\u01b0\u1ee3c 4 l\u1ea7n ti\u1ec1n c\u01b0\u1ee3c.\n- C\xf9 l\u0169 chi 2: N\u1ebfu ng\u01b0\u1eddi ch\u01a1i th\u1eafng chi 2 b\u1eb1ng b\u1ed9 c\xf9 l\u0169 \u0111\u01b0\u1ee3c 4 l\u1ea7n c\u01b0\u1ee3c.\n- T\u1ee9 qu\xfd chi \u0111\u1ea7u: N\u1ebfu ng\u01b0\u1eddi ch\u01a1i th\u1eafng chi \u0111\u1ea7u b\u1eb1ng b\u1ed9 t\u1ee9 qu\xfd th\xec s\u1ebd \u0111\u01b0\u1ee3c 8 l\u1ea7n c\u01b0\u1ee3c.\n- T\u1ee9 qu\xfd chi 2: N\u1ebfu ng\u01b0\u1eddi ch\u01a1i th\u1eafng chi 2 b\u1eb1ng b\u1ed9 t\u1ee9 qu\xfd th\xec s\u1ebd \u0111\u01b0\u1ee3c 16 l\u1ea7n c\u01b0\u1ee3c.\n- Th\xf9ng ph\xe1 s\u1ea3nh chi \u0111\u1ea7u: Ng\u01b0\u1eddi ch\u01a1i th\u1eafng chi \u0111\u1ea7u b\u1eb1ng b\u1ed9 th\xf9ng ph\xe1 s\u1ea3nh th\xec s\u1ebd \u0111\u01b0\u1ee3c 10 l\u1ea7n c\u01b0\u1ee3c.\n- Th\xf9ng ph\xe1 s\u1ea3nh chi 2: Ng\u01b0\u1eddi ch\u01a1i th\u1eafng chi 2 b\u1eb1ng b\u1ed9 th\xf9ng ph\xe1 s\u1ea3nh th\xec s\u1ebd \u0111\u01b0\u1ee3c 20 l\u1ea7n c\u01b0\u1ee3c.\n",t[8].string="B\u1eaft s\u1eadp:",t[9].string="- S\u1eadp h\u1ea7m: ph\u1ea1t x2 l\u1ea7n m\u1ed7i chi khi ng\u01b0\u1eddi ch\u01a1i thua s\u1eadp h\u1ea7m.\n- S\u1eadp l\xe0ng: ph\u1ea1t x2 l\u1ea7n m\u1ed7i chi cho t\u1ea5t c\u1ea3 ng\u01b0\u1eddi trong b\xe0n, tr\u1eeb ng\u01b0\u1eddi b\u1eaft s\u1eadp l\xe0ng."}};l.instance=null,s([c(cc.ScrollView)],l.prototype,"scrollPopupGuide",void 0),l=a=s([h],l),i.default=l,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Dialog":void 0}],"MauBinh.Room":[function(t,e,i){"use strict";cc._RF.push(e,"42c10TW6WdFCo/r7sBtGHNW","MauBinh.Room");var a,s=this&&this.__decorate||function(t,e,i,a){var s,n=arguments.length,r=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../Main/Game/src/common/App"),r=t("../../Main/Game/src/common/BroadcastReceiver"),o=t("../../Main/Game/src/common/Configs"),h=t("../../Main/Game/src/common/Tween"),c=t("../../Main/Game/src/common/Utils"),l=t("../../Main/Game/src/games/cardgames/ItemRoom"),d=t("../../Main/Game/src/networks/MauBinhNetworkClient"),u=t("../../Main/Lobby/src/Lobby.PopupCashOut"),g=t("./MauBinh.Cmd"),m=t("./MauBinh.InGame"),p=t("./MauBinh.Listener"),{ccclass:C,property:f}=cc._decorator;let y=a=class extends cc.Component{constructor(){super(...arguments),this.scrollListRoom=null,this.roomItem=null,this.lbCoin=null,this.lbName=null,this.avatar=null,this.listRoom=[],this._isClickBack=!1}static getInstance(){return this.instance}static destroyInstance(){this.instance=null}onLoad(){a.instance=this}start(){r.default.send(r.default.SET_SOUND,this.node),cc.director.preloadScene("MauBinh.InGame"),this.sendGetListRoom(),this.updateInfoPlayer(),this.updateCoinPlayer(),this.isClickBack=!1}set isClickBack(t){this._isClickBack=t}get isClickBack(){return this._isClickBack}updateCoinPlayer(){h.default.numberTo(this.lbCoin,o.default.Login.Coin,.3)}updateInfoPlayer(){this.lbName.string=o.default.Login.Nickname,this.avatar.spriteFrame=n.default.instance.getAvatarSpriteFrame(o.default.Login.Avatar)}sendGetListRoom(){d.default.getInstance().send(new g.default.SendMoneyBetConfig)}receivedMoneyBetConfig(t){this.listRoom=t.list,this.initRooms(this.listRoom)}initRooms(t){this.scrollListRoom.content.removeAllChildren();let e=[...new Set(this.listRoom)].filter(t=>t.moneyType===o.default.App.MONEY_TYPE).map(t=>t.moneyBet).sort((t,e)=>t-e);e.forEach((i,a)=>{let s=0,r=0,h=0;t.forEach(t=>{t.moneyBet===i&&(s+=t.nPersion,r=t.maxUserPerRoom,h=t.moneyRequire)});let c=cc.instantiate(this.roomItem);c.getComponent(l.default).initItem(new l.RoomItemInfo(a+1,i,h,s,r)),c.on(cc.Node.EventType.TOUCH_END,()=>{o.default.Login.Coin<h?n.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{n.default.instance.openShop(0)}):(n.default.instance.showLoading(!0),d.default.getInstance().send(new g.default.SendJoinRoom(o.default.App.MONEY_TYPE,r,e[a],0)))}),c.parent=this.scrollListRoom.content,c.y=-30;let u=.2*.7*(1===a?.8:1-Math.pow(2,-10*a));c.runAction(cc.sequence(cc.fadeOut(0),cc.delayTime(.105*(this.listRoom.length-a)),cc.spawn(cc.fadeIn(u),cc.moveTo(u,cc.v2(0,-30-85*a)).easing(cc.easeCircleActionOut()))))}),this.scrollListRoom.scrollToBottom(0),this.scrollListRoom.scrollToTop(2)}actQuickPlay(){let t=this.listRoom.filter(t=>t.moneyRequire<=o.default.Login.Coin);if(t.length<=0)return void n.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{n.default.instance.openShop(0)});let e=t[c.default.randomRangeInt(0,t.length)];n.default.instance.showLoading(!0),d.default.getInstance().send(new g.default.SendJoinRoom(o.default.App.MONEY_TYPE,e.maxUserPerRoom,e.moneyBet,0))}actHideFullyRoom(t){this.scrollListRoom.content.children.forEach(e=>{e.active=!t.isChecked||e.getComponent(l.default).isFull()})}actExchange(){u.default.createAndShow(this.node)}actBack(t){this.isClickBack=!0,d.default.getInstance().close()}receivedJoinRoomFail(t){let e="L\u1ed7i "+t.getError()+", kh\xf4ng x\xe1c \u0111\u1ecbnh.";switch(t.getError()){case 1:e="L\u1ed7i ki\u1ec3m tra th\xf4ng tin!";break;case 2:e="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 3:e="B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n v\xe0o ph\xf2ng ch\u01a1i n\xe0y!";break;case 4:e="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 5:e="M\u1ed7i l\u1ea7n v\xe0o ph\xf2ng ph\u1ea3i c\xe1ch nhau 10 gi\xe2y!";break;case 6:e="H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!";break;case 7:e="Kh\xf4ng t\xecm th\u1ea5y ph\xf2ng ch\u01a1i!";break;case 8:e="M\u1eadt kh\u1ea9u ph\xf2ng ch\u01a1i kh\xf4ng \u0111\xfang!";break;case 9:e="Ph\xf2ng ch\u01a1i \u0111\xe3 \u0111\u1ee7 ng\u01b0\u1eddi!";break;case 10:e="B\u1ea1n b\u1ecb ch\u1ee7 ph\xf2ng kh\xf4ng cho v\xe0o b\xe0n!"}n.default.instance.alertDialog.showMsg(e)}receivedJoinRoomSuccess(t){cc.director.loadScene("MauBinh.InGame",e=>{var i;n.default.instance.showLoading(!1),e?null===(i=p.default.getInstance())||void 0===i||i.clearPendingCommands():m.default.getInstance().updateRoomInfo(t)})}receivedGameInfo(t){cc.director.loadScene("MauBinh.InGame",e=>{var i;n.default.instance.showLoading(!1),e?null===(i=p.default.getInstance())||void 0===i||i.clearPendingCommands():this.scheduleOnce(()=>{m.default.getInstance().receivedGameInfo(t)},1)})}};y.instance=null,s([f(cc.ScrollView)],y.prototype,"scrollListRoom",void 0),s([f(cc.Prefab)],y.prototype,"roomItem",void 0),s([f(cc.Label)],y.prototype,"lbCoin",void 0),s([f(cc.Label)],y.prototype,"lbName",void 0),s([f(cc.Sprite)],y.prototype,"avatar",void 0),y=a=s([C],y),i.default=y,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Tween":void 0,"../../Main/Game/src/common/Utils":void 0,"../../Main/Game/src/games/cardgames/ItemRoom":void 0,"../../Main/Game/src/networks/MauBinhNetworkClient":void 0,"../../Main/Lobby/src/Lobby.PopupCashOut":void 0,"./MauBinh.Cmd":"MauBinh.Cmd","./MauBinh.InGame":"MauBinh.InGame","./MauBinh.Listener":"MauBinh.Listener"}]},{},["MauBinh.CardDrag","MauBinh.CardUtil","MauBinh.Cmd","MauBinh.Constant","MauBinh.DetectGroupCards","MauBinh.DetectPlayerCards","MauBinh.HandleDragAndDrop","MauBinh.InGame","MauBinh.Listener","MauBinh.Player","MauBinh.PopupGuide","MauBinh.Room"]);