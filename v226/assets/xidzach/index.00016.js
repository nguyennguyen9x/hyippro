window.__require=function t(e,i,s){function a(n,r){if(!i[n]){if(!e[n]){var h=n.split("/");if(h=h[h.length-1],!e[h]){var c="function"==typeof __require&&__require;if(!r&&c)return c(h,!0);if(o)return o(h,!0);throw new Error("Cannot find module '"+n+"'")}n=h}var d=i[n]={exports:{}};e[n][0].call(d.exports,function(t){return a(e[n][1][t]||t)},d,d.exports,t,e,i,s)}return i[n].exports}for(var o="function"==typeof __require&&__require,n=0;n<s.length;n++)a(s[n]);return a}({"XiDzach.CardUtil":[function(t,e,i){"use strict";cc._RF.push(e,"1aac8fFC7BGM4cs2SGAJJN1","XiDzach.CardUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.common=void 0;const{ccclass:s,property:a}=cc._decorator;var o;(function(t){t.CardUtils=class{static getCardInfo(t){this.id=t,this.so=this.getSoById(t),this.chat=this.getChatById(t),this.diem=this.getDiemById(t)}static getSoById(t){return Math.floor(t/4)}static getDiemById(t){return Math.floor(t/4)+1}static getChatById(t){return t%4}static getNormalId(t){var e;return e=4>t?11:8>t?12:Math.floor(t/4)-2,3==(t=Math.floor(t%4))?t=2:2==t&&(t=3),4*e+t}}})(o=i.common||(i.common={})),i.default=o.CardUtils,cc._RF.pop()},{}],"XiDzach.Cmd":[function(t,e,i){"use strict";cc._RF.push(e,"403c4d9o2NANr6BOsuG21Df","XiDzach.Cmd"),Object.defineProperty(i,"__esModule",{value:!0}),i.cmd=void 0;const s=t("../../Main/Game/src/networks/Network.OutPacket"),a=t("../../Main/Game/src/networks/Network.InPacket"),o=t("../../Main/Game/src/common/Configs");var n;(function(t){class e{}e.LOGIN=1,e.TOPSERVER=1001,e.CMD_PINGPONG=1050,e.CMD_JOIN_ROOM=3001,e.CMD_RECONNECT_ROOM=3002,e.MONEY_BET_CONFIG=3003,e.JOIN_ROOM_FAIL=3004,e.CHAT_ROOM=3008,e.CREATE_ROOM=3013,e.GET_LIST_ROOM=3014,e.JOIN_GAME_ROOM_BY_ID=3015,e.SELECT_DEALER=3100,e.MO_BAI=3101,e.BUY_IN=3102,e.KET_THUC=3103,e.CHIA_BAI=3105,e.TU_DONG_BAT_DAU=3107,e.REQUEST_SHOW_CARD=3108,e.REQUEST_BUY_IN=3109,e.THONG_TIN_BAN_CHOI=3110,e.DANG_KY_THOAT_PHONG=3111,e.DOI_CHUONG=3113,e.CHEAT_CARDS=3115,e.DANG_KY_CHOI_TIEP=3116,e.JOIN_ROOM_SUCCESS=3118,e.LEAVE_GAME=3119,e.NOTIFY_KICK_FROM_ROOM=3120,e.NEW_USER_JOIN=3121,e.NOTIFY_USER_GET_JACKPOT=3122,e.UPDATE_MATCH=3123,e.NOTIFY_CHUYEN_GIAI_DOAN_2=3124,e.NOTIFY_CHUYEN_GIAI_DOAN_3=3125,e.SO_BAI=3126,e.RUT_BAI=3128,e.DAN_BAI=3129,e.XET_BAI_ONE=3130,e.XET_BAI_ALL=3131,e.NOTIFY_NO_CHUONG=3132,e.RUT_BAI_TU_DONG=3133,e.NOTIFY_XIZACH=3134,e.CARDS_DEFINE=3999,e.PLAYER_STATUS_OUT_GAME=0,e.PLAYER_STATUS_VIEWER=1,e.PLAYER_STATUS_SITTING=2,e.PLAYER_STATUS_PLAYING=3,e.MAX_PLAYER=6,e.ERROR_MONEY=1,e.ERROR_BAO_TRI=2,t.Code=e,t.CmdLogin=class extends s.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.LOGIN),this.packHeader(),this.putString(t),this.putString(i),this.updateSize()}},t.CmdJoinRoom=class extends s.default{constructor(t,i,s){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CMD_JOIN_ROOM),this.packHeader(),this.putInt(t),this.putInt(i),this.putLong(s),this.putInt(0),this.updateSize()}},t.CmdReconnectRoom=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CMD_RECONNECT_ROOM),this.packHeader(),this.updateSize()}},t.SendRequestLeaveGame=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.DANG_KY_THOAT_PHONG),this.packHeader(),this.updateSize()}},t.CmdSendHoldRoom=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.DANG_KY_CHOI_TIEP),this.packHeader(),this.updateSize()}},t.SendGetGameConfig=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.MONEY_BET_CONFIG),this.packHeader(),this.updateSize()}},t.SendGetTopServer=class extends s.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.TOPSERVER),this.packHeader(),this.putByte(t),this.updateSize()}},t.SendCreateRoom=class extends s.default{constructor(t,i,s,a,o,n,r,h){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CREATE_ROOM),this.packHeader(),this.putInt(t),this.putInt(i),this.putLong(s),this.putInt(a),this.putInt(o),this.putString(n),this.putString(r),this.putLong(h),this.updateSize()}},t.SendCheatCards=class extends s.default{constructor(t,i){if(super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CHEAT_CARDS),this.packHeader(),this.putByte(t),this.putByte(0),this.putShort(i.length),t)for(var s=0;s<i.length;s++)this.putByte(i[s]);this.updateSize()}},t.CmdSendMoBai=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.MO_BAI),this.packHeader(),this.updateSize()}},t.CmdSendPing=class extends s.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CMD_PINGPONG),this.packHeader(),this.updateSize()}},t.SendGetListRoom=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.GET_LIST_ROOM),this.packHeader(),this.putInt(o.default.App.MONEY_TYPE),this.putInt(e.MAX_PLAYER),this.putLong(-1),this.putInt(0),this.putInt(0),this.putInt(50),this.updateSize()}},t.SendJoinRoomById=class extends s.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.JOIN_GAME_ROOM_BY_ID),this.packHeader(),this.putInt(t),this.putString(""),this.updateSize()}},t.SendChatRoom=class extends s.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CHAT_ROOM),this.packHeader(),this.putByte(t?1:0),this.putString(encodeURI(i)),this.updateSize()}},t.SendBuyIn=class extends s.default{constructor(t,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.BUY_IN),this.packHeader(),this.putLong(t),this.putByte(i),this.updateSize()}},t.SendShowCard=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.REQUEST_SHOW_CARD),this.packHeader(),this.updateSize()}},t.sendDanBai=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.DAN_BAI),this.packHeader(),this.updateSize()}},t.sendRutBai=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.RUT_BAI),this.packHeader(),this.updateSize()}},t.sendXetBaiOne=class extends s.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.XET_BAI_ONE),this.packHeader(),this.putByte(t),this.updateSize()}},t.sendXetBaiAll=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.XET_BAI_ALL),this.packHeader(),this.updateSize()}},t.SendCardDefinations=class extends s.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.CARDS_DEFINE),this.packHeader(),this.updateSize()}},t.ReceivedLogin=class extends a.default{constructor(t){super(t)}},t.ReceivedGetListRoom=class extends a.default{constructor(t){super(t),this.list=[];let e=this.getShort();this.list=[];for(var i=0;i<e;i++){let t={};t.id=this.getInt(),t.userCount=this.getByte(),t.limitPlayer=this.getByte(),t.maxUserPerRoom=this.getInt(),t.moneyType=this.getByte(),t.moneyBet=this.getInt(),t.requiredMoney=this.getInt(),t.rule=this.getByte(),t.nameRoom=this.getString(),t.key=this.getBool(),t.quyban=this.getLong(),this.list.push(t)}}},t.ReceivedJoinRoomSucceed=class extends a.default{constructor(t){var e;for(super(t),this.myChair=this.getByte(),this.chuongChair=this.getByte(),this.hasChuong=this.getByte(),this.moneyBet=this.getLong(),this.roomId=this.getInt(),this.matchId=this.getInt(),this.moneyType=this.getByte(),this.rule=this.getByte(),this.playerSize=this.getShort(),this.playerStatus=[],e=0;e<this.playerSize;e++)this.playerStatus.push(this.getByte());for(this.playerSize=this.getShort(),this.playerInfos=[],e=0;e<this.playerSize;e++){var i={};i.nickName=this.getString(),i.avatar=this.getString(),i.money=this.getLong(),this.playerInfos.push(i)}this.gameAction=this.getByte(),this.countDownTime=this.getByte()}},t.ReceivedAutoStart=class extends a.default{constructor(t){super(t),this.isAutoStart=this.getBool(),this.timeAutoStart=this.getByte()}},t.ReceivedChiaBai=class extends a.default{constructor(e){super(e),this.playerStatusList=[],this.getShort();for(var i=0;i<t.Code.MAX_PLAYER;i++)this.playerStatusList.push(this.getByte()),this.playerStatusList[i];for(this.sizeCard=this.getShort(),this.myCards=[],i=0;i<this.sizeCard;i++)this.myCards.push(this.getByte());this.matchId=this.getInt(),this.chuongChair=this.getByte(),this.timeChiaBai=this.getByte()}},t.ReceivedUserLeaveRoom=class extends a.default{constructor(t){super(t),this.chair=this.getByte(),this.nickName=this.getString()}},t.ReceivedUserJoinRoom=class extends a.default{constructor(t){super(t),this.info={},this.info.nickName=this.getString(),this.info.avatar=this.getString(),this.info.money=this.getLong(),this.uChair=this.getByte(),this.uStatus=this.getByte()}},t.ReceivedUpdateMatch=class extends a.default{constructor(t){super(t),this.myChair=this.getByte();var e=this.getShort();this.hasInfo=[];for(var i=0;i<e;i++)this.hasInfo.push(this.getBool());for(this.infos=[],i=0;i<e;i++){var s={};this.hasInfo[i]&&(s.nickName=this.getString(),s.avatar=this.getString(),s.money=this.getLong(),s.status=this.getInt()),this.infos.push(s)}}},t.ReceivedXiDzachConfig=class extends a.default{constructor(t){super(t),this.listSize=this.getShort(),this.list=[];for(var e=0;e<this.listSize;e++){var i={};i.maxUserPerRoom=this.getByte(),i.moneyType=this.getByte(),i.moneyBet=this.getLong(),i.moneyRequire=this.getLong(),i.nPersion=this.getInt(),this.list.push(i)}}},t.ReceivedNotifyRegOutRoom=class extends a.default{constructor(t){super(t),this.outChair=this.getByte(),this.isOutRoom=this.getBool()}},t.ReceivedKickOff=class extends a.default{constructor(t){super(t),this.reason=this.getByte()}},t.ReceivedMoBai=class extends a.default{constructor(t){super(t),this.chairMoBai=this.getByte(),this.cardSize=this.getShort(),this.cards=[];for(var e=0;e<this.cardSize;e++)this.cards.push(this.getByte())}},t.ReceivedEndGame=class extends a.default{constructor(e){super(e),this.playerStatusList=[],this.listCards=[];for(var i=this.getShort(),s=" ",a=0;a<i;a++)this.playerStatusList.push(this.getInt()),s+=" "+this.playerStatusList[a];for(a=0;a<i;a++){if(this.playerStatusList[a]==t.Code.PLAYER_STATUS_PLAYING){s=[];for(var o=this.getShort(),n=0;n<o;n++)s.push(this.getByte()),s[n]}else s=[];this.listCards.push(s)}for(this.tongTienThangThua=this.getLong(),this.winMoneyList=[],i=this.getShort(),a=0;a<i;a++)this.winMoneyList.push(this.getLong());for(this.currentMoneyList=[],i=this.getShort(),a=0;a<i;a++)this.currentMoneyList.push(this.getLong());for(i=this.getShort(),this.needShowWinLostMoney=[],a=0;a<i;a++)this.needShowWinLostMoney.push(this.getByte())}},t.ReceivedDoiChuong=class extends a.default{constructor(t){super(t),this.chuongChair=this.getByte()}},t.ReceivedChatRoom=class extends a.default{constructor(t){super(t),this.chair=this.getByte(),this.isIcon=this.getBool(),this.content=decodeURI(this.getString()),this.nickname=this.getString()}},t.ReceivedGameInfo=class extends a.default{constructor(t){super(t),this.myChair=this.getByte(),this.chuongChair=this.getByte(),this.gameServerState=this.getByte(),this.isAutoStart=this.getByte(),this.gameAction=this.getByte(),this.countDownTime=this.getByte(),this.moneyType=this.getByte(),this.moneyBet=this.getLong(),this.matchId=this.getInt(),this.roomId=this.getInt();var i=" ";this.playerStatusSize=this.getShort(),this.playerStatusList=[];for(var s=0;s<this.playerStatusSize;s++)this.playerStatusList.push(this.getInt()),i=i+" "+this.playerStatusList[s];for(this.playerInfoList=[],s=0;s<e.MAX_PLAYER;s++)0<this.playerStatusList[s]?((i={}).status=this.getByte(),i.currentMoney=this.getLong(),i.avatarUrl=this.getString(),i.nickName=this.getString()):((i={}).currentMoney=0,i.status=0,i.avatarUrl="",i.nickName=""),this.playerInfoList.push(i);for(this.cardPlayerList=[],s=0;s<e.MAX_PLAYER;s++){if(i=[],this.playerStatusList[s]==e.PLAYER_STATUS_PLAYING)for(var a=this.getShort(),o=0;o<a;o++)i.push(this.getByte());if(this.cardPlayerList.push(i),0<i.length)for(a=0;a<i.length;a++)i[a]}for(s=0;s<e.MAX_PLAYER;s++)this.playerInfoList[s].hasDanBai=this.playerStatusList[s]==e.PLAYER_STATUS_PLAYING&&this.getByte()}},t.ReceivedTopServer=class extends a.default{constructor(t){super(t),this.rankType=this.getByte(),this.topDay_money=this.getString(),this.topWeek_money=this.getString(),this.topMonth_money=this.getString(),this.topDay_number=this.getString(),this.topWeek_number=this.getString(),this.topMonth_number=this.getString()}},t.ReceivedJoinRoomFail=class extends a.default{constructor(t){super(t)}},t.ReceivedChuyenGiaiDoan2=class extends a.default{constructor(t){super(t),this.countDownTime=this.getByte()}},t.ReceivedChuyenGiaiDoan3=class extends a.default{constructor(t){super(t),this.countDownTime=this.getByte(),this.sizeCard=this.getShort(),this.chuongCards=[];for(var e=0;e<this.sizeCard;e++)this.chuongCards.push(this.getByte())}},t.ReceivedRutCard=class extends a.default{constructor(t){super(t),this.chair=this.getByte(),this.card=this.getByte()}},t.ReceivedDanBai=class extends a.default{constructor(t){super(t),this.chair=this.getByte()}},t.ReceivedRutBaiTuDong=class extends a.default{constructor(t){super(t),this.chair=this.getByte(),this.cardSize=this.getShort(),this.cards=[];for(var e=0;e<this.cardSize;e++)this.cards.push(this.getByte()),this.cards[e]}},t.ReceivedSoBai=class extends a.default{constructor(t){if(super(t),this.chair1=this.getByte(),this.chair2=this.getByte(),this.winMoney1=this.getLong(),this.winMoney2=this.getLong(),this.currentMoney1=this.getLong(),this.currentMoney2=this.getLong(),this.hasCard1=this.getByte(),this.card1=[],this.hasCard2=this.getByte(),this.card2=[],this.hasCard1){var e="";this.cardSize1=this.getShort();for(var i=0;i<this.cardSize1;i++)this.card1.push(this.getByte()),e=e+" "+this.card1[i]}if(this.hasCard2)for(e="",this.cardSize2=this.getShort(),i=0;i<this.cardSize2;i++)this.card2.push(this.getByte()),e=e+" "+this.card2[i]}},t.ReceivedKetQuaXiZach=class extends a.default{constructor(e){super(e);var i=this.getShort(),s="";this.needShowList=[];for(var a=0;a<i;a++)this.needShowList.push(this.getByte()),s+=" "+this.needShowList[a];for(i=this.getShort(),this.needUpdateMoneyList=[],s="",a=0;a<i;a++)this.needUpdateMoneyList.push(this.getByte()),s+=" "+this.needUpdateMoneyList[a];for(this.currentMoneyList=[],this.winMoneyList=[],this.listCards=[],a=0;a<t.Code.MAX_PLAYER;a++)if(this.needShowList[a]){s=[],i=this.getShort();for(var o=0;o<i;o++)s.push(this.getByte());this.listCards.push(s)}else this.listCards.push([]);for(s=this.getShort(),a=0;a<s;a++)this.winMoneyList.push(this.getLong());for(s=this.getShort(),a=0;a<s;a++)this.currentMoneyList.push(this.getLong())}},t.ReceivedKetQuaSoBai=class extends a.default{constructor(t){super(t),this.chair1=this.getByte(),this.chair2=this.getByte(),this.chair1WinMoney=this.getLong(),this.chair2WinMoney=this.getLong(),this.chair1CurrentMoney=this.getLong(),this.chair2CurrentMoney=this.getLong(),this.hasCard1=this.getByte(),this.hasCard2=this.getByte(),this.card1Size=this.getShort(),this.card1=[];for(var e=0;e<this.card1Size;e++)this.card1.push(this.getByte());for(this.card2Size=this.getShort(),this.card2=[],e=0;e<this.card2Size;e++)this.card2.push(this.getByte());this.isXiZach=this.getByte()}},t.ReceivedCardDefinations=class extends a.default{constructor(t){super(t),this.strData=this.getString()}}})(n=i.cmd||(i.cmd={})),i.default=n,cc._RF.pop()},{"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"../../Main/Game/src/networks/Network.OutPacket":void 0}],"XiDzach.Controller":[function(t,e,i){"use strict";cc._RF.push(e,"048dbB59SJP47YkNotQ5dk6","XiDzach.Controller");var s,a=this&&this.__decorate||function(t,e,i,s){var a,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(o<3?a(n):o>3?a(e,i,n):a(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../Main/Game/src/common/BroadcastReceiver"),n=t("../../Main/Game/src/common/Utils"),r=t("../../Main/Game/src/common/App"),h=t("../../Main/Game/src/networks/Network.InPacket"),c=t("../../Main/Game/src/networks/Network.Cmd"),d=t("../../Main/Game/src/common/Configs"),l=t("./XiDzach.Cmd"),u=t("./XiDzach.NetworkClient"),g=t("./XiZachGroupCard"),f=t("../../Main/Game/src/networks/CardGame.Cmd"),p=t("../../Main/Game/src/games/cardgames/PopupCardDefinations"),C=t("../../Main/Game/src/games/cardgames/PopupChatInGame"),y=t("./XiDzach.Player"),m=t("../../Main/Game/src/games/cardgames/ItemRoom"),v=t("../../Main/Game/src/games/cardgames/PopupSettingInGame");var R=[];let N=[[0,1,2,3,4,5],[1,2,3,4,5,0],[2,3,4,5,0,1],[3,4,5,0,1,2],[4,5,0,1,2,3],[5,0,1,2,3,4]];const{ccclass:I,property:S}=cc._decorator;let _=s=class extends cc.Component{constructor(){super(...arguments),this.UI_ChooseRoom=null,this.labelNickName=null,this.labelCoin=null,this.sprAvatar=null,this.prefabItemRoom=null,this.scrollListRoom=null,this.UI_Playing=null,this.meCards=null,this.groupPlayers=null,this.spriteCards=[],this.spriteCardBack=null,this.cardsDeal=null,this.btnNhaCai=null,this.btnNhaCon=null,this.labelRoomId=null,this.labelRoomBet=null,this.labelMatchId=null,this.actionBetting=null,this.cardsRut=null,this.notifyTimeStart=null,this.notifyTimeEnd=null,this.notifyHand=null,this.notifyHand2=null,this.labelBettingCountDown=null,this.popupNodity=null,this.labelNotifyContent=null,this.popupGuide=null,this.btnShowCardDefinations=null,this.effectWin=null,this.effectDraw=null,this.effectLose=null,this.isInitedUIRoom=!1,this.seatOwner=null,this.seconds=null,this.timeAutoStart=null,this.timeEnd=null,this.timeBet=null,this.intervalWaitting=null,this.intervalEnd=null,this.intervalBetting=null,this.currentCard=null,this.numCardOpened=0,this.seatXiDzachOrXiBang=null,this.isExistMeInfo=null,this.cardDefinations=null,this.listRoom=[],this.isClickBack=!1}onLoad(){s.instance=this,this.initConfigPlayer()}start(){this.isClickBack=!1,this.seatOwner=-1,this.seatXiDzachOrXiBang=-1,this.isExistMeInfo=!0,this.currentCard=[],this.UI_Playing.active=!1,this.showUIRooms(),r.default.instance.showErrLoading("\u0110ang k\u1ebft n\u1ed1i t\u1edbi server..."),u.default.getInstance().addOnOpen(()=>{r.default.instance.showErrLoading("\u0110ang \u0111ang \u0111\u0103ng nh\u1eadp..."),u.default.getInstance().send(new c.default.SendLogin(d.default.Login.Nickname,d.default.Login.AccessToken))},this),u.default.getInstance().addOnClose(()=>{this.isClickBack||!d.default.Login.IsLogin?this.backToLobby():r.default.instance.alertDialog.showMsgWithOnDismissed("B\u1ea1n \u0111\xe3 m\u1ea5t k\u1ebft n\u1ed1i v\u1edbi server",()=>{this.backToLobby()})},this),u.default.getInstance().connect(),o.default.register(o.default.USER_DISCONNECTED,()=>{u.default.getInstance().close()},this),o.default.send(o.default.SET_SOUND,cc.find("Canvas"))}onDestroy(){this.unschedule(this.intervalWaitting),this.unschedule(this.intervalEnd),this.unschedule(this.intervalBetting)}initRooms(t){this.listRoom=[],this.scrollListRoom.content.removeAllChildren(),[...new Set(t)].filter(t=>t.moneyType===d.default.App.MONEY_TYPE).map(t=>t.moneyBet).forEach((e,i)=>{let s=0,a=0,o=0;t.forEach(t=>{t.moneyBet===e&&(s+=t.nPersion,a=t.maxUserPerRoom,o=t.moneyRequire)}),this.listRoom.push(new m.RoomItemInfo(i+1,e,o,s,a))}),this.listRoom.sort((t,e)=>t.moneyBet-e.moneyBet),this.listRoom.forEach((t,e)=>{const i=cc.instantiate(this.prefabItemRoom);i.getComponent(m.default).initItem(t),i.on(cc.Node.EventType.TOUCH_END,()=>{d.default.Login.Coin<t.requiredMoney?r.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{r.default.instance.openShop(0)}):u.default.getInstance().send(new f.default.SendJoinRoom(d.default.App.MONEY_TYPE,t.maxUserPerRoom,t.moneyBet,0))}),i.parent=this.scrollListRoom.content,i.y=-30;let s=.2*.7*(1===e?.8:1-Math.pow(2,-10*e));i.runAction(cc.sequence(cc.fadeOut(0),cc.delayTime(.105*(this.listRoom.length-e)),cc.spawn(cc.fadeIn(s),cc.moveTo(s,cc.v2(0,-30-85*e)).easing(cc.easeCircleActionOut()))))}),this.scrollListRoom.scrollToBottom(0),this.scrollListRoom.scrollToTop(2)}refeshListRoom(){this.scrollListRoom.content.removeAllChildren(!0),u.default.getInstance().send(new f.default.SendMoneyBetConfig)}showUIRooms(){this.UI_ChooseRoom.active=!0,this.isInitedUIRoom?o.default.send(o.default.USER_UPDATE_COIN):(this.isInitedUIRoom=!0,this.sprAvatar.spriteFrame=r.default.instance.getAvatarSpriteFrame(d.default.Login.Avatar),this.labelNickName.string=d.default.Login.Nickname,o.default.register(o.default.USER_UPDATE_COIN,()=>{this.labelCoin.string=n.default.formatNumber(d.default.Login.Coin)},this),o.default.send(o.default.USER_UPDATE_COIN),this.setupListener())}closeUIRoom(){this.UI_ChooseRoom.active=!1}playingNow(){let t=this.listRoom.filter(t=>t.requiredMoney<=d.default.Login.Coin);if(t.length<=0)return void r.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{r.default.instance.openShop(0)});let e=t[n.default.randomRangeInt(0,t.length)];u.default.getInstance().send(new f.default.SendJoinRoom(d.default.App.MONEY_TYPE,e.maxUserPerRoom,e.moneyBet,0))}showPopupGuide(){this.popupGuide.active=!0}closePopupGuide(){this.popupGuide.active=!1}actBack(){this.isClickBack=!0,u.default.getInstance().close()}backToLobby(){r.default.instance.loadScene("Lobby")}showUIPlaying(){this.disableEffects(),this.UI_Playing.active=!0}closeUIPlaying(){this.actionLeaveRoom()}setupMatch(t){this.showUIPlaying();let e=t.chuongChair,i=(t.hasChuong,t.countDownTime,t.gameAction,t.matchId),s=t.moneyBet,a=(t.moneyType,t.myChair),o=t.playerInfos,r=(t.playerSize,t.playerStatus),h=t.roomId;t.rule,this.labelRoomId.string=h+"",this.labelRoomBet.string=n.default.formatNumber(s),this.labelMatchId.string=i+"",R[0].playerId=d.default.Login.Nickname,R[0].playerPos=a;var c=[],u=[],g=[];for(let n=0;n<o.length;n++)""!==o[n].nickName&&(c.push(n),u.push(o[n]),g.push(r[n]));for(let n=0;n<R.length;n++)R[n].playerPos=N[a][n];for(let n=0;n<R.length;n++){let t=c.indexOf(R[n].playerPos);var f=R[n].seatId;this.getPlayerHouse(f).resetPlayerInfo(),t>-1?(g[t]==l.default.Code.PLAYER_STATUS_SITTING||g[t]==l.default.Code.PLAYER_STATUS_PLAYING?(R[n].isViewer=!1,this.getPlayerHouse(f).setIsViewer(!1)):(R[n].isViewer=!0,this.getPlayerHouse(f).setIsViewer(!0),this.getPlayerHouse(f).playFxViewer()),this.setupSeatPlayer(f,u[t])):R[n].isViewer=!0}for(let n=0;n<l.default.Code.MAX_PLAYER;n++)this.getPlayerHouse(n).setOwner(!1);let p=this.findPlayerSeatByPos(e);-1!==p&&(this.getPlayerHouse(p).setOwner(!0),this.seatOwner=p)}startWaittingCountDown(t){this.timeAutoStart=t,this.setTimeWaittingCountDown(),this.notifyTimeStart.parent.active=!0,this.unschedule(this.intervalWaitting),this.schedule(this.intervalWaitting=()=>{this.timeAutoStart--,this.setTimeWaittingCountDown(),this.timeAutoStart<1&&(this.unschedule(this.intervalWaitting),this.notifyTimeStart.parent.active=!1)},1)}setTimeWaittingCountDown(){this.seconds=Math.floor(this.timeAutoStart%60),this.notifyTimeStart.getComponent(cc.Label).string=" B\u1eaft \u0111\u1ea7u sau : "+this.seconds+"s "}startEndCountDown(t){this.timeEnd=t,this.setTimeEndCountDown(),this.notifyTimeEnd.parent.active=!0,this.unschedule(this.intervalEnd),this.schedule(this.intervalEnd=()=>{this.timeEnd--,this.setTimeEndCountDown(),this.timeEnd<1&&(this.unschedule(this.intervalEnd),this.notifyTimeEnd.parent.active=!1)},1)}setTimeEndCountDown(){this.seconds=Math.floor(this.timeEnd%60),this.notifyTimeEnd.getComponent(cc.Label).string=" K\u1ebft th\xfac sau : "+this.seconds+"s "}startBettingCountDown(t,e){this.timeBet=t,this.actionBetting.active=!0,this.labelBettingCountDown.string=e,this.processBetting(1),this.unschedule(this.intervalBetting),this.schedule(this.intervalBetting=()=>{this.timeBet--;var e=(this.timeBet/t).toFixed(1);this.processBetting(e),this.timeBet<1&&(this.unschedule(this.intervalBetting),this.actionBetting.active=!1)},1)}processBetting(t){this.actionBetting.children[1].getComponent(cc.Sprite).fillRange=t}openMeCard(t,e){let i=parseInt(e);this.getPlayerHouse(0).prepareCardReal(i);let s=this.currentCard[i];this.getPlayerHouse(0).transformToCardReal(i,this.spriteCards[s]),this.numCardOpened+=1,3==this.numCardOpened&&(this.btnNhaCai.active=!0,this.btnNhaCon.active=!1,this.getPlayerHouse(0).showCardName(new g.default(this.currentCard)),this.scheduleOnce(()=>{this.getPlayerHouse(0).resetCardReady()},.2))}fxMoveChips(t,e,i,s){t.runAction(cc.sequence(cc.delayTime(e),cc.scaleTo(0,1,1),cc.spawn(cc.moveTo(.8,i,s),cc.scaleTo(.8,0,0))))}setCanRutBai(t){this.cardsRut.getComponent(cc.Button).interactable=t}setupListener(){u.default.getInstance().addListener(t=>{let e=new h.default(t);switch(e.getCmdId()){case l.default.Code.LOGIN:r.default.instance.showLoading(!1),this.refeshListRoom(),u.default.getInstance().send(new l.default.CmdReconnectRoom);break;case l.default.Code.TOPSERVER:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedTopServer(t);cc.log(e)}break;case l.default.Code.CMD_PINGPONG:r.default.instance.showLoading(!1),cc.log("XiDzach CMD_PINGPONG");break;case l.default.Code.CMD_JOIN_ROOM:r.default.instance.showLoading(!1),cc.log("XiDzach CMD_JOIN_ROOM");break;case l.default.Code.CMD_RECONNECT_ROOM:r.default.instance.showLoading(!1),cc.log("XiDzach CMD_RECONNECT_ROOM");break;case l.default.Code.MONEY_BET_CONFIG:{r.default.instance.showLoading(!1);let e=new f.default.ResMoneyBetConfig(t);cc.log(e),this.initRooms(e.list)}break;case l.default.Code.JOIN_ROOM_FAIL:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedJoinRoomFail(t);cc.log("XiDzach JOIN_ROOM_FAIL res : ",JSON.stringify(e));let i="L\u1ed7i "+e.getError()+", kh\xf4ng x\xe1c \u0111\u1ecbnh.";switch(e.getError()){case 1:i="L\u1ed7i ki\u1ec3m tra th\xf4ng tin!";break;case 2:i="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 3:i="B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n v\xe0o ph\xf2ng ch\u01a1i n\xe0y!";break;case 4:i="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 5:i="M\u1ed7i l\u1ea7n v\xe0o ph\xf2ng ph\u1ea3i c\xe1ch nhau 10 gi\xe2y!";break;case 6:i="H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!";break;case 7:i="Kh\xf4ng t\xecm th\u1ea5y ph\xf2ng ch\u01a1i!";break;case 8:i="M\u1eadt kh\u1ea9u ph\xf2ng ch\u01a1i kh\xf4ng \u0111\xfang!";break;case 9:i="Ph\xf2ng ch\u01a1i \u0111\xe3 \u0111\u1ee7 ng\u01b0\u1eddi!";break;case 10:i="B\u1ea1n b\u1ecb ch\u1ee7 ph\xf2ng kh\xf4ng cho v\xe0o b\xe0n!"}r.default.instance.alertDialog.showMsg(i)}break;case l.default.Code.GET_LIST_ROOM:{let e=new l.default.ReceivedGetListRoom(t);cc.log(e)}break;case l.default.Code.JOIN_GAME_ROOM_BY_ID:r.default.instance.showLoading(!1),cc.log("XiDzach JOIN_GAME_ROOM_BY_ID");break;case l.default.Code.MO_BAI:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedMoBai(t);cc.log("XiDzach ReceivedMoBai res : ",JSON.stringify(e));let i=e.chairMoBai,s=e.cards,a=this.findPlayerSeatByPos(i);if(-1!=a&&0!=a){this.getPlayerHouse(a).prepareToTransform();for(let t=0;t<3;t++){let e=s[t];this.getPlayerHouse(a).transformToCardReal(t,this.spriteCards[e])}this.getPlayerHouse(a).showCardName(new g.default(s))}}break;case l.default.Code.BUY_IN:r.default.instance.showLoading(!1),cc.log("XiDzach BUY_IN");break;case l.default.Code.KET_THUC:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedEndGame(t);cc.log("XiDzach ReceivedEndGame res : ",JSON.stringify(e)),this.unschedule(this.intervalBetting),this.actionBetting.active=!1,e.playerStatusList;let s=e.listCards,a=(e.tongTienThangThua,e.winMoneyList),n=e.currentMoneyList,h=e.needShowWinLostMoney;this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.notifyHand.active=!1,this.notifyHand2.active=!1,this.setCanRutBai(!1);for(let t=0;t<l.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).hideFxCombineState(!1);for(let t=0;t<l.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).showBtnXeBaiOne(!1);let c=[];for(let t=0;t<l.default.Code.MAX_PLAYER;t++)1==h[t]&&c.push(t);for(let t=0;t<c.length;t++){let e=this.findPlayerSeatByPos(c[t]);-1!=e&&this.getPlayerHouse(e).hideFxWinLose()}for(let t=0;t<l.default.Code.MAX_PLAYER;t++){let e=c.indexOf(R[t].playerPos);if(-1===e)continue;let r=s[c[e]];if(r.length>0)for(let i=0;i<5;i++)if(i<r.length){let e=r[i];this.getPlayerHouse(t).openCardRealNow(i,this.spriteCards[e])}else this.getPlayerHouse(t).hideCardRealNow(i);var i=new g.default(r);this.getPlayerHouse(t).showCardName(i);let h={moneyChange:a[c[e]],money:n[c[e]]};0==t&&(d.default.Login.Coin=n[c[e]],o.default.send(o.default.USER_UPDATE_COIN),this.showResultEffect(h.moneyChange)),h.moneyChange>=0?this.getPlayerHouse(t).fxWin(h):h.moneyChange<0&&this.getPlayerHouse(t).fxLose(h)}}break;case l.default.Code.CHIA_BAI:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedChiaBai(t);cc.log("XiDzach ReceivedChiaBai res : ",JSON.stringify(e)),e.playerStatusList,e.sizeCard;let i=e.myCards,s=e.matchId,a=e.chuongChair,o=e.timeChiaBai;this.labelMatchId.string=s+"",this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.cardsRut.active=!1;for(let t=0;t<l.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).setOwner(!1);let n=this.findPlayerSeatByPos(a);-1!==n&&(this.getPlayerHouse(n).setOwner(!0),this.seatOwner=n),this.scheduleOnce(()=>{this.startBettingCountDown(o,"Ng\u01b0\u1eddi Ch\u01a1i R\xfat B\xe0i")},2),this.currentCard=i;let h=(p=this.getNumPlayers()).length;for(let t=0;t<2*l.default.Code.MAX_PLAYER;t++)this.cardsDeal.children[t].active=!(t>=2*h),this.cardsDeal.children[t].setPosition(cc.v2(0,0));let c=.1;for(let t=0;t<2;t++)for(let e=0;e<h;e++){let i=p[e];if(-1!==i){let s=this.cardsDeal.children[t*h+e],a=this.groupPlayers.children[i].getPosition();s.runAction(cc.sequence(cc.delayTime((t*h+e)*c),cc.moveTo(.2,a)))}}let d=.4+(2*h+(h-1))*c;this.scheduleOnce(()=>{for(let i=0;i<2*l.default.Code.MAX_PLAYER;i++)this.cardsDeal.children[i].active=!1;for(let i=0;i<h;i++){let t=p[i];if(-1!==t&&(0==t&&this.getPlayerHouse(t).resetCardReady(),this.getPlayerHouse(t).showCardReady(!0),this.getPlayerHouse(t).showCardReal(!1),0!=t)){t!=n&&this.getPlayerHouse(t).playFxDangXep();for(let e=2;e<5;e++)this.getPlayerHouse(t).hideCardRealNow(e)}}for(let s=0;s<2;s++){let t=i[s];this.getPlayerHouse(0).prepareToTransform(),this.getPlayerHouse(0).transformToCardReal(s,this.spriteCards[t])}for(let i=2;i<5;i++)this.getPlayerHouse(0).hideCardRealNow(i);let t=this.findPlayerSeatByPos(a);if(-1!=t?(this.btnNhaCai.active=!1,this.btnNhaCon.active=0!=t):(this.btnNhaCai.active=!1,this.btnNhaCon.active=!1),i.length>0){var e=new g.default(i);e.isQuac()&&(this.setCanRutBai(!1),this.notifyHand.active=!1,this.notifyHand2.active=!1,this.unschedule(this.intervalBetting),this.actionBetting.active=!1),this.getPlayerHouse(0).showCardName(e)}},d)}break;case l.default.Code.TU_DONG_BAT_DAU:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedAutoStart(t);cc.log("XiDzach ReceiveAutoStart res : ",JSON.stringify(e)),e.isAutoStart&&(this.disableEffects(),this.startWaittingCountDown(e.timeAutoStart),this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.btnNhaCon.getComponent(cc.Button).interactable=!0,this.resetPlayersPlaying(),this.seatXiDzachOrXiBang=-1,this.isExistMeInfo=!0,this.currentCard=[])}break;case l.default.Code.THONG_TIN_BAN_CHOI:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedGameInfo(t);cc.log("XiDzach ReceivedGameInfo res : ",JSON.stringify(e)),this.closeUIRoom(),this.showUIPlaying();let i=e.myChair,o=e.chuongChair,h=(e.gameServerState,e.isAutoStart,e.gameAction,e.countDownTime,e.moneyType,e.moneyBet),c=e.matchId,u=e.roomId,g=(e.playerStatusSize,e.playerStatusList),f=e.playerInfoList,p=e.cardPlayerList;this.labelRoomId.string=u+"",this.labelRoomBet.string=n.default.formatNumber(h),this.labelMatchId.string=c+"",0==f[i].length?this.isExistMeInfo=!1:this.isExistMeInfo=!0,this.currentCard=p[i],R[0].playerId=d.default.Login.Nickname,R[0].playerPos=i;var s=[];for(let t=0;t<g.length;t++)g[t]>0&&s.push(t);for(let t=0;t<R.length;t++)R[t].playerPos=N[i][t];for(let t=0;t<R.length;t++){let e=s.indexOf(R[t].playerPos);var a=R[t].seatId;this.getPlayerHouse(a).resetPlayerInfo(),e>-1?(g[e]==l.default.Code.PLAYER_STATUS_PLAYING?(this.getPlayerHouse(a).setIsViewer(!1),R[t].isViewer=!1):(this.getPlayerHouse(a).setIsViewer(!0),this.getPlayerHouse(a).playFxViewer(),R[t].isViewer=!0),this.setupSeatPlayer(a,{nickName:f[e].nickName,avatar:f[e].avatarUrl,money:f[e].currentMoney})):R[t].isViewer=!0}for(let t=0;t<l.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).setOwner(!1);let C=this.findPlayerSeatByPos(o);-1!==C&&(this.getPlayerHouse(C).setOwner(!0),this.seatOwner=C)}break;case l.default.Code.DANG_KY_THOAT_PHONG:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedNotifyRegOutRoom(t);cc.log("XiDzach ReceivedNotifyRegOutRoom res : ",JSON.stringify(e));let i=e.outChair,s=this.findPlayerSeatByPos(i);-1!==s&&this.getPlayerHouse(s).showNotify(e.isOutRoom)}break;case l.default.Code.DOI_CHUONG:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedDoiChuong(t);cc.log("XiDzach ReceivedDoiChuong res : ",JSON.stringify(e));for(let t=0;t<l.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).setOwner(!1);let i=this.findPlayerSeatByPos(e.chuongChair);-1!=i&&(this.getPlayerHouse(i).setOwner(!0),this.seatOwner=i)}break;case l.default.Code.CHEAT_CARDS:r.default.instance.showLoading(!1),cc.log("XiDzach CHEAT_CARDS");break;case l.default.Code.DANG_KY_CHOI_TIEP:r.default.instance.showLoading(!1),cc.log("XiDzach DANG_KY_CHOI_TIEP");break;case l.default.Code.JOIN_ROOM_SUCCESS:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedJoinRoomSucceed(t);cc.log(e),this.closeUIRoom(),this.setupMatch(e),this.getCardDefinations()}break;case l.default.Code.LEAVE_GAME:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedUserLeaveRoom(t);cc.log("XiDzach ReceivedUserLeaveRoom res : ",JSON.stringify(e));let i=e.chair,s=this.findPlayerSeatByPos(i);if(-1!==s){for(let t=0;t<R.length;t++)R[t].seatId==s&&(R[t].playerId=-1,R[t].isViewer=!0);this.getPlayerHouse(s).resetPlayerInfo(),1==this.getNumPlayers().length&&this.resetPlayersPlaying(),0==s&&(this.UI_Playing.active=!1,this.UI_ChooseRoom.active=!0,this.refeshListRoom())}}break;case l.default.Code.NOTIFY_KICK_FROM_ROOM:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedKickOff(t);cc.log("XiDzach ReceivedKickOff res : ",JSON.stringify(e)),this.onKickFromRoom(e.reason)}break;case l.default.Code.NEW_USER_JOIN:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedUserJoinRoom(t);cc.log("XiDzach ReceivedUserJoinRoom res : ",JSON.stringify(e));let i=e.info,s=e.uChair,o=e.uStatus;for(let t=0;t<R.length;t++)if(R[t].playerPos==s){a=R[t].seatId,this.getPlayerHouse(a).resetPlayerInfo();var c={avatar:i.avatar,nickName:i.nickName,money:i.money};this.setupSeatPlayer(a,c),o==l.default.Code.PLAYER_STATUS_VIEWER?(R[a].isViewer=!0,this.getPlayerHouse(a).setIsViewer(!0),this.getPlayerHouse(a).playFxViewer()):(R[a].isViewer=!1,this.getPlayerHouse(a).setIsViewer(!1))}}break;case l.default.Code.NOTIFY_USER_GET_JACKPOT:r.default.instance.showLoading(!1),cc.log("XiDzach NOTIFY_USER_GET_JACKPOT");break;case l.default.Code.UPDATE_MATCH:{r.default.instance.showLoading(!1),this.actionBetting.active=!1;let e=new l.default.ReceivedUpdateMatch(t);cc.log("XiDzach ReceivedUpdateMatch res : ",JSON.stringify(e)),e.myChair;let i=e.hasInfo,s=e.infos;for(let t=0;t<i.length;t++){let e=R[t].playerPos;i[e]?(this.getPlayerHouse(t).setGold(s[e].money),R[t].playerId=s[e].nickName,s[e].status==l.default.Code.PLAYER_STATUS_SITTING||s[e].status==l.default.Code.PLAYER_STATUS_PLAYING?(R[t].isViewer=!1,this.getPlayerHouse(t).setIsViewer(!1)):(R[t].isViewer=!0,this.getPlayerHouse(t).setIsViewer(!0),this.getPlayerHouse(t).playFxViewer()),this.setupSeatPlayer(t,s[e])):(R[t].playerId=-1,R[t].isViewer=!0)}}break;case l.default.Code.CHAT_ROOM:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedChatRoom(t);cc.log("XiDzach CHAT_ROOM res : ",JSON.stringify(e));let i=e.chair,s=e.isIcon,a=e.content;if(s){let t=this.findPlayerSeatByPos(i);-1!=t&&this.getPlayerHouse(t).showChatEmotion(a)}else{let t=this.findPlayerSeatByPos(i);-1!=t&&this.getPlayerHouse(t).showChatMsg(a)}}break;case l.default.Code.NOTIFY_CHUYEN_GIAI_DOAN_2:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedChuyenGiaiDoan2(t);cc.log("XiDzach NOTIFY_CHUYEN_GIAI_DOAN_2 res : ",JSON.stringify(e)),-1!=this.seatXiDzachOrXiBang?0==this.seatXiDzachOrXiBang?(this.notifyHand.active=!1,this.notifyHand2.active=!1,this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.setCanRutBai(!1),this.cardsRut.active=!0):this.seatXiDzachOrXiBang==this.seatOwner?(this.notifyHand.active=!1,this.notifyHand2.active=!1,this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.setCanRutBai(!1),this.cardsRut.active=!0):(this.btnNhaCon.active=!0,this.btnNhaCai.active=!1,this.notifyHand.active=!0,this.notifyHand2.active=!0,this.setCanRutBai(!0),this.cardsRut.active=!0):this.isExistMeInfo?0==this.seatOwner?(this.notifyHand.active=!1,this.notifyHand2.active=!1,this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.setCanRutBai(!1),this.cardsRut.active=!0):(this.btnNhaCon.active=!0,this.btnNhaCai.active=!1,this.notifyHand.active=!0,this.notifyHand2.active=!0,this.setCanRutBai(!0),this.cardsRut.active=!0):(this.notifyHand.active=!1,this.notifyHand2.active=!1,this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.setCanRutBai(!1),this.cardsRut.active=!0)}break;case l.default.Code.NOTIFY_CHUYEN_GIAI_DOAN_3:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedChuyenGiaiDoan3(t);cc.log("XiDzach NOTIFY_CHUYEN_GIAI_DOAN_3 res : ",JSON.stringify(e));let i=e.countDownTime,s=(e.sizeCard,e.chuongCards);if(this.unschedule(this.intervalBetting),this.startBettingCountDown(i,"Nh\xe0 C\xe1i R\xfat B\xe0i"),-1!=this.seatOwner)for(let t=0;t<5;t++)if(t<s.length){let e=s[t];this.getPlayerHouse(this.seatOwner).openCardRealNow(t,this.spriteCards[e])}else this.getPlayerHouse(this.seatOwner).hideCardRealNow(t);if(0==this.seatOwner){var p;this.cardsRut.active=!0,this.notifyHand.active=!0,this.notifyHand2.active=!0,this.setCanRutBai(!0),this.btnNhaCon.active=!1,this.btnNhaCai.active=!0;let t=(p=this.getNumPlayers()).length;for(let e=0;e<t;e++)-1!=p[e]&&0!=p[e]&&this.getPlayerHouse(p[e]).showBtnXeBaiOne(!0)}else this.cardsRut.active=!1,this.notifyHand.active=!1,this.notifyHand2.active=!1,this.setCanRutBai(!1),this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.getPlayerHouse(this.seatOwner).playFxDangXep()}break;case l.default.Code.RUT_BAI:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedRutCard(t);cc.log("XiDzach RUT_BAI res : ",JSON.stringify(e));let s=e.chair,a=e.card,o=this.findPlayerSeatByPos(s);if(-1!=o){0==o&&cc.log("XiDzach RUT_BAI me rut res : ",JSON.stringify(e));let t=this.getPlayerHouse(o).getRealCardCanUse();if(0==s&&0==a);else if(52==a)this.getPlayerHouse(o).openCardRealNow(t,this.spriteCardBack);else{let e=a;this.getPlayerHouse(o).openCardRealNow(t,this.spriteCards[e]),0==o&&(this.currentCard.push(a),(i=new g.default(this.currentCard)).isQuac()&&(this.setCanRutBai(!1),this.notifyHand.active=!1,this.notifyHand2.active=!1,this.unschedule(this.intervalBetting),this.actionBetting.active=!1),this.getPlayerHouse(0).showCardName(i))}}}break;case l.default.Code.DAN_BAI:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedDanBai(t);cc.log("XiDzach DAN_BAI res : ",JSON.stringify(e));let i=e.chair,s=this.findPlayerSeatByPos(i);-1!=s&&(this.getPlayerHouse(s).checkNeedShowDanBai()&&this.getPlayerHouse(s).playFxXepXong(),0==s&&(this.btnNhaCon.active=!1,this.notifyHand.active=!1,this.notifyHand2.active=!1,this.setCanRutBai(!1)))}break;case l.default.Code.RUT_BAI_TU_DONG:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedRutBaiTuDong(t);cc.log("XiDzach RUT_BAI_TU_DONG res : ",JSON.stringify(e));let i=e.chair,s=(e.cardSize,e.cards),a=this.findPlayerSeatByPos(i);if(-1!=a)for(let t=0;t<s.length;t++){let e=this.getPlayerHouse(a).getRealCardCanUse(),i=s[t];this.getPlayerHouse(a).openCardRealNow(e,this.spriteCards[i])}}break;case l.default.Code.SO_BAI:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedSoBai(t);cc.log("XiDzach SO_BAI res : ",JSON.stringify(e));let s=e.chair1,a=e.chair2,n=e.winMoney1,h=e.winMoney2,c=e.currentMoney1,u=e.currentMoney2,f=(e.hasCard1,e.card1),p=(e.hasCard2,e.card2),y=(e.cardSize1,e.cardSize2,this.findPlayerSeatByPos(s)),m=this.findPlayerSeatByPos(a);if(-1!=y&&-1!=m){this.getPlayerHouse(y).hideFxWinLose(),this.getPlayerHouse(m).hideFxWinLose(),0==y&&(d.default.Login.Coin=c,o.default.send(o.default.USER_UPDATE_COIN),0!==this.seatOwner&&this.showResultEffect(n)),0==m&&(d.default.Login.Coin=u,o.default.send(o.default.USER_UPDATE_COIN),0!==this.seatOwner&&this.showResultEffect(h)),n>0?(this.getPlayerHouse(y).fxWin({moneyChange:n,money:c}),this.getPlayerHouse(m).fxLose({moneyChange:h,money:u})):n<0?(this.getPlayerHouse(y).fxLose({moneyChange:n,money:c}),this.getPlayerHouse(m).fxWin({moneyChange:h,money:u})):(this.getPlayerHouse(y).fxWin({moneyChange:n,money:c}),this.getPlayerHouse(m).fxWin({moneyChange:h,money:u})),i=new g.default(f),this.getPlayerHouse(y).showCardName(i);var C=new g.default(p);this.getPlayerHouse(m).showCardName(C);for(let t=0;t<5;t++)if(t<f.length){let e=f[t];this.getPlayerHouse(y).openCardRealNow(t,this.spriteCards[e])}else this.getPlayerHouse(y).hideCardRealNow(t);for(let t=0;t<5;t++)if(t<p.length){let e=p[t];this.getPlayerHouse(m).openCardRealNow(t,this.spriteCards[e])}else this.getPlayerHouse(m).hideCardRealNow(t)}}break;case l.default.Code.NOTIFY_NO_CHUONG:r.default.instance.showLoading(!1),cc.log("XiDzach NOTIFY_NO_CHUONG ");break;case l.default.Code.NOTIFY_XIZACH:{r.default.instance.showLoading(!1);let e=new l.default.ReceivedKetQuaXiZach(t);cc.log("XiDzach NOTIFY_XIZACH res : ",JSON.stringify(e));let i=()=>{let t=e.needShowList,i=e.needUpdateMoneyList,s=e.listCards,a=e.winMoneyList,n=e.currentMoneyList,r=-1;for(let e=0;e<l.default.Code.MAX_PLAYER;e++)a[e]>0&&(r=e);if(-1!=r){let t=this.findPlayerSeatByPos(r);-1!=t&&(this.seatXiDzachOrXiBang=t,0==t&&(this.btnNhaCai.active=!1,this.btnNhaCon.active=!1,this.notifyHand.active=!1,this.notifyHand2.active=!1,this.setCanRutBai(!1)),t==this.seatOwner&&(this.unschedule(this.intervalEnd),this.notifyTimeEnd.active=!1,this.btnNhaCon.active=!1,this.btnNhaCai.active=!1,this.notifyHand.active=!1,this.notifyHand2.active=!1,this.setCanRutBai(!1)),this.getPlayerHouse(t).hideFxCombineState(!1))}let h=[];for(let e=0;e<t.length;e++)if(1===t[e]){let t=s[e];h[e]=!(2==t.length&&0==Math.floor(Number(t[0])/4)&&0==Math.floor(Number(t[1])/4))}let c=[];for(let e=0;e<l.default.Code.MAX_PLAYER;e++)1==i[e]&&c.push(e);for(let e=0;e<l.default.Code.MAX_PLAYER;e++){let t=c.indexOf(R[e].playerPos);if(-1===t)continue;let i=s[c[t]];for(let s=0;s<5;s++)if(s<i.length){let t=i[s];this.getPlayerHouse(e).openCardRealNow(s,this.spriteCards[t])}else i.length>0&&this.getPlayerHouse(e).hideCardRealNow(s);let r={moneyChange:a[c[t]],money:n[c[t]]};if(0==e&&(d.default.Login.Coin=n[c[t]],o.default.send(o.default.USER_UPDATE_COIN),this.showResultEffect(r.moneyChange)),r.moneyChange>=0){this.getPlayerHouse(e).fxWin(r),this.getPlayerHouse(e).hideCardName();let t=R[e].playerPos;this.getPlayerHouse(e).showFxSpecial(void 0!==h[t]&&h[t]?3:2)}else this.getPlayerHouse(e).fxLose(r),this.getPlayerHouse(e).hideCardName()}},s=this.getNumPlayers().length,a=.4+.2+.1*(2*s+(s-1));this.scheduleOnce(()=>{i()},a)}break;case l.default.Code.CARDS_DEFINE:{let e=new l.default.ReceivedCardDefinations(t);cc.log(e),this.setCardDefinations(JSON.parse(e.strData).object||[])}break;default:cc.log(e.getCmdId())}},this)}actionLeaveRoom(){u.default.getInstance().send(new l.default.SendRequestLeaveGame)}actionOpenCard(){u.default.getInstance().send(new l.default.CmdSendMoBai),this.btnNhaCai.active=!1}actionDanBai(){u.default.getInstance().send(new l.default.sendDanBai)}actionRutBai(){u.default.getInstance().send(new l.default.sendRutBai)}actionXeBaiOne(t,e){let i=parseInt(e),s=this.findPlayerPosBySeat(i);this.getPlayerHouse(i).showBtnXeBaiOne(!1),u.default.getInstance().send(new l.default.sendXetBaiOne(s))}actionXeBaiAll(){u.default.getInstance().send(new l.default.sendXetBaiAll)}initConfigPlayer(){R=[];for(let t=0;t<l.default.Code.MAX_PLAYER;t++)R.push({seatId:t,playerId:-1,playerPos:-1,isViewer:!0})}resetPlayersPlaying(){for(let t=0;t<l.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).resetMatchHistory()}setupSeatPlayer(t,e){R[t].playerId=e.nickName,this.getPlayerHouse(t).setAvatar(e.avatar),this.getPlayerHouse(t).setName(e.nickName),this.getPlayerHouse(t).setGold(e.money),0===t&&this.getPlayerHouse(t).setButtonChat()}findPlayerSeatByUid(t){let e=-1;for(let i=0;i<R.length;i++)R[i].playerId===t&&(e=R[i].seatId);return e}findPlayerPosBySeat(t){return R[t].playerPos}findPlayerSeatByPos(t){if(-1==t)return-1;let e=-1;for(let i=0;i<R.length;i++)R[i].playerPos===t&&(e=R[i].seatId);return e}getPlayerHouse(t){return this.groupPlayers.children[t].getComponent(y.default)}getNumPlayers(){var t=[];for(let e=0;e<R.length;e++)-1===R[e].playerId||R[e].isViewer||t.push(R[e].seatId);return t}onKickFromRoom(t){for(let e=0;e<R.length;e++)0==R[e].seatId&&(R[e].playerId=-1,R[e].isViewer=!0);this.getPlayerHouse(0).resetPlayerInfo(),1==this.getNumPlayers().length&&this.resetPlayersPlaying(),this.UI_Playing.active=!1,this.UI_ChooseRoom.active=!0,this.refeshListRoom(),this.scheduleOnce(()=>{switch(t){case l.default.Code.ERROR_MONEY:r.default.instance.actiontDialog.showMsgWithAction("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7.","N\u1ea0P NGAY",()=>{r.default.instance.openShop(0)});break;case l.default.Code.ERROR_BAO_TRI:r.default.instance.alertDialog.showMsg("H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!");break;default:r.default.instance.alertDialog.showMsg("B\u1ea1n b\u1ecb kick kh\u1ecfi b\xe0n ch\u01a1i!")}},.5)}showResultEffect(t){this.disableEffects(),(t>0?this.effectWin:0===t?this.effectDraw:this.effectLose).active=!0}disableEffects(){this.effectWin.active=!1,this.effectDraw.active=!1,this.effectLose.active=!1}getCardDefinations(){u.default.getInstance().send(new l.default.SendCardDefinations)}setCardDefinations(t){this.cardDefinations=t,this.btnShowCardDefinations.node.active=!1}actShowCardDefinations(){p.default.createAndShow(r.default.instance.popups,this.cardDefinations,this.spriteCards)}actShowChat(){C.default.createAndShow(this.UI_Playing,this.cardDefinations,(t,e)=>{u.default.getInstance().send(new l.default.SendChatRoom(t,e))},(t,e)=>{u.default.getInstance().send(new l.default.SendCheatCards(t,e))})}actSetting(){v.default.createAndShow(this.UI_Playing,d.default.App.BUNDLE_NAME.XIDZACH,()=>{this.showPopupGuide()},()=>{u.default.getInstance().send(new l.default.SendRequestLeaveGame)})}};_.instance=null,a([S(cc.Node)],_.prototype,"UI_ChooseRoom",void 0),a([S(cc.Label)],_.prototype,"labelNickName",void 0),a([S(cc.Label)],_.prototype,"labelCoin",void 0),a([S(cc.Sprite)],_.prototype,"sprAvatar",void 0),a([S(cc.Prefab)],_.prototype,"prefabItemRoom",void 0),a([S(cc.ScrollView)],_.prototype,"scrollListRoom",void 0),a([S(cc.Node)],_.prototype,"UI_Playing",void 0),a([S(cc.Node)],_.prototype,"meCards",void 0),a([S(cc.Node)],_.prototype,"groupPlayers",void 0),a([S(cc.SpriteFrame)],_.prototype,"spriteCards",void 0),a([S(cc.SpriteFrame)],_.prototype,"spriteCardBack",void 0),a([S(cc.Node)],_.prototype,"cardsDeal",void 0),a([S(cc.Node)],_.prototype,"btnNhaCai",void 0),a([S(cc.Node)],_.prototype,"btnNhaCon",void 0),a([S(cc.Label)],_.prototype,"labelRoomId",void 0),a([S(cc.Label)],_.prototype,"labelRoomBet",void 0),a([S(cc.Label)],_.prototype,"labelMatchId",void 0),a([S(cc.Node)],_.prototype,"actionBetting",void 0),a([S(cc.Node)],_.prototype,"cardsRut",void 0),a([S(cc.Node)],_.prototype,"notifyTimeStart",void 0),a([S(cc.Node)],_.prototype,"notifyTimeEnd",void 0),a([S(cc.Node)],_.prototype,"notifyHand",void 0),a([S(cc.Node)],_.prototype,"notifyHand2",void 0),a([S(cc.Label)],_.prototype,"labelBettingCountDown",void 0),a([S(cc.Node)],_.prototype,"popupNodity",void 0),a([S(cc.Label)],_.prototype,"labelNotifyContent",void 0),a([S(cc.Node)],_.prototype,"popupGuide",void 0),a([S(cc.Button)],_.prototype,"btnShowCardDefinations",void 0),a([S(cc.Node)],_.prototype,"effectWin",void 0),a([S(cc.Node)],_.prototype,"effectDraw",void 0),a([S(cc.Node)],_.prototype,"effectLose",void 0),_=s=a([I],_),i.default=_,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Utils":void 0,"../../Main/Game/src/games/cardgames/ItemRoom":void 0,"../../Main/Game/src/games/cardgames/PopupCardDefinations":void 0,"../../Main/Game/src/games/cardgames/PopupChatInGame":void 0,"../../Main/Game/src/games/cardgames/PopupSettingInGame":void 0,"../../Main/Game/src/networks/CardGame.Cmd":void 0,"../../Main/Game/src/networks/Network.Cmd":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"./XiDzach.Cmd":"XiDzach.Cmd","./XiDzach.NetworkClient":"XiDzach.NetworkClient","./XiDzach.Player":"XiDzach.Player","./XiZachGroupCard":"XiZachGroupCard"}],"XiDzach.NetworkClient":[function(t,e,i){"use strict";cc._RF.push(e,"245deO/+aRLuaeVx06xJoge","XiDzach.NetworkClient"),Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../Main/Game/src/networks/Network.NetworkClient"),a=t("../../Main/Game/src/networks/Network.NetworkListener"),o=t("../../Main/Game/src/common/Configs");class n extends s.default{constructor(){super(),this.listeners=new Array,this.isUseWSS=o.default.App.USE_WSS}static getInstance(){return null==this.instance&&(this.instance=new n),this.instance}connect(){super.connect(o.default.App.HOST_XIDZACH.host,o.default.App.HOST_XIDZACH.port)}onOpen(t){super.onOpen(t)}onMessage(t){for(var e=new Uint8Array(t.data),i=0;i<this.listeners.length;i++){var s=this.listeners[i];s.target&&s.target instanceof Object&&s.target.node?s.callback(e):(this.listeners.splice(i,1),i--)}}addListener(t,e){this.listeners.push(new a.default(e,t))}send(t){for(var e=new Int8Array(t._length),i=0;i<t._length;i++)e[i]=t._data[i];null!=this.ws&&this.isConnected()&&this.ws.send(e.buffer)}}i.default=n,cc._RF.pop()},{"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/networks/Network.NetworkClient":void 0,"../../Main/Game/src/networks/Network.NetworkListener":void 0}],"XiDzach.Player":[function(t,e,i){"use strict";cc._RF.push(e,"f7a2a4cQOZEQ53oAY1L1x7V","XiDzach.Player");var s=this&&this.__decorate||function(t,e,i,s){var a,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(o<3?a(n):o>3?a(e,i,n):a(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=t("../../Main/Game/src/common/App"),o=t("../../Main/Game/src/common/BroadcastReceiver"),n=t("./XiZachGroupCard"),{ccclass:r,property:h}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.avatar=null,this.cardReady=null,this.cardReal=null,this.userName=null,this.userGold=null,this.owner=null,this.cardsName=null,this.actionViewer=null,this.actionThinking=null,this.actionWin=null,this.actionHoa=null,this.goldWin=null,this.actionLose=null,this.goldLose=null,this.actionXepXong=null,this.actionDangXep=null,this.btnXetBai=null,this.hub=null,this.goldBet=null,this.prefabItemChip=null,this.notify=null,this.chatEmotion=null,this.chatMsg=null,this.shadowAvatar=null,this.shadowInfo=null,this.spriteCardBack=null,this.fxSpecial=null}start(){o.default.send(o.default.SET_SOUND,this.node)}showChatEmotion(t){this.node.getChildByName("Chat").active=!0,this.chatEmotion.active=!0,this.chatMsg.active=!1,this.chatEmotion.getComponent(sp.Skeleton).setAnimation(0,t,!0),this.scheduleOnce(()=>{this.chatEmotion.active=!1},3)}showChatMsg(t){this.node.getChildByName("Chat").active=!0,this.chatEmotion.active=!1,this.chatMsg.active=!0,this.chatMsg.children[1].getComponent(cc.Label).string=t,this.scheduleOnce(()=>{this.chatMsg.active=!1},3)}setOwner(t){this.owner.active=t}setAvatar(t){this.node.getChildByName("Avatar").active=!0,this.avatar.getComponent(cc.Sprite).spriteFrame=a.default.instance.getAvatarSpriteFrame(t)}setIsViewer(t){this.shadowAvatar.active=t,this.shadowInfo.active=t}setName(t){this.node.getChildByName("Info").active=!0,this.userName.string=t}showCardReady(t){this.node.getChildByName("Card").active=!0,this.cardReady.active=t}showCardReal(t){this.node.getChildByName("Card").active=!0,this.cardReal.active=t}prepareToTransform(){for(let t=0;t<this.cardReal.childrenCount;t++)this.prepareCardReal(t)}prepareCardReal(t){this.cardReal.children[t].active=!0,this.cardReal.children[t].runAction(cc.scaleTo(0,0,1))}transformToCardReal(t,e){this.showCardReal(!0),this.cardReal.children[t].active=!0,this.cardReal.children[t].children[0].getComponent(cc.Sprite).spriteFrame=e,this.cardReady.children[t].runAction(cc.sequence(cc.scaleTo(.15,0,1),cc.callFunc(()=>{}))),this.cardReal.children[t].runAction(cc.sequence(cc.delayTime(.15),cc.scaleTo(.15,1,1),cc.callFunc(()=>{})))}getRealCardCanUse(){for(let t=0;t<this.cardReal.childrenCount;t++)if(!this.cardReal.children[t].active)return t;return 0}openCardRealNow(t,e){this.showCardReal(!0),this.showCardReady(!1),this.cardReal.children[t].active=!0,this.cardReal.children[t].children[0].getComponent(cc.Sprite).spriteFrame=e,this.cardReal.children[t].runAction(cc.sequence(cc.delayTime(.15),cc.scaleTo(.15,1,1),cc.callFunc(()=>{})))}hideCardRealNow(t){this.cardReal.children[t].active=!1}showCardName(t){return this.hideFxSpecial(),t.isXiBang()?(this.showFxSpecial(2),void(this.cardsName.active=!1)):t.isXiZach()?(this.showFxSpecial(3),void(this.cardsName.active=!1)):t.isNguLinh()?(this.showFxSpecial(4),void(this.cardsName.active=!1)):21==t.getMaxDiem()?(this.cardsName.active=!0,void(this.cardsName.children[0].getComponent(cc.Label).string="21 \u0110i\u1ec3m")):t.isQuac()?(this.showFxSpecial(1),void(this.cardsName.active=!1)):t.getMaxDiem()<16?(this.showFxSpecial(0),(null==t.cards||t.cards.length<5)&&(this.cardsName.active=!0),void(this.cardsName.children[0].getComponent(cc.Label).string=t.getMaxDiem()+" \u0110i\u1ec3m")):(this.hideFxSpecial(),t.bo=n.XiZachGroupCardConstant.KG_THUONG,this.cardsName.active=!0,void(this.cardsName.children[0].getComponent(cc.Label).string=t.getMaxDiem()+" \u0110i\u1ec3m"))}hideCardName(){this.cardsName.active=!1}setGold(t){this.actionThinking.active=!1,this.showGold(!0),this.userGold.string=this.formatGold(t)}setBet(t){this.showPlayerBet(!0),this.goldBet.string=this.formatGold(t)}addChips(){var t=cc.instantiate(this.prefabItemChip),e=cc.instantiate(this.prefabItemChip);this.hub.addChild(t),this.hub.addChild(e)}showPlayerBet(t){this.node.getChildByName("Chips").active=t,t||this.hub.removeAllChildren(!0)}setCardReal01(t){this.cardReal.children[0].children[0].getComponent(cc.Sprite).spriteFrame=t}setCardReal02(t){this.cardReal.children[1].children[0].getComponent(cc.Sprite).spriteFrame=t}showPlayCountdown(){this.node.getChildByName("Action").active=!0,this.actionThinking.active=!0,this.processThinking(0)}hidePlayCountdown(){this.actionThinking.active=!1}processThinking(t){this.actionThinking.getComponent(cc.Sprite).fillRange=t}showGold(t){this.node.getChildByName("Info").children[2].active=t}prepareFxAction(){this.node.getChildByName("Action").active=!0,this.resetAction()}showFxSpecial(t){this.fxSpecial.active=!0,this.hideFxSpecial(),this.fxSpecial.children[t].active=!0}hideFxSpecial(){for(let t=0;t<this.fxSpecial.childrenCount;t++)this.fxSpecial.children[t].active=!1}checkNeedShowDanBai(){return!this.fxSpecial.children[2].active&&!this.fxSpecial.children[3].active}showBtnXeBaiOne(t){this.btnXetBai.active=t}setCanXetBaiOne(t){this.btnXetBai.color=t?cc.Color.WHITE:cc.Color.GRAY,this.btnXetBai.getComponent(cc.Button).interactable=t}playFxViewer(){this.prepareFxAction(),this.actionViewer.active=!0}playFxDangXep(){this.prepareFxAction(),this.actionDangXep.active=!0,this.actionXepXong.active=!1}playFxXepXong(){this.prepareFxAction(),this.actionDangXep.active=!1,this.actionXepXong.active=!0}hideFxCombineState(t){this.actionDangXep.active=t,this.actionXepXong.active=t}fxOtherPlayerFold(){this.cardReady.runAction(cc.moveBy(.5,0,-100))}fxMeFold(){this.shadowCardReal(!0),this.cardReal.runAction(cc.moveBy(.5,0,-20))}fxWin(t){0!=t.moneyChange?(this.node.getChildByName("Action").active=!0,this.actionWin.active=!0,this.fxGoldChange(0,t.moneyChange,this.goldWin.node),this.setGold(this.formatGold(t.money))):this.fxHoa(t)}fxHoa(t){this.node.getChildByName("Action").active=!0,this.actionHoa.active=!0,this.fxGoldChange(0,t.moneyChange,this.actionHoa.getChildByName("gold lose")),this.setGold(this.formatGold(t.money))}fxLose(t){this.node.getChildByName("Action").active=!0,this.actionLose.active=!0,this.fxGoldChange(0,t.moneyChange,this.goldLose.node),this.setGold(this.formatGold(t.money))}hideFxWinLose(){this.actionWin.active=!1,this.actionHoa.active=!1,this.actionLose.active=!1,this.node.getChildByName("Action").active=!1}shadowCardReady(t){for(let e=0;e<this.cardReady.childrenCount;e++)this.cardReady.children[e].color=t?cc.Color.GRAY:cc.Color.WHITE}shadowCardReal(t){for(let e=0;e<this.cardReal.childrenCount;e++)this.cardReal.children[e].children[0].color=t?cc.Color.GRAY:cc.Color.WHITE}setCardWin(t,e){this.cardReal.children[t].children[0].color=e?cc.Color.WHITE:cc.Color.GRAY}showNotify(t){this.notify.active=!0,this.notify.getComponentInChildren(cc.Label).string=t?"S\u1eafp r\u1eddi b\xe0n!":"Ch\u01a1i ti\u1ebfp!",this.scheduleOnce(()=>{this.notify.active=!1},1.5)}resetAction(){for(let t=0;t<this.node.getChildByName("Action").childrenCount;t++)this.node.getChildByName("Action").children[t].active=!1}resetMatchHistory(){this.resetCardReady(),this.resetCardReal(),this.hideFxSpecial(),this.btnXetBai.active=!1,this.node.getChildByName("Card").active=!1,this.showGold(!0),this.cardsName.active=!1,this.resetAction(),this.node.getChildByName("Chips").active=!1,this.goldBet.string="0",this.hub.removeAllChildren(!0)}resetCardReady(){this.cardReady.children[0].scale=1,this.cardReady.children[1].scale=1,this.cardReady.active=!1}resetCardReal(){this.cardReal.active=!1,this.cardReal.y=0;for(let t=0;t<this.cardReal.childrenCount;t++)this.cardReal.children[t].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack;this.shadowCardReal(!1)}resetPlayerInfo(){for(let t=0;t<this.node.childrenCount;t++)this.node.children[t].active=!1;for(let t=0;t<this.cardReal.childrenCount;t++)this.cardReal.children[t].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack;this.cardReady.active=!1,this.cardReal.active=!1,this.cardsName.active=!1,this.actionViewer.active=!1,this.actionThinking.active=!1,this.actionWin.active=!1,this.actionHoa.active=!1,this.actionLose.active=!1,this.goldBet.string="0",this.hub.removeAllChildren(!0),this.setIsViewer(!0)}fxGoldChange(t,e,i){var s=e-t;i.getComponent(cc.Label).string=this.formatGold(t);var a=Math.floor(s/10),o=cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(()=>{t+=a,i.getComponent(cc.Label).string=(s>0?"+":"")+this.formatGold(t)})),10),n=cc.sequence(o,cc.callFunc(()=>{t=e,i.getComponent(cc.Label).string=(s>0?"+":"")+this.formatGold(t)}));i.runAction(n)}formatGold(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}setButtonChat(){this.node.getChildByName("BtnChat").active=!0}};s([h(cc.Node)],c.prototype,"avatar",void 0),s([h(cc.Node)],c.prototype,"cardReady",void 0),s([h(cc.Node)],c.prototype,"cardReal",void 0),s([h(cc.Label)],c.prototype,"userName",void 0),s([h(cc.Label)],c.prototype,"userGold",void 0),s([h(cc.Node)],c.prototype,"owner",void 0),s([h(cc.Node)],c.prototype,"cardsName",void 0),s([h(cc.Node)],c.prototype,"actionViewer",void 0),s([h(cc.Node)],c.prototype,"actionThinking",void 0),s([h(cc.Node)],c.prototype,"actionWin",void 0),s([h(cc.Node)],c.prototype,"actionHoa",void 0),s([h(cc.Label)],c.prototype,"goldWin",void 0),s([h(cc.Node)],c.prototype,"actionLose",void 0),s([h(cc.Label)],c.prototype,"goldLose",void 0),s([h(cc.Node)],c.prototype,"actionXepXong",void 0),s([h(cc.Node)],c.prototype,"actionDangXep",void 0),s([h(cc.Node)],c.prototype,"btnXetBai",void 0),s([h(cc.Node)],c.prototype,"hub",void 0),s([h(cc.Label)],c.prototype,"goldBet",void 0),s([h(cc.Prefab)],c.prototype,"prefabItemChip",void 0),s([h(cc.Node)],c.prototype,"notify",void 0),s([h(cc.Node)],c.prototype,"chatEmotion",void 0),s([h(cc.Node)],c.prototype,"chatMsg",void 0),s([h(cc.Node)],c.prototype,"shadowAvatar",void 0),s([h(cc.Node)],c.prototype,"shadowInfo",void 0),s([h(cc.SpriteFrame)],c.prototype,"spriteCardBack",void 0),s([h(cc.Node)],c.prototype,"fxSpecial",void 0),c=s([r],c),i.default=c,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"./XiZachGroupCard":"XiZachGroupCard"}],XiZachCard:[function(t,e,i){"use strict";cc._RF.push(e,"1b540VPjlVJVpS3TyZk60Ds","XiZachCard"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(t=null){this.id=null,this.so=null,this.chat=null,this.id=t,this.so=this.getNumber(),this.chat=this.getSuit()}setCard(t,e){this.id=4*(t-2)+e}getNumber(){return Math.floor(this.id/4)}getSuit(){return this.id%4}getId(){return this.id}getDisplayId(t){return t<0||t>=52?52:(t-8+52)%52}isXi(){return 0==this.so}getDiem(){return this.isXi()?1:9==this.so||10==this.so||11==this.so||12==this.so?10:this.so+1}getMinDiem(){return this.isXi()?1:9==this.so||10==this.so||11==this.so||12==this.so?10:this.so+1}},cc._RF.pop()},{}],XiZachGroupCard:[function(t,e,i){"use strict";cc._RF.push(e,"33309RudRJGu57mT48pZ99U","XiZachGroupCard"),Object.defineProperty(i,"__esModule",{value:!0}),i.XiZachGroupCardConstant=void 0;const s=t("./XiZachCard");i.default=class{constructor(t=null){this.cards=null,this.bo=null,this.size=null;for(var e=[],i=0;i<t.length;i++)e.push(new s.default(t[i]));this.cards=e,this.size=this.cards.length,this.bo=-1,this.kiemTraBo()}addCard(t){this.cards.push(new s.default(t)),this.kiemTraBo()}addCards(t){for(var e=0;e<t.length;e++)t[e],this.cards.push(new s.default(t[e]));this.kiemTraBo()}kiemTraBo(){return-1==this.bo||this.bo==i.XiZachGroupCardConstant.KG_WRONG?this.tinhBo():this.bo}tinhBo(){if(this.size<2)return i.XiZachGroupCardConstant.KG_WRONG;for(var t=0;t<this.size;t++)if(this.cards[t].id>=52&&this.cards[t].id<0)return i.XiZachGroupCardConstant.KG_WRONG;return this.isXiBang()?i.XiZachGroupCardConstant.KG_XIBANG:this.isXiZach()?i.XiZachGroupCardConstant.KG_XIZACH:this.isNguLinh()?i.XiZachGroupCardConstant.KG_NGULINH:21==this.getMaxDiem()?i.XiZachGroupCardConstant.KG_21DIEM:this.isQuac()?(this.bo=i.XiZachGroupCardConstant.KG_QUAC,i.XiZachGroupCardConstant.KG_QUAC):this.cards.length<2?(this.bo=i.XiZachGroupCardConstant.KG_WRONG,i.XiZachGroupCardConstant.KG_WRONG):this.getMaxDiem()<16?(this.bo=i.XiZachGroupCardConstant.KG_DANNON,i.XiZachGroupCardConstant.KG_DANNON):(this.bo=i.XiZachGroupCardConstant.KG_THUONG,i.XiZachGroupCardConstant.KG_THUONG)}getCardSize(){return this.cards.length}isXiBang(){return!(2!=this.cards.length||!this.cards[0].isXi()||!this.cards[1].isXi())}isXiZach(){return!(2!=this.cards.length||!this.cards[0].isXi()||10!=this.cards[1].getDiem())||!(2!=this.cards.length||!this.cards[1].isXi()||10!=this.cards[0].getDiem())}clearCard(){this.cards=[],this.bo=-1}hasXi(){for(var t=0;t<this.cards.length;t++)if(this.cards[t].isXi())return!0;return!1}isNguLinh(){return this.cards.length>=5&&this.getMinDiem()<=21}isQuac(){return this.getMaxDiem()>21}canRutBai(){return!this.isXiZach()&&!this.isXiBang()&&this.getMinDiem()>=21&&!this.isNguLinh()}canDanBai(){return this.isNguLinh()||this.getMaxDiem()>=16}getMinDiem(){for(var t=0,e=0;e<this.cards.length;e++)t+=this.cards[e].getMinDiem();return t}getMaxDiem(){if(this.isXiBang()||this.isXiZach())return 21;var t=this.getMinDiem();return this.hasXi()?this.has2XiTroLen()?t:this.chonDiemMax(t,t+10):t}chonDiemMax(t,e){return t<16&&e>21?t:e<16&&t>21?e:t<16||t>21?e:e<16||e>21?t:t<=e?e:t}has2XiTroLen(){for(var t=0,e=0;e<this.cards.length;e++)this.cards[e].isXi()&&t++;return t>=2}needShadown(t){return!1}getBoName(){return this.tinhBo()}},i.XiZachGroupCardConstant={group_names:["WR","DN","Q","T","21","NL","XR","XB"],KG_WRONG:0,KG_XIBANG:7,KG_XIZACH:6,KG_NGULINH:5,KG_21DIEM:4,KG_THUONG:3,KG_QUAC:2,KG_DANNON:1},cc._RF.pop()},{"./XiZachCard":"XiZachCard"}]},{},["XiDzach.CardUtil","XiDzach.Cmd","XiDzach.Controller","XiDzach.NetworkClient","XiDzach.Player","XiZachCard","XiZachGroupCard"]);