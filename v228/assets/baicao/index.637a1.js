window.__require=function e(t,i,o){function s(n,r){if(!i[n]){if(!t[n]){var c=n.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+n+"'")}n=c}var h=i[n]={exports:{}};t[n][0].call(h.exports,function(e){return s(t[n][1][e]||e)},h,h.exports,e,t,i,o)}return i[n].exports}for(var a="function"==typeof __require&&__require,n=0;n<o.length;n++)s(o[n]);return s}({"BaiCao.CardUtil":[function(e,t,i){"use strict";cc._RF.push(t,"3fe3e/9gF9ElZ/vmUvBqR4d","BaiCao.CardUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.common=void 0;const{ccclass:o,property:s}=cc._decorator;var a;(function(e){e.CardUtils=class{static getCardInfo(e){this.id=e,this.so=this.getSoById(e),this.chat=this.getChatById(e),this.diem=this.getDiemById(e)}static getSoById(e){return Math.floor(e/4)}static getDiemById(e){let t=Math.floor(e/4)+1;return 11!=t&&12!=t&&13!=t||(t=10),t}static getChatById(e){return e%4}static getNormalId(e){var t;return t=4>e?11:8>e?12:Math.floor(e/4)-2,3==(e=Math.floor(e%4))?e=2:2==e&&(e=3),4*t+e}}})(a=i.common||(i.common={})),i.default=a.CardUtils,cc._RF.pop()},{}],"BaiCao.Cmd":[function(e,t,i){"use strict";cc._RF.push(t,"95fbb1H6RtD4Jqh4piu2Geo","BaiCao.Cmd"),Object.defineProperty(i,"__esModule",{value:!0}),i.cmd=void 0;const o=e("../../Main/Game/src/networks/Network.OutPacket"),s=e("../../Main/Game/src/networks/Network.InPacket"),a=e("../../Main/Game/src/common/Configs");var n;(function(e){class t{}t.LOGIN=1,t.TOPSERVER=1001,t.CMD_PINGPONG=1050,t.CMD_JOIN_ROOM=3001,t.CMD_RECONNECT_ROOM=3002,t.MONEY_BET_CONFIG=3003,t.JOIN_ROOM_FAIL=3004,t.CHAT_ROOM=3008,t.GET_LIST_ROOM=3014,t.JOIN_GAME_ROOM_BY_ID=3015,t.MO_BAI=3101,t.BAT_DAU=3102,t.KET_THUC=3103,t.YEU_CAU_DANH_BIEN=3104,t.CHIA_BAI=3105,t.KE_CUA=3106,t.TU_DONG_BAT_DAU=3107,t.DONG_Y_DANH_BIEN=3108,t.DAT_CUOC=3109,t.THONG_TIN_BAN_CHOI=3110,t.DANG_KY_THOAT_PHONG=3111,t.VAO_GA=3112,t.DOI_CHUONG=3113,t.MOI_DAT_CUOC=3114,t.CHEAT_CARDS=3115,t.DANG_KY_CHOI_TIEP=3116,t.UPDATE_OWNER_ROOM=3117,t.JOIN_ROOM_SUCCESS=3118,t.LEAVE_GAME=3119,t.NOTIFY_KICK_FROM_ROOM=3120,t.NEW_USER_JOIN=3121,t.NOTIFY_USER_GET_JACKPOT=3122,t.UPDATE_MATCH=3123,t.PLAYER_STATUS_OUT_GAME=0,t.PLAYER_STATUS_VIEWER=1,t.PLAYER_STATUS_SITTING=2,t.PLAYER_STATUS_PLAYING=3,t.MAX_PLAYER=8,t.ERROR_MONEY=1,t.ERROR_BAO_TRI=2,e.Code=t,e.SendCheatCards=class extends o.default{constructor(e,i){if(super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.CHEAT_CARDS),this.packHeader(),this.putByte(e),this.putByte(0),this.putShort(i.length),e)for(var o=0;o<i.length;o++)this.putByte(i[o]);this.updateSize()}},e.CmdLogin=class extends o.default{constructor(e,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.LOGIN),this.packHeader(),this.putString(e),this.putString(i),this.updateSize()}},e.CmdJoinRoom=class extends o.default{constructor(e,i,o){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.CMD_JOIN_ROOM),this.packHeader(),this.putInt(e),this.putInt(i),this.putLong(o),this.putInt(0),this.updateSize()}},e.CmdReconnectRoom=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.CMD_RECONNECT_ROOM),this.packHeader(),this.updateSize()}},e.SendVaoGa=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.VAO_GA),this.packHeader(),this.updateSize()}},e.CmdSendRequestLeaveGame=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.DANG_KY_THOAT_PHONG),this.packHeader(),this.updateSize()}},e.CmdSendHoldRoom=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.DANG_KY_CHOI_TIEP),this.packHeader(),this.updateSize()}},e.SendGetGameConfig=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.MONEY_BET_CONFIG),this.packHeader(),this.updateSize()}},e.SendGetTopServer=class extends o.default{constructor(e){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.TOPSERVER),this.packHeader(),this.putByte(e),this.updateSize()}},e.SendCardCheat=class extends o.default{constructor(e,i){if(super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.CHEAT_CARDS),this.packHeader(),this.putByte(e),this.putByte(0),this.putShort(i.length),e)for(var o=0;o<i.length;o++)this.putByte(i[o]);this.updateSize()}},e.CmdSendDatCuoc=class extends o.default{constructor(e){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.DAT_CUOC),this.packHeader(),this.putByte(e),this.updateSize()}},e.CmdSendDanhBien=class extends o.default{constructor(e,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.YEU_CAU_DANH_BIEN),this.packHeader(),this.putByte(e),this.putByte(i),this.updateSize()}},e.CmdSendKeCua=class extends o.default{constructor(e,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.KE_CUA),this.packHeader(),this.putByte(e),this.putByte(i),this.updateSize()}},e.CmdSendAcceptDanhBien=class extends o.default{constructor(e){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.DONG_Y_DANH_BIEN),this.packHeader(),this.putByte(e),this.updateSize()}},e.CmdSendMoBai=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.MO_BAI),this.packHeader(),this.updateSize()}},e.CmdSendPing=class extends o.default{constructor(e){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.CMD_PINGPONG),this.packHeader(),this.updateSize()}},e.SendGetListRoom=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.GET_LIST_ROOM),this.packHeader(),this.putInt(a.default.App.MONEY_TYPE),this.putInt(t.MAX_PLAYER),this.putLong(-1),this.putInt(0),this.putInt(0),this.putInt(50),this.updateSize()}},e.SendJoinRoomById=class extends o.default{constructor(e){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.JOIN_GAME_ROOM_BY_ID),this.packHeader(),this.putInt(e),this.putString(""),this.updateSize()}},e.SendChatRoom=class extends o.default{constructor(e,i){super(),this.initData(100),this.setControllerId(1),this.setCmdId(t.CHAT_ROOM),this.packHeader(),this.putByte(e?1:0),this.putString(encodeURI(i)),this.updateSize()}},e.ReceivedLogin=class extends s.default{constructor(e){super(e),cc.log("____")}},e.ReceivedGetListRoom=class extends s.default{constructor(e){super(e),this.list=[];let t=this.getShort();this.list=[];for(var i=0;i<t;i++){let e={};e.id=this.getInt(),e.userCount=this.getByte(),e.limitPlayer=this.getByte(),e.maxUserPerRoom=this.getInt(),e.moneyType=this.getByte(),e.moneyBet=this.getInt(),e.requiredMoney=this.getInt(),e.rule=this.getByte(),e.nameRoom=this.getString(),e.key=this.getBool(),e.quyban=this.getLong(),this.list.push(e)}}},e.ReceivedJoinRoomSucceed=class extends s.default{constructor(e){var t;for(super(e),this.myChair=this.getByte(),this.chuongChair=this.getByte(),this.moneyBet=this.getLong(),this.roomId=this.getInt(),this.gameId=this.getInt(),this.moneyType=this.getByte(),this.rule=this.getByte(),this.playerSize=this.getShort(),this.playerStatus=[],t=0;t<this.playerSize;t++)this.playerStatus.push(this.getByte());for(this.playerSize=this.getShort(),this.playerInfos=[],t=0;t<this.playerSize;t++){var i={};i.nickName=this.getString(),i.avatar=this.getString(),i.money=this.getLong(),this.playerInfos.push(i)}this.gameAction=this.getByte(),this.countDownTime=this.getByte()}},e.ReceivedAutoStart=class extends s.default{constructor(e){super(e),this.isAutoStart=this.getBool(),this.timeAutoStart=this.getByte()}},e.ReceivedChiaBai=class extends s.default{constructor(e){super(e);var t=0;for(this.cardSize=this.getShort(),this.cards=[],t=0;t<this.cardSize;t++)this.cards.push(this.getByte());this.gameId=this.getInt(),this.timeChiaBai=this.getByte()}},e.ReceivedFirstTurnDecision=class extends s.default{constructor(e){super(e),this.isRandom=this.getBool(),this.chair=this.getByte(),this.cardSize=this.getShort(),this.cards=[];for(let t=0;t<this.cardSize;t++)this.cards.push(this.getByte())}},e.ReceivedUserLeaveRoom=class extends s.default{constructor(e){super(e),this.chair=this.getByte(),this.nickName=this.getString()}},e.ReceivedUserJoinRoom=class extends s.default{constructor(e){super(e),this.info={},this.info.nickName=this.getString(),this.info.avatar=this.getString(),this.info.money=this.getLong(),this.uChair=this.getByte(),this.uStatus=this.getByte()}},e.ReceivedUpdateMatch=class extends s.default{constructor(e){super(e),this.myChair=this.getByte();var t=this.getShort();this.hasInfo=[];for(var i=0;i<t;i++)this.hasInfo.push(this.getBool());for(this.infos=[],i=0;i<t;i++){var o={};this.hasInfo[i]&&(o.nickName=this.getString(),o.avatar=this.getString(),o.money=this.getLong(),o.status=this.getInt()),this.infos.push(o)}}},e.ReceivedBaCayConfig=class extends s.default{constructor(e){super(e),this.listSize=this.getShort(),this.list=[];for(var t=0;t<this.listSize;t++){var i={};i.maxUserPerRoom=this.getByte(),i.moneyType=this.getByte(),i.moneyBet=this.getLong(),i.moneyRequire=this.getLong(),i.nPersion=this.getInt(),this.list.push(i)}}},e.ReceivedNotifyRegOutRoom=class extends s.default{constructor(e){super(e),this.outChair=this.getByte(),this.isOutRoom=this.getBool()}},e.ReceivedKickOff=class extends s.default{constructor(e){super(e),this.reason=this.getByte()}},e.ReceivedMoiDatCuoc=class extends s.default{constructor(e){super(e),this.timeDatCuoc=this.getByte()}},e.ReceivedDatCuoc=class extends s.default{constructor(e){super(e),this.chairDatCuoc=this.getByte(),this.level=this.getByte()}},e.ReceivedYeuCauDanhBien=class extends s.default{constructor(e){super(e),this.danhBienChair=this.getByte(),this.level=this.getByte()}},e.ReceivedChapNhanDanhBien=class extends s.default{constructor(e){super(e),this.danhBienChair=this.getByte(),this.level=this.getByte()}},e.ReceivedKeCua=class extends s.default{constructor(e){super(e),this.chairKeCuaFrom=this.getByte(),this.chairKeCuaTo=this.getByte(),this.level=this.getByte()}},e.ReceivedVaoGa=class extends s.default{constructor(e){super(e),this.chair=this.getByte(),this.chicKenBet=this.getLong()}},e.ReceivedMoBai=class extends s.default{constructor(e){super(e),this.chairMoBai=this.getByte(),this.cardSize=this.getShort(),this.cards=[];for(var t=0;t<this.cardSize;t++)this.cards.push(this.getByte())}},e.ReceivedEndGame=class extends s.default{constructor(e){super(e);var i=0,o=this.getShort();for(this.statusList=[],i=0;i<o;i++)this.statusList.push(this.getByte());for(this.cardList=[],i=0;i<this.statusList.length;i++){if(o=[],3==this.statusList[i])for(var s=this.getShort(),a=0;a<s;a++)o.push(this.getByte());this.cardList.push(o)}for(this.tienThangChuong=this.getLong(),this.tienThangGa=this.getLong(),this.keCuaMoneyList=[],this.danhBienMoneyList=[],o=this.getShort(),i=0;i<o;i++)this.keCuaMoneyList.push(this.getLong());for(o=this.getShort(),i=0;i<o;i++)this.danhBienMoneyList.push(this.getLong());for(this.tongTienCuoiVan=this.getLong(),this.tongTienCuocList=[],this.tongDanhBienList=[],this.tongKeCuaList=[],this.tongCuocGaList=[],this.tongCuoiVanList=[],this.currentMoneyList=[],this.getShort(),i=0;i<t.MAX_PLAYER;i++)o=0,3==this.statusList[i]&&(o=this.getLong()),this.tongTienCuocList.push(o);for(this.getShort(),i=0;i<t.MAX_PLAYER;i++)o=0,3==this.statusList[i]&&(o=this.getLong()),this.tongDanhBienList.push(o);for(this.getShort(),i=0;i<t.MAX_PLAYER;i++)o=0,3==this.statusList[i]&&(o=this.getLong()),this.tongKeCuaList.push(o);for(this.getShort(),i=0;i<t.MAX_PLAYER;i++)o=0,3==this.statusList[i]&&(o=this.getLong()),this.tongCuocGaList.push(o);for(this.getShort(),i=0;i<t.MAX_PLAYER;i++)o=0,3==this.statusList[i]&&(o=this.getLong()),this.tongCuoiVanList.push(o);for(this.getShort(),i=0;i<t.MAX_PLAYER;i++)o=0,3==this.statusList[i]&&(o=this.getLong()),this.currentMoneyList.push(o);this.timeEndGame=this.getByte()}},e.ReceivedDoiChuong=class extends s.default{constructor(e){super(e),this.chuongChair=this.getByte()}},e.ReceivedChatRoom=class extends s.default{constructor(e){super(e),this.chair=this.getByte(),this.isIcon=this.getBool(),this.content=decodeURI(this.getString()),this.nickname=this.getString()}},e.ReceivedGameInfo=class extends s.default{constructor(e){super(e),this.myChair=this.getByte(),this.chuongChair=this.getByte();var i=this.getShort();this.cards=[];for(var o=0;o<i;o++)this.cards.push(this.getByte());for(this.cuocDanhBienList=[],i=this.getShort(),o=0;o<i;o++)this.cuocDanhBienList[o]=this.getInt();for(this.cuocKeCuaList=[],i=this.getShort(),o=0;o<i;o++)this.cuocKeCuaList[o]=this.getInt();for(this.gameServerState=this.getByte(),this.isAutoStart=this.getBool(),this.gameAction=this.getByte(),this.countDownTime=this.getByte(),this.moneyType=this.getByte(),this.moneyBet=this.getLong(),this.gameId=this.getInt(),this.roomId=this.getInt(),this.hasInfo=[],i=this.getShort(),o=0;o<i;o++)this.hasInfo[o]=this.getBool();for(this.players=[],o=0;o<t.MAX_PLAYER;o++)this.hasInfo[o]?(this.players[o]=[],this.players[o].status=this.getByte(),this.players[o].money=this.getLong(),this.players[o].cuocGa=this.getInt(),this.players[o].cuocChuong=this.getInt(),this.players[o].avatar=this.getString(),this.players[o].nickName=this.getString()):(this.players[o]=[],this.players[o].status=0)}},e.ReceivedJoinRoomFail=class extends s.default{constructor(e){super(e)}}})(n=i.cmd||(i.cmd={})),i.default=n,cc._RF.pop()},{"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"../../Main/Game/src/networks/Network.OutPacket":void 0}],"BaiCao.Controller":[function(e,t,i){"use strict";cc._RF.push(t,"8823cz4QghOwpS4iXO2AMoB","BaiCao.Controller");var o,s=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../../Main/Game/src/common/BroadcastReceiver"),n=e("../../Main/Game/src/common/Utils"),r=e("../../Main/Game/src/common/App"),c=e("../../Main/Game/src/networks/Network.InPacket"),l=e("../../Main/Game/src/networks/Network.Cmd"),h=e("../../Main/Game/src/common/Configs"),d=e("./BaiCao.Cmd"),u=e("./BaiCao.NetworkClient"),p=e("./BaiCao.CardUtil"),g=e("../../Main/Game/src/networks/CardGame.Cmd"),C=e("../../Main/Game/src/games/cardgames/PopupChatInGame");var m=[];let f=[[0,1,2,3,4,5,6,7],[1,2,3,4,5,6,7,0],[2,3,4,5,6,7,0,1],[3,4,5,6,7,0,1,2],[4,5,6,7,0,1,2,3],[5,6,7,0,1,2,3,4],[6,7,0,1,2,3,4,5],[7,0,1,2,3,4,5,6]];const{ccclass:y,property:B}=cc._decorator;let R=o=class extends cc.Component{constructor(){super(...arguments),this.UI_ChooseRoom=null,this.labelNickName=null,this.sprAvatar=null,this.labelCoin=null,this.contentListRooms=null,this.prefabItemRoom=null,this.scrollListRoom=null,this.edtFindRoom=null,this.btnHideRoomFull=null,this.isInitedUIRoom=!1,this.UI_Playing=null,this.meCards=null,this.groupPlayers=null,this.spriteCards=[],this.spriteCardBack=null,this.matchPot=null,this.labelMatchPot=null,this.cardsDeal=null,this.btnBet=null,this.btnOpenCard=null,this.btnLeaveRoom=null,this.hubChips=null,this.labelRoomId=null,this.labelRoomBet=null,this.actionBetting=null,this.betChooseValue=null,this.betChooseValueTarget=null,this.popupMatchResult=null,this.contentMatchResult=null,this.prefabItemResult=null,this.scrollMatchResult=null,this.notifyTimeStart=null,this.notifyTimeEnd=null,this.notifyTimeBet=null,this.popupNodity=null,this.labelNotifyContent=null,this.popupGuide=null,this.noteChip=null,this.contentRaise=null,this.seatOwner=null,this.currentRoomBet=null,this.gameState=null,this.minutes=null,this.seconds=null,this.timeAutoStart=null,this.timeEnd=null,this.timeBet=null,this.intervalWaitting=null,this.intervalEnd=null,this.intervalBetting=null,this.currentCard=null,this.numCardOpened=0,this.arrBetValue=[],this.arrBetPos=[-157.5,-52.5,52.5,157.5],this.currentBetSelectedIndex=0,this.currentMatchPotValue=0,this.timeoutEndGame=null,this.timeoutChiaBaiDone=null,this.arrPosDanhBien=[],this.cardDefinations=[],this.isClickBack=!1}onLoad(){o.instance=this,this.initConfigPlayer()}start(){this.showUIRooms(),this.seatOwner=-1,this.isClickBack=!1,r.default.instance.showErrLoading("\u0110ang k\u1ebft n\u1ed1i t\u1edbi server..."),u.default.getInstance().addOnOpen(()=>{r.default.instance.showErrLoading("\u0110ang \u0111ang \u0111\u0103ng nh\u1eadp..."),u.default.getInstance().send(new l.default.SendLogin(h.default.Login.Nickname,h.default.Login.AccessToken))},this),u.default.getInstance().addOnClose(()=>{this.isClickBack||!h.default.Login.IsLogin?this.backToLobby():r.default.instance.alertDialog.showMsgWithOnDismissed("B\u1ea1n \u0111\xe3 m\u1ea5t k\u1ebft n\u1ed1i v\u1edbi server",()=>{this.backToLobby()})},this),u.default.getInstance().connect(),a.default.register(a.default.USER_DISCONNECTED,()=>{u.default.getInstance().close()},this),a.default.send(a.default.SET_SOUND,cc.find("Canvas"))}onDestroy(){clearTimeout(this.timeoutEndGame),clearTimeout(this.timeoutChiaBaiDone),this.unschedule(this.intervalWaitting),this.unschedule(this.intervalEnd),this.unschedule(this.intervalBetting)}joinRoom(e){cc.log("BaiCao joinRoom roomInfo : ",e),r.default.instance.showLoading(!0),u.default.getInstance().send(new d.default.SendJoinRoomById(e.id))}refeshListRoom(){this.contentListRooms.removeAllChildren(!0),u.default.getInstance().send(new d.default.SendGetListRoom)}findRoomId(){cc.log("BaiCao findRoomId id : ",this.edtFindRoom.string);let e=this.edtFindRoom.string.trim();if(e.length>0){let t=parseInt(e);for(let e=0;e<this.contentListRooms.childrenCount;e++)this.contentListRooms.children[e].getComponent("ItemRoom").roomInfo.id!=t&&(this.contentListRooms.children[e].active=!1)}else for(let t=0;t<this.contentListRooms.childrenCount;t++)this.contentListRooms.children[t].active=!0}hideRoomFull(){if(this.btnHideRoomFull.isChecked)for(let e=0;e<this.contentListRooms.childrenCount;e++){let t=this.contentListRooms.children[e].getComponent("ItemRoom");t.roomInfo.userCount==t.roomInfo.maxUserPerRoom&&(this.contentListRooms.children[e].active=!1)}else for(let e=0;e<this.contentListRooms.childrenCount;e++)this.contentListRooms.children[e].active=!0}showUIRooms(){this.UI_ChooseRoom.active=!0,this.isInitedUIRoom?a.default.send(a.default.USER_UPDATE_COIN):(this.isInitedUIRoom=!0,this.labelNickName.string=h.default.Login.Nickname,this.sprAvatar.spriteFrame=r.default.instance.getAvatarSpriteFrame(h.default.Login.Avatar),a.default.register(a.default.USER_UPDATE_COIN,()=>{this.labelCoin.string=n.default.formatNumber(h.default.Login.Coin)},this),a.default.send(a.default.USER_UPDATE_COIN),this.setupListener())}closeUIRoom(){this.UI_ChooseRoom.active=!1}createRoom(){cc.log("BaiCao createRoom")}playingNow(){cc.log("BaiCao playingNow");let e=[];for(let t=0;t<this.contentListRooms.childrenCount;t++)this.contentListRooms.children[t].getComponent("ItemRoom").roomInfo.requiredMoney<h.default.Login.Coin&&e.push(t);if(cc.log("BaiCao playingNow arrRoomOkMoney : ",e),e.length>0){let t=e[0];cc.log("BaiCao playingNow roomCrowed start : ",t);for(let o=0;o<e.length;o++){let i=this.contentListRooms.children[e[o]].getComponent("ItemRoom"),s=this.contentListRooms.children[t].getComponent("ItemRoom");cc.log("BaiCao playingNow ------------------------------------------"),cc.log("BaiCao playingNow roomItem : ",i.roomInfo.userCount),cc.log("BaiCao playingNow roomItemCrowed : ",s.roomInfo.userCount),i.roomInfo.userCount>s.roomInfo.userCount&&(t=e[o],cc.log("BaiCao playingNow roomCrowed update : ",t))}cc.log("BaiCao playingNow roomCrowed end : ",t);let i=this.contentListRooms.children[t].getComponent("ItemRoom");cc.log("BaiCao playingNow roomCrowed end roomInfo : ",i.roomInfo),this.joinRoom(i.roomInfo)}else r.default.instance.alertDialog.showMsg("Kh\xf4ng \u0111\u1ee7 ti\u1ec1n tham gia\nb\u1ea5t k\u1ef3 ph\xf2ng n\xe0o !")}showUIChat(){C.default.createAndShow(this.UI_Playing,this.cardDefinations,(e,t)=>{u.default.getInstance().send(new d.default.SendChatRoom(e,t))},(e,t)=>{u.default.getInstance().send(new d.default.SendCheatCards(e,t))})}closeUIChat(){}chatEmotion(e,t){}chatMsg(){}showPopupGuide(){this.popupGuide.active=!0}closePopupGuide(){this.popupGuide.active=!1}actBack(){this.isClickBack=!0,u.default.getInstance().close()}backToLobby(){r.default.instance.loadScene("Lobby")}showUIPlaying(){this.UI_Playing.active=!0}closeUIPlaying(){this.actionLeaveRoom()}setupMatch(e){this.showUIPlaying(),this.closePopupMatchResult(),this.closeUIChat();for(let n=1;n<8;n++)this.getPlayerHouse(n).showPopupBet(!1),this.getPlayerHouse(n).closePopupRequestDanhBien();cc.log("BaiCao setupMatch data : ",e);let t=e.chuongChair,i=(e.countDownTime,e.gameAction),o=(e.gameId,e.moneyBet),s=(e.moneyType,e.myChair),a=e.playerInfos,r=(e.playerSize,e.playerStatus),c=e.roomId;e.rule,this.labelRoomId.string="B\xc0I C\xc0O - PH\xd2NG: "+c,this.labelRoomBet.string="M\u1ee8C C\u01af\u1ee2C: "+n.default.formatNumber(o)+"$",this.currentRoomBet=o,this.gameState=i,m[0].playerId=h.default.Login.Nickname,m[0].playerPos=s,cc.log("BaiCao setupMatch configPlayer Me : ",m[0]),cc.log("BaiCao setupMatch configPlayer  : ",m);var l=0,u=[],p=[],g=[];for(let n=0;n<a.length;n++)""!==a[n].nickName&&(l+=1,u.push(n),p.push(a[n]),g.push(r[n]));cc.log("BaiCao numPlayers : ",l),this.resetHubChips();for(let n=0;n<m.length;n++)m[n].playerPos=f[s][n];for(let n=0;n<m.length;n++){let e=u.indexOf(m[n].playerPos);var C=m[n].seatId;this.getPlayerHouse(C).resetPlayerInfo(),e>-1?(g[e]==d.default.Code.PLAYER_STATUS_SITTING||g[e]==d.default.Code.PLAYER_STATUS_PLAYING?(m[n].isViewer=!1,this.getPlayerHouse(C).setIsViewer(!1)):(m[n].isViewer=!0,this.getPlayerHouse(C).setIsViewer(!0)),this.setupSeatPlayer(C,p[e])):(this.getPlayerHouse(C).showBtnInvite(!0),m[n].isViewer=!0)}for(let n=0;n<8;n++)this.getPlayerHouse(n).setOwner(!1);let y=this.findPlayerSeatByPos(t);-1!==y&&(this.getPlayerHouse(y).setOwner(!0),this.seatOwner=y),cc.log("BaiCao setupMatch configPlayer : ",m);let B="";switch(this.gameState){case 1:B="B\u1eaft \u0111\u1ea7u v\xe1n m\u1edbi";break;case 2:B="B\u1eaft \u0111\u1ea7u \u0111\u1eb7t c\u1eeda";break;case 3:break;case 4:B="Nh\xe0 c\xe1i c\xe2n ti\u1ec1n, ho\xe0n ti\u1ec1n";break;case 5:B="B\u1eaft \u0111\u1ea7u ho\xe0n ti\u1ec1n";break;case 6:B="B\u1eaft \u0111\u1ea7u tr\u1ea3 th\u01b0\u1edfng"}}startWaittingCountDown(e){this.timeAutoStart=e,this.setTimeWaittingCountDown(),this.notifyTimeStart.parent.active=!0,this.unschedule(this.intervalWaitting),this.schedule(this.intervalWaitting=()=>{this.timeAutoStart--,this.setTimeWaittingCountDown(),this.timeAutoStart<1&&(this.unschedule(this.intervalWaitting),this.notifyTimeStart.parent.active=!1)},1)}setTimeWaittingCountDown(){this.seconds=Math.floor(this.timeAutoStart%60),this.notifyTimeStart.getComponent(cc.Label).string=" B\u1eaft \u0111\u1ea7u sau : "+this.seconds+"s "}startEndCountDown(e){this.timeEnd=e,this.setTimeEndCountDown(),this.notifyTimeEnd.parent.active=!0,this.unschedule(this.intervalEnd),this.schedule(this.intervalEnd=()=>{this.timeEnd--,this.setTimeEndCountDown(),this.timeEnd<1&&(this.unschedule(this.intervalEnd),this.notifyTimeEnd.parent.active=!1)},1)}setTimeEndCountDown(){this.seconds=Math.floor(this.timeEnd%60),this.notifyTimeEnd.getComponent(cc.Label).string=" K\u1ebft th\xfac sau : "+this.seconds+"s "}startBettingCountDown(e){cc.log("BaiCao startBettingCountDown turnTime : ",e),this.timeBet=e,this.actionBetting.active=!0,this.processBetting(1),this.unschedule(this.intervalBetting),this.schedule(this.intervalBetting=()=>{this.timeBet--;var t=(this.timeBet/e).toFixed(1);this.processBetting(t),this.timeBet<1&&(this.unschedule(this.intervalBetting),this.actionBetting.active=!1)},1)}processBetting(e){cc.log("BaiCao processBetting rate : ",e),cc.log("BaiCao processBetting fillRange : ",this.actionBetting.children[0].getComponent(cc.Sprite).fillRange),this.actionBetting.children[0].getComponent(cc.Sprite).fillRange=e}getCardsScore(e){let t=0;cc.log("BaiCao getCardsScore -------------------------------------"),cc.log("BaiCao getCardsScore arrCards : ",e);for(let i=0;i<3;i++)t+=p.default.getDiemById(e[i]),cc.log("BaiCao getCardsScore ------------------------------------- : ",i),cc.log("BaiCao getCardsScore getSoById : ",p.default.getSoById(e[i])),cc.log("BaiCao getCardsScore getDiemById : ",p.default.getDiemById(e[i]));return 30==t?"3 T\xe2y":(t%=10)+"\u0110i\u1ec3m"}openMeCard(e,t){let i=parseInt(t);cc.log("BaiCao openMeCard cardPos : ",i),cc.log("BaiCao openMeCard currentCard : ",this.currentCard),this.getPlayerHouse(0).prepareCardReal(i);let o=p.default.getNormalId(this.currentCard[i]);this.getPlayerHouse(0).transformToCardReal(i,this.spriteCards[o]),this.numCardOpened+=1,3==this.numCardOpened&&(this.btnOpenCard.active=!0,this.btnBet.active=!1,this.getPlayerHouse(0).showCardName(this.getCardsScore(this.currentCard)),setTimeout(()=>{null!=this.node&&void 0!==this.node&&this.getPlayerHouse(0).resetCardReady()},200))}moveChipsToHubNow(e){this.hubChips.children[2*e].setPosition(cc.v2(25,80)),this.hubChips.children[2*e].scale=0,this.hubChips.children[2*e+1].setPosition(cc.v2(25,80)),this.hubChips.children[2*e+1].scale=0}fxMoveChips(e,t,i,o){e.runAction(cc.sequence(cc.delayTime(t),cc.scaleTo(0,1,1),cc.spawn(cc.moveTo(.8,i,o),cc.scaleTo(.8,0,0))))}resetHubChips(){var e=[70,280,280,260,100,-260,-375,-360],t=[-195,-150,-55,70,90,85,-30,-155];for(let i=0;i<8;i++)this.hubChips.children[2*i].setPosition(cc.v2(e[i],t[i])),this.hubChips.children[2*i+1].setPosition(cc.v2(e[i],t[i]));for(let i=0;i<16;i++)this.hubChips.children[i].active=!1}setupBet(){this.currentBetSelectedIndex=0,this.betChooseValueTarget.y=this.arrBetPos[this.currentBetSelectedIndex]}showPopupMatchResult(e){this.popupMatchResult.active=!0,this.contentMatchResult.removeAllChildren(!0);for(let t=0;t<e.length;t++){let i=cc.instantiate(this.prefabItemResult);i.getComponent("BaiCao.ItemResult").initItem(e[t]),this.contentMatchResult.addChild(i)}this.scrollMatchResult.scrollToTop(.2)}closePopupMatchResult(){this.popupMatchResult.active=!1}setupListener(){u.default.getInstance().addListener(e=>{let t=new c.default(e);switch(t.getCmdId()){case d.default.Code.LOGIN:r.default.instance.showLoading(!1),this.refeshListRoom(),u.default.getInstance().send(new d.default.CmdReconnectRoom);break;case d.default.Code.TOPSERVER:r.default.instance.showLoading(!1),cc.log("BaiCao TOPSERVER");break;case d.default.Code.CMD_PINGPONG:r.default.instance.showLoading(!1),cc.log("BaiCao CMD_PINGPONG");break;case d.default.Code.CMD_JOIN_ROOM:r.default.instance.showLoading(!1),cc.log("BaiCao CMD_JOIN_ROOM");break;case d.default.Code.CMD_RECONNECT_ROOM:case d.default.Code.CMD_RECONNECT_ROOM:r.default.instance.showLoading(!1),cc.log("BaiCao CMD_RECONNECT_ROOM");break;case d.default.Code.MONEY_BET_CONFIG:{r.default.instance.showLoading(!1),cc.log("BaiCao MONEY_BET_CONFIG");let t=new g.default.ResMoneyBetConfig(e);cc.log(t),this.initRooms(t.list)}break;case d.default.Code.JOIN_ROOM_FAIL:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedJoinRoomFail(e);cc.log("BaiCao JOIN_ROOM_FAIL res : ",JSON.stringify(t));let i="L\u1ed7i "+t.getError()+", kh\xf4ng x\xe1c \u0111\u1ecbnh.";switch(t.getError()){case 1:i="L\u1ed7i ki\u1ec3m tra th\xf4ng tin!";break;case 2:i="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 3:i="B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n v\xe0o ph\xf2ng ch\u01a1i n\xe0y!";break;case 4:i="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 5:i="M\u1ed7i l\u1ea7n v\xe0o ph\xf2ng ph\u1ea3i c\xe1ch nhau 10 gi\xe2y!";break;case 6:i="H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!";break;case 7:i="Kh\xf4ng t\xecm th\u1ea5y ph\xf2ng ch\u01a1i!";break;case 8:i="M\u1eadt kh\u1ea9u ph\xf2ng ch\u01a1i kh\xf4ng \u0111\xfang!";break;case 9:i="Ph\xf2ng ch\u01a1i \u0111\xe3 \u0111\u1ee7 ng\u01b0\u1eddi!";break;case 10:i="B\u1ea1n b\u1ecb ch\u1ee7 ph\xf2ng kh\xf4ng cho v\xe0o b\xe0n!"}r.default.instance.alertDialog.showMsg(i)}break;case d.default.Code.GET_LIST_ROOM:cc.log("BaiCao GET_LIST_ROOM");break;case d.default.Code.JOIN_GAME_ROOM_BY_ID:r.default.instance.showLoading(!1),cc.log("BaiCao JOIN_GAME_ROOM_BY_ID");break;case d.default.Code.MO_BAI:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedMoBai(e);cc.log("BaiCao ReceivedMoBai res : ",JSON.stringify(t));let i=t.chairMoBai,o=t.cards,s=this.findPlayerSeatByPos(i);if(-1!=s&&0!=s){this.getPlayerHouse(s).prepareToTransform();for(let e=0;e<3;e++){let t=p.default.getNormalId(o[e]);this.getPlayerHouse(s).transformToCardReal(e,this.spriteCards[t])}this.getPlayerHouse(s).showCardName(this.getCardsScore(o))}}break;case d.default.Code.BAT_DAU:{r.default.instance.showLoading(!1),cc.log("BaiCao BAT_DAU");let t=new d.default.ReceivedFirstTurnDecision(e);cc.log("BaiCao ReceivedFirstTurnDecision res : ",JSON.stringify(t)),this.resetHubChips(),this.closePopupMatchResult()}break;case d.default.Code.KET_THUC:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedEndGame(e);cc.log("BaiCao ReceivedEndGame res : ",JSON.stringify(t)),this.unschedule(this.intervalEnd),this.notifyTimeEnd.parent.active=!1;let i=t.cardList,o=(t.tienThangChuong,t.tienThangGa,t.keCuaMoneyList,t.danhBienMoneyList,t.tongTienCuoiVan,t.tongTienCuocList),s=t.tongDanhBienList,n=t.tongKeCuaList,c=t.tongCuocGaList,l=t.tongCuoiVanList,u=t.currentMoneyList,g=(t.timeEndGame,[]);for(let e=0;e<8;e++)i[e].length>0&&g.push(e);cc.log("BaiCao ReceivedEndGame posPlaying : ",g);let C=[];for(let e=0;e<8;e++){let t=g.indexOf(m[e].playerPos);if(-1!==t){cc.log("--------------------------------"),cc.log("playerId : ",m[e].playerId),cc.log("bet : ",o[g[t]]),cc.log("bien : ",s[g[t]]),cc.log("ke : ",n[g[t]]),cc.log("ga : ",c[g[t]]),cc.log("total : ",l[g[t]]),cc.log("money : ",u[g[t]]);let r=i[g[t]],d=this.getPlayerHouse(e).node.children[2].children[0];for(let t=0;t<3;t++)if(1==d.children[t].scale){let i=p.default.getNormalId(r[t]);this.getPlayerHouse(e).transformToCardReal(t,this.spriteCards[i])}this.getPlayerHouse(e).showCardName(this.getCardsScore(r)),C.push({userName:m[e].playerId,bet:o[g[t]],bien:s[g[t]],ke:n[g[t]],ga:c[g[t]],total:l[g[t]]});let f={moneyChange:l[g[t]],money:u[g[t]],ga:c[g[t]]};0==e&&(h.default.Login.Coin=f.money,a.default.send(a.default.USER_UPDATE_COIN)),f.moneyChange>=0?this.getPlayerHouse(e).fxWin(f):this.getPlayerHouse(e).fxLose(f)}}C.length>0&&setTimeout(()=>{null!=this.node&&void 0!==this.node&&this.showPopupMatchResult(C)},4e3)}break;case d.default.Code.YEU_CAU_DANH_BIEN:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedYeuCauDanhBien(e);cc.log("BaiCao ReceivedYeuCauDanhBien res : ",JSON.stringify(t));let i=t.danhBienChair,o=t.level;if(this.arrPosDanhBien.indexOf(i)>-1);else{let e=this.currentRoomBet*o,t=this.findPlayerSeatByPos(i);-1!=t&&this.getPlayerHouse(t).showPopupRequestDanhBien(e)}}break;case d.default.Code.CHIA_BAI:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedChiaBai(e);cc.log("BaiCao ReceivedChiaBai res : ",JSON.stringify(t)),this.btnBet.active=!1,this.btnOpenCard.active=!1;for(let e=1;e<8;e++)this.getPlayerHouse(e).showPopupBet(!1),this.getPlayerHouse(e).closePopupRequestDanhBien();this.matchPot.getComponent(cc.Button).interactable=!1,this.matchPot.children[0].color=cc.Color.GRAY;let o=t.cards,s=t.timeChiaBai;clearTimeout(this.timeoutEndGame),this.timeoutEndGame=setTimeout(()=>{null!=this.node&&void 0!==this.node&&this.startEndCountDown(s)},2e3),this.currentCard=o,cc.log("BaiCao ReceivedChiaBai currentCard : ",this.currentCard);var i=this.getNumPlayers();let a=i.length;for(let e=0;e<24;e++)this.cardsDeal.children[e].active=!(e>=3*a),this.cardsDeal.children[e].setPosition(cc.v2(0,0));let n=.1;for(let e=0;e<3;e++)for(let t=0;t<a;t++){let o=i[t];if(-1!==o){let i=this.cardsDeal.children[e*a+t],s=this.groupPlayers.children[o].getPosition();cc.log("BaiCao CHIA_BAI delayTime : ",(e*a+t)*n),i.runAction(cc.sequence(cc.delayTime((e*a+t)*n),cc.moveTo(.2,s)))}}let c=1e3*(.4+(2*a+(a-1))*n);cc.log("CHIA_BAI timeUnderLayer : ",c),clearTimeout(this.timeoutChiaBaiDone),this.timeoutChiaBaiDone=setTimeout(()=>{if(null!=this.node&&void 0!==this.node){for(let e=0;e<24;e++)cc.log("CHIA_BAI cardsDeal index : ",e),this.cardsDeal.children[e].active=!1;for(let e=0;e<a;e++){let t=i[e];-1!==t&&(0==t&&this.getPlayerHouse(t).resetCardReady(),this.getPlayerHouse(t).showCardReady(!0),this.getPlayerHouse(t).showCardReal(!1))}}},c)}break;case d.default.Code.KE_CUA:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedKeCua(e);cc.log("BaiCao ReceivedKeCua res : ",JSON.stringify(t)),t.chairKeCuaFrom,t.chairKeCuaTo,t.level}break;case d.default.Code.TU_DONG_BAT_DAU:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedAutoStart(e);cc.log("BaiCao ReceiveAutoStart res : ",JSON.stringify(t)),t.isAutoStart&&(this.resetHubChips(),this.startWaittingCountDown(t.timeAutoStart),this.btnBet.active=!1,this.btnOpenCard.active=!1,this.matchPot.active=!1,this.matchPot.getComponent(cc.Button).interactable=!0,this.matchPot.children[0].color=cc.Color.WHITE,this.resetPlayersPlaying(),this.arrPosDanhBien=[]),this.closePopupMatchResult()}break;case d.default.Code.DONG_Y_DANH_BIEN:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedChapNhanDanhBien(e);cc.log("BaiCao ReceivedChapNhanDanhBien res : ",JSON.stringify(t));let i=t.danhBienChair,o=t.level;this.arrPosDanhBien.push(i);let s=this.findPlayerSeatByPos(i);-1!=s&&(cc.log("BaiCao ReceivedChapNhanDanhBien Me seatId : 0"),cc.log("BaiCao ReceivedChapNhanDanhBien Bien seatId : ",s),this.getPlayerHouse(s).disableDanhBien(o),this.getPlayerHouse(s).playFxDanhBien())}break;case d.default.Code.DAT_CUOC:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedDatCuoc(e);cc.log("BaiCao ReceivedDatCuoc res : ",JSON.stringify(t));let i=t.chairDatCuoc,o=t.level,s=this.findPlayerSeatByPos(i);-1!=s&&(this.getPlayerHouse(s).setBet(this.arrBetValue[o-1]),this.getPlayerHouse(s).addChips())}break;case d.default.Code.THONG_TIN_BAN_CHOI:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedGameInfo(e);cc.log("BaiCao ReceivedGameInfo res : ",JSON.stringify(t)),this.closeUIRoom(),this.showUIPlaying(),this.closePopupMatchResult(),this.closeUIChat();let i=t.myChair,a=t.chuongChair,c=t.cards,u=(t.cuocDanhBienList,t.cuocKeCuaList,t.gameServerState,t.isAutoStart,t.gameAction),p=(t.countDownTime,t.moneyType,t.moneyBet),g=(t.gameId,t.roomId),C=t.hasInfo;t.players,this.labelRoomId.string="B\xc0I C\xc0O - PH\xd2NG: "+g,this.labelRoomBet.string="M\u1ee8C C\u01af\u1ee2C: "+n.default.formatNumber(p)+"$",this.currentRoomBet=p,this.gameState=u,this.currentCard=c,m[0].playerId=h.default.Login.Nickname,m[0].playerPos=i,cc.log("BaiCao setupMatch configPlayer Me : ",m[0]),cc.log("BaiCao setupMatch configPlayer  : ",m);var o=0,s=[];for(let e=0;e<C.length;e++)C[e]&&(o+=1,s.push(e));cc.log("BaiCao numPlayers : ",o);for(let e=0;e<m.length;e++)m[e].playerPos=f[i][e];for(let e=0;e<m.length;e++){let t=s.indexOf(m[e].playerPos);var l=m[e].seatId;this.getPlayerHouse(l).resetPlayerInfo(),t>-1?(this.getPlayerHouse(l).setIsViewer(!1),this.setupSeatPlayer(l,{nickName:"",avatar:n.default.randomRange(1,9),money:""})):(this.getPlayerHouse(l).showBtnInvite(!0),m[e].isViewer=!0)}for(let e=0;e<8;e++)this.getPlayerHouse(e).setOwner(!1);let y=this.findPlayerSeatByPos(a);-1!==y&&(this.getPlayerHouse(y).setOwner(!0),this.seatOwner=y),this.resetHubChips()}break;case d.default.Code.DANG_KY_THOAT_PHONG:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedNotifyRegOutRoom(e);cc.log("BaiCao ReceivedNotifyRegOutRoom res : ",JSON.stringify(t));let i=t.outChair,o=t.isOutRoom,s=this.findPlayerSeatByPos(i);-1!==s&&(o?this.getPlayerHouse(s).showNotify("S\u1eafp r\u1eddi b\xe0n !"):this.getPlayerHouse(s).showNotify("Kh\xf4 M\xe1u !"))}break;case d.default.Code.VAO_GA:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedVaoGa(e);cc.log("BaiCao ReceivedVaoGa res : ",JSON.stringify(t));let i=t.chair,o=t.chicKenBet,s=this.findPlayerSeatByPos(i);-1!=s&&(this.hubChips.children[2*s].active=!0,this.hubChips.children[2*s+1].active=!0,this.fxMoveChips(this.hubChips.children[2*s],.1,this.matchPot.x,this.matchPot.y),this.fxMoveChips(this.hubChips.children[2*s+1],.2,this.matchPot.x,this.matchPot.y),this.currentMatchPotValue+=o,this.labelMatchPot.string=n.default.formatNumber(this.currentMatchPotValue),this.getPlayerHouse(s).playFxVaoGa())}break;case d.default.Code.DOI_CHUONG:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedDoiChuong(e);cc.log("BaiCao ReceivedDoiChuong res : ",JSON.stringify(t));for(let e=0;e<8;e++)this.getPlayerHouse(e).setOwner(!1);let i=this.findPlayerSeatByPos(t.chuongChair);-1!=i&&(this.getPlayerHouse(i).setOwner(!0),this.seatOwner=i)}break;case d.default.Code.MOI_DAT_CUOC:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedMoiDatCuoc(e);cc.log("BaiCao ReceivedMoiDatCuoc res : ",JSON.stringify(t)),this.startBettingCountDown(t.timeDatCuoc),this.arrBetValue=[],this.matchPot.active=!0,this.currentMatchPotValue=0,this.labelMatchPot.string="0";for(let e=0;e<4;e++){this.arrBetValue.push(this.currentRoomBet*(e+1));let t=this.currentRoomBet*(4-e);this.betChooseValue.children[e].children[0].getComponent(cc.Label).string=1500==t?"1.5K":n.default.formatNumberMin(t)}0==this.seatOwner?(this.btnOpenCard.active=!1,this.btnBet.active=!1,this.matchPot.getComponent(cc.Button).interactable=!1,this.matchPot.children[0].color=cc.Color.GRAY):(this.btnBet.active=!0,this.btnOpenCard.active=!1,this.matchPot.getComponent(cc.Button).interactable=!0,this.matchPot.children[0].color=cc.Color.WHITE,this.setupBet(),cc.log("BaiCao MOI_DAT_CUOC this.arrBetValue : ",this.arrBetValue)),this.numCardOpened=0}break;case d.default.Code.CHEAT_CARDS:r.default.instance.showLoading(!1),cc.log("BaiCao CHEAT_CARDS");break;case d.default.Code.DANG_KY_CHOI_TIEP:r.default.instance.showLoading(!1),cc.log("BaiCao DANG_KY_CHOI_TIEP");break;case d.default.Code.UPDATE_OWNER_ROOM:r.default.instance.showLoading(!1),cc.log("BaiCao UPDATE_OWNER_ROOM");break;case d.default.Code.JOIN_ROOM_SUCCESS:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedJoinRoomSucceed(e);this.closeUIRoom(),this.setupMatch(t)}break;case d.default.Code.LEAVE_GAME:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedUserLeaveRoom(e);cc.log("BaiCao ReceivedUserLeaveRoom res : ",JSON.stringify(t));let i=t.chair,o=this.findPlayerSeatByPos(i);if(-1!==o){for(let e=0;e<m.length;e++)m[e].seatId==o&&(m[e].playerId=-1,m[e].isViewer=!0);this.getPlayerHouse(o).resetPlayerInfo(),this.getPlayerHouse(o).showBtnInvite(!0),1==this.getNumPlayers().length&&(this.resetPlayersPlaying(),this.matchPot.active=!1),0==o&&(this.UI_Playing.active=!1,this.UI_ChooseRoom.active=!0,this.refeshListRoom())}}break;case d.default.Code.NOTIFY_KICK_FROM_ROOM:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedKickOff(e);cc.log("BaiCao ReceivedKickOff res : ",JSON.stringify(t)),this.onKickFromRoom(t.reason)}break;case d.default.Code.NEW_USER_JOIN:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedUserJoinRoom(e);cc.log("BaiCao ReceivedUserJoinRoom res : ",JSON.stringify(t));let i=t.info,o=t.uChair,s=t.uStatus;for(let e=0;e<m.length;e++)if(m[e].playerPos==o){l=m[e].seatId,this.getPlayerHouse(l).resetPlayerInfo();var C={avatar:i.avatar,nickName:i.nickName,money:i.money};this.setupSeatPlayer(l,C),s==d.default.Code.PLAYER_STATUS_VIEWER?(this.getPlayerHouse(l).setIsViewer(!0),m[l].isViewer=!0):(m[l].isViewer=!1,this.getPlayerHouse(l).setIsViewer(!1))}}break;case d.default.Code.NOTIFY_USER_GET_JACKPOT:r.default.instance.showLoading(!1),cc.log("BaiCao NOTIFY_USER_GET_JACKPOT");break;case d.default.Code.UPDATE_MATCH:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedUpdateMatch(e);cc.log("BaiCao ReceivedUpdateMatch res : ",JSON.stringify(t)),t.myChair;let i=t.hasInfo,o=t.infos;cc.log("BaiCao setupMatch configPlayer : ",m);for(let e=0;e<i.length;e++){let t=m[e].playerPos;i[t]?(this.getPlayerHouse(e).setGold(o[t].money),m[e].playerId=o[t].nickName,o[t].status==d.default.Code.PLAYER_STATUS_SITTING||o[t].status==d.default.Code.PLAYER_STATUS_PLAYING?(m[e].isViewer=!1,this.getPlayerHouse(e).setIsViewer(!1)):(m[e].isViewer=!0,this.getPlayerHouse(e).setIsViewer(!0)),this.setupSeatPlayer(e,o[t])):(m[e].playerId=-1,m[e].isViewer=!0)}cc.log("BaiCao setupMatch configPlayer : ",m)}break;case d.default.Code.CHAT_ROOM:{r.default.instance.showLoading(!1);let t=new d.default.ReceivedChatRoom(e);cc.log("BaiCao CHAT_ROOM res : ",JSON.stringify(t));let i=t.chair,o=t.isIcon,s=t.content;if(o){let e=this.findPlayerSeatByPos(i);-1!=e&&this.getPlayerHouse(e).showChatEmotion(s)}else{let e=this.findPlayerSeatByPos(i);-1!=e&&this.getPlayerHouse(e).showChatMsg(s)}}break;default:cc.log("--inpacket.getCmdId(): "+t.getCmdId())}},this)}initRooms(e){let t=[];this.contentListRooms.removeAllChildren();for(let o=0;o<e.length;o++){let i=e[o];-1==t.indexOf(i.moneyBet)&&i.moneyType==h.default.App.MONEY_TYPE&&t.push(i.moneyBet)}t.sort(function(e,t){return e-t});for(let o=0;o<t.length;o++){let s=0,a=0,n=0;for(let i=0;i<e.length;i++){let r=e[i];r.moneyBet==t[o]&&(s+=r.nPersion,a=r.maxUserPerRoom,n=r.moneyRequire)}var i=cc.instantiate(this.prefabItemRoom);i.getComponent("ItemRoom").initItem({id:o+1,moneyBet:t[o],requiredMoney:n,userCount:s,maxUserPerRoom:a}),i.getComponent("ItemRoom").labelNumPlayers.string=s,i.on(cc.Node.EventType.TOUCH_END,()=>{h.default.Login.Coin<n?r.default.instance.alertDialog.showMsg("B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n \u0111\u1ec3 v\xe0o ch\u01a1i b\xe0n n\xe0y!"):u.default.getInstance().send(new g.default.SendJoinRoom(h.default.App.MONEY_TYPE,a,t[o],0))}),i.y=-30;let c=.2*.7*(1===o?.8:1-Math.pow(2,-10*o));i.runAction(cc.sequence(cc.fadeOut(0),cc.delayTime(.105*(t.length-o)),cc.spawn(cc.fadeIn(c),cc.moveTo(c,cc.v2(0,-30-85*o)).easing(cc.easeCircleActionOut())))),i.parent=this.contentListRooms}this.contentListRooms.parent.parent.getComponent(cc.ScrollView).scrollToBottom(0),this.contentListRooms.parent.parent.getComponent(cc.ScrollView).scrollToTop(2)}actionLeaveRoom(){u.default.getInstance().send(new d.default.CmdSendRequestLeaveGame)}actionOpenCard(){u.default.getInstance().send(new d.default.CmdSendMoBai),this.btnOpenCard.active=!1}actionSendVaoGa(){cc.log("BaiCao actionSendVaoGa"),u.default.getInstance().send(new d.default.SendVaoGa),this.matchPot.children[0].color=cc.Color.WHITE,this.matchPot.getComponent(cc.Button).interactable=!1}actionAcceptDanhBien(e,t){cc.log("BaiCao actionAcceptDanhBien seatId : ",t),cc.log("BaiCao actionAcceptDanhBien playerPos : ",m[t].playerPos),u.default.getInstance().send(new d.default.CmdSendAcceptDanhBien(m[t].playerPos)),this.getPlayerHouse(t).closePopupRequestDanhBien(!1)}actionRejectDanhBien(e,t){this.getPlayerHouse(t).closePopupRequestDanhBien(!1)}increaseBetValue(){this.currentBetSelectedIndex==this.arrBetValue.length-1||(this.currentBetSelectedIndex+=1),this.betChooseValueTarget.y=this.arrBetPos[this.currentBetSelectedIndex],this.modifyRaise(1)}decreaseBetValue(){0==this.currentBetSelectedIndex||(this.currentBetSelectedIndex-=1),this.betChooseValueTarget.y=this.arrBetPos[this.currentBetSelectedIndex],this.modifyRaise(0)}modifyRaise(e){if(e>0){if(this.contentRaise.childrenCount<20)for(let t=0;t<5;t++){let e=cc.instantiate(this.noteChip);this.contentRaise.addChild(e)}}else for(let t=0;t<5;t++)this.contentRaise.childrenCount>1&&this.contentRaise.removeChild(this.contentRaise.getChildByName("chip"))}actionBet(){cc.log("BaiCao actionBet betted : ",this.arrBetValue[this.currentBetSelectedIndex]),u.default.getInstance().send(new d.default.CmdSendDatCuoc(this.currentBetSelectedIndex+1)),this.btnBet.active=!1;for(let e=0;e<m.length;e++)e===this.seatOwner||m[e].isViewer||-1===m[e].playerId||(cc.log("BaiCao ReceivedMoiDatCuoc index : ",e),this.getPlayerHouse(e).setBet(this.currentRoomBet),this.getPlayerHouse(e).addChips(),0!=e&&(this.getPlayerHouse(e).showPopupBet(!0),this.getPlayerHouse(e).setupBetValue(this.currentRoomBet)))}actionDanhBien(e,t){cc.log("BaiCao actionDanhBien id : ",t);let i=parseInt(t.substring(0,1)),o=parseInt(t.substring(1,2));cc.log("BaiCao actionDanhBien seatId : ",i),cc.log("BaiCao actionDanhBien level : ",o);let s=this.findPlayerPosBySeat(i);cc.log("BaiCao actionDanhBien pos : ",s),-1!=s&&(cc.log("BaiCao actionDanhBien ------------"),cc.log("BaiCao actionDanhBien seatId : ",i),cc.log("BaiCao actionDanhBien pos : ",s),cc.log("BaiCao actionDanhBien seatId : 0"),cc.log("BaiCao actionDanhBien me : ",m[0].playerPos),cc.log("BaiCao actionDanhBien ------------"),this.getPlayerHouse(i).disableDanhBien(o),this.getPlayerHouse(i).showNotify("\u0110\xe1nh bi\xean"),u.default.getInstance().send(new d.default.CmdSendDanhBien(s,o)))}actionKeCua(e,t){cc.log("BaiCao actionKeCua id : ",t);let i=parseInt(t.substring(0,1)),o=parseInt(t.substring(1,2))-2;cc.log("BaiCao actionKeCua seatId : ",i),cc.log("BaiCao actionKeCua level : ",o);let s=this.findPlayerPosBySeat(i);cc.log("BaiCao actionKeCua pos : ",s),-1!=s&&(this.getPlayerHouse(i).disableKeCua(o),u.default.getInstance().send(new d.default.CmdSendKeCua(s,o)))}initConfigPlayer(){m=[];for(let e=0;e<8;e++)m.push({seatId:e,playerId:-1,playerPos:-1,isViewer:!0});cc.log("BaiCao configPlayer : ",m)}resetPlayersPlaying(){for(let e=0;e<8;e++)this.getPlayerHouse(e).resetMatchHistory()}setupSeatPlayer(e,t){cc.log("BaiCao setupSeatPlayer playerInfo : ",t),m[e].playerId=t.nickName,this.getPlayerHouse(e).setAvatar(t.avatar),this.getPlayerHouse(e).setName(t.nickName),this.getPlayerHouse(e).setGold(t.money)}findPlayerSeatByUid(e){let t=-1;for(let i=0;i<m.length;i++)m[i].playerId===e&&(t=m[i].seatId);return t}findPlayerPosBySeat(e){return m[e].playerPos}findPlayerSeatByPos(e){if(-1==e)return-1;let t=-1;for(let i=0;i<m.length;i++)m[i].playerPos===e&&(t=m[i].seatId);return t}getPlayerHouse(e){return this.groupPlayers.children[e].getComponent("BaiCao.Player")}getNumPlayers(){cc.log("playerPosEntry configPlayer : ",m);var e=[];for(let t=0;t<m.length;t++)cc.log("playerPosEntry playerId : ",m[t].playerId),cc.log("playerPosEntry isViewer : ",m[t].isViewer),cc.log("-------------------------------------"),-1===m[t].playerId||m[t].isViewer||(e.push(m[t].seatId),cc.log("playerPosEntry seatId : ",m[t].seatId));return cc.log("playerPosEntry : ",e),e}onKickFromRoom(e){let t="B\u1ea1n b\u1ecb kick kh\u1ecfi b\xe0n ch\u01a1i!";switch(e){case d.default.Code.ERROR_MONEY:t="Ti\u1ec1n trong b\xe0n kh\xf4ng \u0111\u1ee7 \u0111\u1ec3 ti\u1ebfp t\u1ee5c!";break;case d.default.Code.ERROR_BAO_TRI:t="H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!"}for(let i=0;i<m.length;i++)0==m[i].seatId&&(m[i].playerId=-1,m[i].isViewer=!0);this.getPlayerHouse(0).resetPlayerInfo(),this.getPlayerHouse(0).showBtnInvite(!0),1==this.getNumPlayers().length&&(this.resetPlayersPlaying(),this.matchPot.active=!1),this.UI_Playing.active=!1,this.UI_ChooseRoom.active=!0,this.refeshListRoom(),this.scheduleOnce(()=>{r.default.instance.alertDialog.showMsg(t)},.5)}};R.instance=null,s([B(cc.Node)],R.prototype,"UI_ChooseRoom",void 0),s([B(cc.Label)],R.prototype,"labelNickName",void 0),s([B(cc.Sprite)],R.prototype,"sprAvatar",void 0),s([B(cc.Label)],R.prototype,"labelCoin",void 0),s([B(cc.Node)],R.prototype,"contentListRooms",void 0),s([B(cc.Prefab)],R.prototype,"prefabItemRoom",void 0),s([B(cc.ScrollView)],R.prototype,"scrollListRoom",void 0),s([B(cc.EditBox)],R.prototype,"edtFindRoom",void 0),s([B(cc.Toggle)],R.prototype,"btnHideRoomFull",void 0),s([B(cc.Node)],R.prototype,"UI_Playing",void 0),s([B(cc.Node)],R.prototype,"meCards",void 0),s([B(cc.Node)],R.prototype,"groupPlayers",void 0),s([B(cc.SpriteFrame)],R.prototype,"spriteCards",void 0),s([B(cc.SpriteFrame)],R.prototype,"spriteCardBack",void 0),s([B(cc.Node)],R.prototype,"matchPot",void 0),s([B(cc.Label)],R.prototype,"labelMatchPot",void 0),s([B(cc.Node)],R.prototype,"cardsDeal",void 0),s([B(cc.Node)],R.prototype,"btnBet",void 0),s([B(cc.Node)],R.prototype,"btnOpenCard",void 0),s([B(cc.Button)],R.prototype,"btnLeaveRoom",void 0),s([B(cc.Node)],R.prototype,"hubChips",void 0),s([B(cc.Label)],R.prototype,"labelRoomId",void 0),s([B(cc.Label)],R.prototype,"labelRoomBet",void 0),s([B(cc.Node)],R.prototype,"actionBetting",void 0),s([B(cc.Node)],R.prototype,"betChooseValue",void 0),s([B(cc.Node)],R.prototype,"betChooseValueTarget",void 0),s([B(cc.Node)],R.prototype,"popupMatchResult",void 0),s([B(cc.Node)],R.prototype,"contentMatchResult",void 0),s([B(cc.Prefab)],R.prototype,"prefabItemResult",void 0),s([B(cc.ScrollView)],R.prototype,"scrollMatchResult",void 0),s([B(cc.Node)],R.prototype,"notifyTimeStart",void 0),s([B(cc.Node)],R.prototype,"notifyTimeEnd",void 0),s([B(cc.Node)],R.prototype,"notifyTimeBet",void 0),s([B(cc.Node)],R.prototype,"popupNodity",void 0),s([B(cc.Label)],R.prototype,"labelNotifyContent",void 0),s([B(cc.Node)],R.prototype,"popupGuide",void 0),s([B(cc.Node)],R.prototype,"noteChip",void 0),s([B(cc.Node)],R.prototype,"contentRaise",void 0),R=o=s([y],R),i.default=R,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/common/Utils":void 0,"../../Main/Game/src/games/cardgames/PopupChatInGame":void 0,"../../Main/Game/src/networks/CardGame.Cmd":void 0,"../../Main/Game/src/networks/Network.Cmd":void 0,"../../Main/Game/src/networks/Network.InPacket":void 0,"./BaiCao.CardUtil":"BaiCao.CardUtil","./BaiCao.Cmd":"BaiCao.Cmd","./BaiCao.NetworkClient":"BaiCao.NetworkClient"}],"BaiCao.ItemResult":[function(e,t,i){"use strict";cc._RF.push(t,"bfa281xRbFIXYvZlv9D71E0","BaiCao.ItemResult");var o=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../Main/Game/src/common/Utils"),{ccclass:a,property:n}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.labelUserName=null,this.labelBet=null,this.labelBien=null,this.labelKe=null,this.labelGa=null,this.labelTotal=null}start(){}initItem(e){this.labelUserName.string=e.userName,this.labelBet.string=s.default.formatNumber(e.bet),this.labelBien.string=s.default.formatNumber(e.bien),this.labelKe.string=s.default.formatNumber(e.ke),this.labelGa.string=s.default.formatNumber(e.ga),this.labelTotal.string=s.default.formatNumber(e.total),this.labelBet.node.color=e.bet>0?cc.Color.YELLOW:cc.Color.WHITE,this.labelBien.node.color=e.bien>0?cc.Color.YELLOW:cc.Color.WHITE,this.labelKe.node.color=e.ke>0?cc.Color.YELLOW:cc.Color.WHITE,this.labelGa.node.color=e.ga>0?cc.Color.YELLOW:cc.Color.WHITE,this.labelTotal.node.color=e.total>0?cc.Color.YELLOW:cc.Color.WHITE}};o([n(cc.Label)],r.prototype,"labelUserName",void 0),o([n(cc.Label)],r.prototype,"labelBet",void 0),o([n(cc.Label)],r.prototype,"labelBien",void 0),o([n(cc.Label)],r.prototype,"labelKe",void 0),o([n(cc.Label)],r.prototype,"labelGa",void 0),o([n(cc.Label)],r.prototype,"labelTotal",void 0),r=o([a],r),i.default=r,cc._RF.pop()},{"../../Main/Game/src/common/Utils":void 0}],"BaiCao.ItemRoom":[function(e,t,i){"use strict";cc._RF.push(t,"35822yBG6dOfY3wYyq4yJS6","BaiCao.ItemRoom");var o=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./BaiCao.Controller"),a=e("../../Main/Game/src/common/Utils"),{ccclass:n,property:r}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.labelId=null,this.labelBet=null,this.labelBetMin=null,this.labelNumPlayers=null,this.progressNumPlayers=null,this.roomInfo=null}start(){}initItem(e){this.roomInfo=e,cc.log(e),this.labelId.string=a.default.formatNumber(e.id),this.labelBet.string=a.default.formatNumber(e.moneyBet),this.labelBetMin.string=a.default.formatNumber(e.requiredMoney),this.labelNumPlayers.string=e.userCount+"/"+e.maxUserPerRoom,this.progressNumPlayers.fillRange=e.userCount/e.maxUserPerRoom}chooseRoom(){s.default.instance.joinRoom(this.roomInfo)}};o([r(cc.Label)],c.prototype,"labelId",void 0),o([r(cc.Label)],c.prototype,"labelBet",void 0),o([r(cc.Label)],c.prototype,"labelBetMin",void 0),o([r(cc.Label)],c.prototype,"labelNumPlayers",void 0),o([r(cc.Sprite)],c.prototype,"progressNumPlayers",void 0),c=o([n],c),i.default=c,cc._RF.pop()},{"../../Main/Game/src/common/Utils":void 0,"./BaiCao.Controller":"BaiCao.Controller"}],"BaiCao.NetworkClient":[function(e,t,i){"use strict";cc._RF.push(t,"49497VFSR9CKbNn0Zli/4Jo","BaiCao.NetworkClient"),Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../Main/Game/src/networks/Network.NetworkClient"),s=e("../../Main/Game/src/networks/Network.NetworkListener"),a=e("../../Main/Game/src/common/Configs");class n extends o.default{constructor(){super(),this.listeners=new Array,this.isUseWSS=a.default.App.USE_WSS}static getInstance(){return null==this.instance&&(this.instance=new n),this.instance}connect(){a.default.App.HOST_BAICAO.host="baicao.banhtest.top",super.connect(a.default.App.HOST_BAICAO.host,a.default.App.HOST_BAICAO.port)}onOpen(e){super.onOpen(e)}onMessage(e){for(var t=new Uint8Array(e.data),i=0;i<this.listeners.length;i++){var o=this.listeners[i];o.target&&o.target instanceof Object&&o.target.node?o.callback(t):(this.listeners.splice(i,1),i--)}}addListener(e,t){this.listeners.push(new s.default(t,e))}send(e){for(var t=new Int8Array(e._length),i=0;i<e._length;i++)t[i]=e._data[i];null!=this.ws&&this.isConnected()&&this.ws.send(t.buffer)}}i.default=n,cc._RF.pop()},{"../../Main/Game/src/common/Configs":void 0,"../../Main/Game/src/networks/Network.NetworkClient":void 0,"../../Main/Game/src/networks/Network.NetworkListener":void 0}],"BaiCao.Player":[function(e,t,i){"use strict";cc._RF.push(t,"62496vjvC9JXqua2Il+i42X","BaiCao.Player");var o=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../Main/Game/src/common/App"),a=e("../../Main/Game/src/common/BroadcastReceiver"),n=e("../../Main/Game/src/common/Utils"),{ccclass:r,property:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.btnInvite=null,this.avatar=null,this.cardReady=null,this.cardReal=null,this.userName=null,this.userGold=null,this.owner=null,this.cardsName=null,this.actionVaoGa=null,this.actionDanhBien=null,this.actionViewer=null,this.actionThinking=null,this.actionWin=null,this.goldWin=null,this.actionLose=null,this.goldLose=null,this.hub=null,this.goldBet=null,this.prefabItemChip=null,this.notify=null,this.chatEmotion=null,this.chatMsg=null,this.shadowAvatar=null,this.shadowInfo=null,this.spriteCardBack=null,this.popupBet=null,this.popupRequestDanhBien=null,this.labelValueDanhBien=null,this.posCardOpened=null,this.timeoutNotify=null,this.timeoutShowCardName=null,this.timeoutChat=null}onDestroy(){clearTimeout(this.timeoutNotify),clearTimeout(this.timeoutShowCardName),clearTimeout(this.timeoutChat)}start(){a.default.send(a.default.SET_SOUND,this.node)}updatePosCardOpened(e){this.posCardOpened=e}showChatEmotion(e){this.node.children[7].active=!0,this.chatEmotion.active=!0,this.chatMsg.active=!1,clearTimeout(this.timeoutChat),this.chatEmotion.getComponent(sp.Skeleton).setAnimation(0,e,!0),this.timeoutChat=setTimeout(()=>{null!=this.node&&void 0!==this.node&&(this.chatEmotion.active=!1,this.chatMsg.active=!1)},3e3)}showChatMsg(e){this.node.children[7].active=!0,this.chatEmotion.active=!1,this.chatMsg.active=!0,clearTimeout(this.timeoutChat),this.chatMsg.children[1].getComponent(cc.Label).string=e,this.timeoutChat=setTimeout(()=>{null!=this.node&&void 0!==this.node&&(this.chatEmotion.active=!1,this.chatMsg.active=!1)},3e3)}showPopupBet(e){this.popupBet.active=e,e&&(this.popupBet.children[2].active=!0,this.popupBet.children[3].active=!0,this.popupBet.children[5].active=!0,this.popupBet.children[6].active=!0,this.setCanDanhBien(!0),this.setCanKeCua(!0))}setupBetValue(e){this.popupBet.children[2].children[1].getComponent(cc.Label).string=n.default.formatNumber(e),this.popupBet.children[3].children[1].getComponent(cc.Label).string=n.default.formatNumber(2*e),this.popupBet.children[5].children[1].getComponent(cc.Label).string=n.default.formatNumber(e),this.popupBet.children[6].children[1].getComponent(cc.Label).string=n.default.formatNumber(2*e)}disableDanhBien(e){1==e?this.popupBet.children[3].active=!1:this.popupBet.children[2].active=!1,this.setCanDanhBien(!1)}disableKeCua(e){1==e?this.popupBet.children[6].active=!1:this.popupBet.children[5].active=!1,this.setCanKeCua(!1)}setCanDanhBien(e){this.popupBet.children[2].getComponent(cc.Button).interactable=e,this.popupBet.children[3].getComponent(cc.Button).interactable=e}setCanKeCua(e){this.popupBet.children[5].getComponent(cc.Button).interactable=e,this.popupBet.children[6].getComponent(cc.Button).interactable=e}showBtnInvite(e){this.btnInvite.active=e}setOwner(e){this.owner.active=e}setAvatar(e){this.node.children[1].active=!0,this.avatar.getComponent(cc.Sprite).spriteFrame=s.default.instance.getAvatarSpriteFrame(e)}setIsViewer(e){this.shadowAvatar.active=e,this.shadowInfo.active=e}setName(e){this.node.children[3].active=!0,this.userName.string=e}showCardReady(e){this.node.children[2].active=!0,this.cardReady.active=e}showCardReal(e){this.node.children[2].active=!0,this.cardReal.active=e}prepareToTransform(){this.prepareCardReal(0),this.prepareCardReal(1),this.prepareCardReal(2)}prepareCardReal(e){this.cardReal.children[e].runAction(cc.scaleTo(0,0,1))}transformToCardReal(e,t){this.showCardReal(!0),this.cardReal.children[e].children[0].getComponent(cc.Sprite).spriteFrame=t,this.cardReady.children[e].runAction(cc.sequence(cc.scaleTo(.15,0,1),cc.callFunc(()=>{}))),this.cardReal.children[e].runAction(cc.sequence(cc.delayTime(.15),cc.scaleTo(.15,1,1),cc.callFunc(()=>{})))}showCardName(e){cc.log("BaiCao_Player showCardName name : ",e),this.cardsName.active=!0,this.cardsName.children[0].getComponent(cc.Label).string=e,clearTimeout(this.timeoutShowCardName),this.timeoutShowCardName=setTimeout(()=>{null!=this.node&&void 0!==this.node&&(this.cardsName.active=!1)},4500)}setGold(e){this.actionThinking.active=!1,this.showGold(!0),this.userGold.string=this.formatGold(e)}setBet(e){this.showPlayerBet(!0),this.goldBet.string=this.formatGold(e)}addChips(){var e=cc.instantiate(this.prefabItemChip),t=cc.instantiate(this.prefabItemChip);this.hub.addChild(e),this.hub.addChild(t)}showPlayerBet(e){this.node.children[5].active=e,e||this.hub.removeAllChildren(!0)}setCardReal01(e){this.cardReal.children[0].children[0].getComponent(cc.Sprite).spriteFrame=e}setCardReal02(e){this.cardReal.children[1].children[0].getComponent(cc.Sprite).spriteFrame=e}showPlayCountdown(){this.node.children[4].active=!0,this.actionThinking.active=!0,this.processThinking(0)}hidePlayCountdown(){this.actionThinking.active=!1}processThinking(e){cc.log("BaiCao_Player processThinking rate : ",e),this.actionThinking.getComponent(cc.Sprite).fillRange=e}showGold(e){this.node.children[3].children[2].active=e}showPopupRequestDanhBien(e){this.popupRequestDanhBien.active=!0,this.labelValueDanhBien.string=this.formatGold(e)}closePopupRequestDanhBien(){this.popupRequestDanhBien.active=!1}prepareFxAction(){this.node.children[4].active=!0,this.resetAction()}playFxDanhBien(){this.node.children[4].active=!0,this.actionDanhBien.active=!0,this.actionDanhBien.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.05,1,1)))}playFxVaoGa(){this.node.children[4].active=!0,this.actionVaoGa.active=!0}playFxViewer(){this.prepareFxAction(),this.actionViewer.active=!0}fxOtherPlayerFold(){this.cardReady.runAction(cc.moveBy(.5,0,-100))}fxMeFold(){this.shadowCardReal(!0),this.cardReal.runAction(cc.moveBy(.5,0,-20))}showEatGa(e){this.actionWin.getChildByName("animAnGa").active=e}fxWin(e){cc.log("BaiCao_Player fxWin playerInfo : ",e),this.node.children[4].active=!0,this.actionWin.active=!0,this.fxGoldChange(0,e.moneyChange,this.goldWin.node),this.setGold(this.formatGold(e.money)),this.showEatGa(e.ga>0),setTimeout(()=>{null!=this.node&&void 0!==this.node&&(this.actionWin.active=!1,this.node.children[4].active=!1)},2500)}fxLose(e){cc.log("BaiCao_Player fxLose playerInfo : ",e),this.node.children[4].active=!0,this.actionLose.active=!0,this.fxGoldChange(0,e.moneyChange,this.goldLose.node),this.setGold(this.formatGold(e.money)),setTimeout(()=>{null!=this.node&&void 0!==this.node&&(this.actionLose.active=!1,this.node.children[4].active=!1)},2500)}shadowCardReady(e){this.cardReady.children[0].color=e?cc.Color.GRAY:cc.Color.WHITE,this.cardReady.children[1].color=e?cc.Color.GRAY:cc.Color.WHITE,this.cardReady.children[2].color=e?cc.Color.GRAY:cc.Color.WHITE}shadowCardReal(e){this.cardReal.children[0].children[0].color=e?cc.Color.GRAY:cc.Color.WHITE,this.cardReal.children[1].children[0].color=e?cc.Color.GRAY:cc.Color.WHITE,this.cardReal.children[2].children[0].color=e?cc.Color.GRAY:cc.Color.WHITE}setCardWin(e,t){this.cardReal.children[e].children[0].color=t?cc.Color.WHITE:cc.Color.GRAY}showNotify(e){this.notify.active=!0,this.notify.children[1].getComponent(cc.Label).string=e,clearTimeout(this.timeoutNotify),this.timeoutNotify=setTimeout(()=>{null!=this.node&&void 0!==this.node&&(this.notify.active=!1)},1500)}resetAction(){for(let e=0;e<this.node.children[4].childrenCount;e++)this.node.children[4].children[e].active=!1}resetMatchHistory(){this.resetCardReady(),this.resetCardReal(),this.node.children[2].active=!1,this.showGold(!0),this.cardsName.active=!1,this.resetAction(),this.node.children[5].active=!1,this.goldBet.string="0",this.hub.removeAllChildren(!0)}resetCardReady(){this.cardReady.children[0].scale=1,this.cardReady.children[1].scale=1,this.cardReady.children[2].scale=1,this.cardReady.active=!1}resetCardReal(){this.cardReal.active=!1,this.cardReal.y=0,this.cardReal.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReal.children[1].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReal.children[2].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.shadowCardReal(!1)}resetPlayerInfo(){for(let e=0;e<this.node.childrenCount;e++)this.node.children[e].active=!1;this.cardReal.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReal.children[1].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReal.children[2].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack,this.cardReady.active=!1,this.cardReal.active=!1,this.cardsName.active=!1,this.actionVaoGa.active=!1,this.actionDanhBien.active=!1,this.actionViewer.active=!1,this.actionThinking.active=!1,this.actionWin.active=!1,this.actionLose.active=!1,this.goldBet.string="0",this.hub.removeAllChildren(!0),this.setIsViewer(!0)}fxGoldChange(e,t,i){var o=t-e;i.getComponent(cc.Label).string=this.formatGold(e);var s=Math.floor(o/10),a=cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(()=>{e+=s,i.getComponent(cc.Label).string=(o>0?"+":"")+this.formatGold(e)})),10),n=cc.sequence(a,cc.callFunc(()=>{e=t,i.getComponent(cc.Label).string=(o>0?"+":"")+this.formatGold(e)}));i.runAction(n)}formatGold(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}};o([c(cc.Node)],l.prototype,"btnInvite",void 0),o([c(cc.Node)],l.prototype,"avatar",void 0),o([c(cc.Node)],l.prototype,"cardReady",void 0),o([c(cc.Node)],l.prototype,"cardReal",void 0),o([c(cc.Label)],l.prototype,"userName",void 0),o([c(cc.Label)],l.prototype,"userGold",void 0),o([c(cc.Node)],l.prototype,"owner",void 0),o([c(cc.Node)],l.prototype,"cardsName",void 0),o([c(cc.Node)],l.prototype,"actionVaoGa",void 0),o([c(cc.Node)],l.prototype,"actionDanhBien",void 0),o([c(cc.Node)],l.prototype,"actionViewer",void 0),o([c(cc.Node)],l.prototype,"actionThinking",void 0),o([c(cc.Node)],l.prototype,"actionWin",void 0),o([c(cc.Label)],l.prototype,"goldWin",void 0),o([c(cc.Node)],l.prototype,"actionLose",void 0),o([c(cc.Label)],l.prototype,"goldLose",void 0),o([c(cc.Node)],l.prototype,"hub",void 0),o([c(cc.Label)],l.prototype,"goldBet",void 0),o([c(cc.Prefab)],l.prototype,"prefabItemChip",void 0),o([c(cc.Node)],l.prototype,"notify",void 0),o([c(cc.Node)],l.prototype,"chatEmotion",void 0),o([c(cc.Node)],l.prototype,"chatMsg",void 0),o([c(cc.Node)],l.prototype,"shadowAvatar",void 0),o([c(cc.Node)],l.prototype,"shadowInfo",void 0),o([c(cc.SpriteFrame)],l.prototype,"spriteCardBack",void 0),o([c(cc.Node)],l.prototype,"popupBet",void 0),o([c(cc.Node)],l.prototype,"popupRequestDanhBien",void 0),o([c(cc.Label)],l.prototype,"labelValueDanhBien",void 0),l=o([r],l),i.default=l,cc._RF.pop()},{"../../Main/Game/src/common/App":void 0,"../../Main/Game/src/common/BroadcastReceiver":void 0,"../../Main/Game/src/common/Utils":void 0}]},{},["BaiCao.CardUtil","BaiCao.Cmd","BaiCao.Controller","BaiCao.ItemResult","BaiCao.ItemRoom","BaiCao.NetworkClient","BaiCao.Player"]);